(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function ZE(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Vm={exports:{}},nc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx;function JE(){if(cx)return nc;cx=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,l){var h=null;if(l!==void 0&&(h=""+l),o.key!==void 0&&(h=""+o.key),"key"in o){l={};for(var p in o)p!=="key"&&(l[p]=o[p])}else l=o;return o=l.ref,{$$typeof:s,type:i,key:h,ref:o!==void 0?o:null,props:l}}return nc.Fragment=e,nc.jsx=t,nc.jsxs=t,nc}var ux;function eT(){return ux||(ux=1,Vm.exports=JE()),Vm.exports}var u=eT(),zm={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hx;function tT(){if(hx)return Pe;hx=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.iterator;function T(U){return U===null||typeof U!="object"?null:(U=w&&U[w]||U["@@iterator"],typeof U=="function"?U:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,q={};function N(U,ie,pe){this.props=U,this.context=ie,this.refs=q,this.updater=pe||S}N.prototype.isReactComponent={},N.prototype.setState=function(U,ie){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ie,"setState")},N.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function V(){}V.prototype=N.prototype;function P(U,ie,pe){this.props=U,this.context=ie,this.refs=q,this.updater=pe||S}var k=P.prototype=new V;k.constructor=P,A(k,N.prototype),k.isPureReactComponent=!0;var F=Array.isArray,ee={H:null,A:null,T:null,S:null},re=Object.prototype.hasOwnProperty;function L(U,ie,pe,fe,me,Ie){return pe=Ie.ref,{$$typeof:s,type:U,key:ie,ref:pe!==void 0?pe:null,props:Ie}}function E(U,ie){return L(U.type,ie,void 0,void 0,void 0,U.props)}function R(U){return typeof U=="object"&&U!==null&&U.$$typeof===s}function M(U){var ie={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(pe){return ie[pe]})}var B=/\/+/g;function O(U,ie){return typeof U=="object"&&U!==null&&U.key!=null?M(""+U.key):ie.toString(36)}function D(){}function Ee(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(D,D):(U.status="pending",U.then(function(ie){U.status==="pending"&&(U.status="fulfilled",U.value=ie)},function(ie){U.status==="pending"&&(U.status="rejected",U.reason=ie)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function be(U,ie,pe,fe,me){var Ie=typeof U;(Ie==="undefined"||Ie==="boolean")&&(U=null);var he=!1;if(U===null)he=!0;else switch(Ie){case"bigint":case"string":case"number":he=!0;break;case"object":switch(U.$$typeof){case s:case e:he=!0;break;case x:return he=U._init,be(he(U._payload),ie,pe,fe,me)}}if(he)return me=me(U),he=fe===""?"."+O(U,0):fe,F(me)?(pe="",he!=null&&(pe=he.replace(B,"$&/")+"/"),be(me,ie,pe,"",function(ot){return ot})):me!=null&&(R(me)&&(me=E(me,pe+(me.key==null||U&&U.key===me.key?"":(""+me.key).replace(B,"$&/")+"/")+he)),ie.push(me)),1;he=0;var Ae=fe===""?".":fe+":";if(F(U))for(var Me=0;Me<U.length;Me++)fe=U[Me],Ie=Ae+O(fe,Me),he+=be(fe,ie,pe,Ie,me);else if(Me=T(U),typeof Me=="function")for(U=Me.call(U),Me=0;!(fe=U.next()).done;)fe=fe.value,Ie=Ae+O(fe,Me++),he+=be(fe,ie,pe,Ie,me);else if(Ie==="object"){if(typeof U.then=="function")return be(Ee(U),ie,pe,fe,me);throw ie=String(U),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return he}function X(U,ie,pe){if(U==null)return U;var fe=[],me=0;return be(U,fe,"","",function(Ie){return ie.call(pe,Ie,me++)}),fe}function Y(U){if(U._status===-1){var ie=U._result;ie=ie(),ie.then(function(pe){(U._status===0||U._status===-1)&&(U._status=1,U._result=pe)},function(pe){(U._status===0||U._status===-1)&&(U._status=2,U._result=pe)}),U._status===-1&&(U._status=0,U._result=ie)}if(U._status===1)return U._result.default;throw U._result}var ne=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function ce(){}return Pe.Children={map:X,forEach:function(U,ie,pe){X(U,function(){ie.apply(this,arguments)},pe)},count:function(U){var ie=0;return X(U,function(){ie++}),ie},toArray:function(U){return X(U,function(ie){return ie})||[]},only:function(U){if(!R(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Pe.Component=N,Pe.Fragment=t,Pe.Profiler=o,Pe.PureComponent=P,Pe.StrictMode=i,Pe.Suspense=m,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,Pe.act=function(){throw Error("act(...) is not supported in production builds of React.")},Pe.cache=function(U){return function(){return U.apply(null,arguments)}},Pe.cloneElement=function(U,ie,pe){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var fe=A({},U.props),me=U.key,Ie=void 0;if(ie!=null)for(he in ie.ref!==void 0&&(Ie=void 0),ie.key!==void 0&&(me=""+ie.key),ie)!re.call(ie,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&ie.ref===void 0||(fe[he]=ie[he]);var he=arguments.length-2;if(he===1)fe.children=pe;else if(1<he){for(var Ae=Array(he),Me=0;Me<he;Me++)Ae[Me]=arguments[Me+2];fe.children=Ae}return L(U.type,me,void 0,void 0,Ie,fe)},Pe.createContext=function(U){return U={$$typeof:h,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},Pe.createElement=function(U,ie,pe){var fe,me={},Ie=null;if(ie!=null)for(fe in ie.key!==void 0&&(Ie=""+ie.key),ie)re.call(ie,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(me[fe]=ie[fe]);var he=arguments.length-2;if(he===1)me.children=pe;else if(1<he){for(var Ae=Array(he),Me=0;Me<he;Me++)Ae[Me]=arguments[Me+2];me.children=Ae}if(U&&U.defaultProps)for(fe in he=U.defaultProps,he)me[fe]===void 0&&(me[fe]=he[fe]);return L(U,Ie,void 0,void 0,null,me)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(U){return{$$typeof:p,render:U}},Pe.isValidElement=R,Pe.lazy=function(U){return{$$typeof:x,_payload:{_status:-1,_result:U},_init:Y}},Pe.memo=function(U,ie){return{$$typeof:y,type:U,compare:ie===void 0?null:ie}},Pe.startTransition=function(U){var ie=ee.T,pe={};ee.T=pe;try{var fe=U(),me=ee.S;me!==null&&me(pe,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(ce,ne)}catch(Ie){ne(Ie)}finally{ee.T=ie}},Pe.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},Pe.use=function(U){return ee.H.use(U)},Pe.useActionState=function(U,ie,pe){return ee.H.useActionState(U,ie,pe)},Pe.useCallback=function(U,ie){return ee.H.useCallback(U,ie)},Pe.useContext=function(U){return ee.H.useContext(U)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(U,ie){return ee.H.useDeferredValue(U,ie)},Pe.useEffect=function(U,ie){return ee.H.useEffect(U,ie)},Pe.useId=function(){return ee.H.useId()},Pe.useImperativeHandle=function(U,ie,pe){return ee.H.useImperativeHandle(U,ie,pe)},Pe.useInsertionEffect=function(U,ie){return ee.H.useInsertionEffect(U,ie)},Pe.useLayoutEffect=function(U,ie){return ee.H.useLayoutEffect(U,ie)},Pe.useMemo=function(U,ie){return ee.H.useMemo(U,ie)},Pe.useOptimistic=function(U,ie){return ee.H.useOptimistic(U,ie)},Pe.useReducer=function(U,ie,pe){return ee.H.useReducer(U,ie,pe)},Pe.useRef=function(U){return ee.H.useRef(U)},Pe.useState=function(U){return ee.H.useState(U)},Pe.useSyncExternalStore=function(U,ie,pe){return ee.H.useSyncExternalStore(U,ie,pe)},Pe.useTransition=function(){return ee.H.useTransition()},Pe.version="19.0.0",Pe}var dx;function Lp(){return dx||(dx=1,zm.exports=tT()),zm.exports}var C=Lp();const _a=ZE(C);var Bm={exports:{}},sc={},qm={exports:{}},Hm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fx;function nT(){return fx||(fx=1,function(s){function e(X,Y){var ne=X.length;X.push(Y);e:for(;0<ne;){var ce=ne-1>>>1,U=X[ce];if(0<o(U,Y))X[ce]=Y,X[ne]=U,ne=ce;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var Y=X[0],ne=X.pop();if(ne!==Y){X[0]=ne;e:for(var ce=0,U=X.length,ie=U>>>1;ce<ie;){var pe=2*(ce+1)-1,fe=X[pe],me=pe+1,Ie=X[me];if(0>o(fe,ne))me<U&&0>o(Ie,fe)?(X[ce]=Ie,X[me]=ne,ce=me):(X[ce]=fe,X[pe]=ne,ce=pe);else if(me<U&&0>o(Ie,ne))X[ce]=Ie,X[me]=ne,ce=me;else break e}}return Y}function o(X,Y){var ne=X.sortIndex-Y.sortIndex;return ne!==0?ne:X.id-Y.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var m=[],y=[],x=1,w=null,T=3,S=!1,A=!1,q=!1,N=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function k(X){for(var Y=t(y);Y!==null;){if(Y.callback===null)i(y);else if(Y.startTime<=X)i(y),Y.sortIndex=Y.expirationTime,e(m,Y);else break;Y=t(y)}}function F(X){if(q=!1,k(X),!A)if(t(m)!==null)A=!0,Ee();else{var Y=t(y);Y!==null&&be(F,Y.startTime-X)}}var ee=!1,re=-1,L=5,E=-1;function R(){return!(s.unstable_now()-E<L)}function M(){if(ee){var X=s.unstable_now();E=X;var Y=!0;try{e:{A=!1,q&&(q=!1,V(re),re=-1),S=!0;var ne=T;try{t:{for(k(X),w=t(m);w!==null&&!(w.expirationTime>X&&R());){var ce=w.callback;if(typeof ce=="function"){w.callback=null,T=w.priorityLevel;var U=ce(w.expirationTime<=X);if(X=s.unstable_now(),typeof U=="function"){w.callback=U,k(X),Y=!0;break t}w===t(m)&&i(m),k(X)}else i(m);w=t(m)}if(w!==null)Y=!0;else{var ie=t(y);ie!==null&&be(F,ie.startTime-X),Y=!1}}break e}finally{w=null,T=ne,S=!1}Y=void 0}}finally{Y?B():ee=!1}}}var B;if(typeof P=="function")B=function(){P(M)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,D=O.port2;O.port1.onmessage=M,B=function(){D.postMessage(null)}}else B=function(){N(M,0)};function Ee(){ee||(ee=!0,B())}function be(X,Y){re=N(function(){X(s.unstable_now())},Y)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(X){X.callback=null},s.unstable_continueExecution=function(){A||S||(A=!0,Ee())},s.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<X?Math.floor(1e3/X):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_getFirstCallbackNode=function(){return t(m)},s.unstable_next=function(X){switch(T){case 1:case 2:case 3:var Y=3;break;default:Y=T}var ne=T;T=Y;try{return X()}finally{T=ne}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(X,Y){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ne=T;T=X;try{return Y()}finally{T=ne}},s.unstable_scheduleCallback=function(X,Y,ne){var ce=s.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ce+ne:ce):ne=ce,X){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ne+U,X={id:x++,callback:Y,priorityLevel:X,startTime:ne,expirationTime:U,sortIndex:-1},ne>ce?(X.sortIndex=ne,e(y,X),t(m)===null&&X===t(y)&&(q?(V(re),re=-1):q=!0,be(F,ne-ce))):(X.sortIndex=U,e(m,X),A||S||(A=!0,Ee())),X},s.unstable_shouldYield=R,s.unstable_wrapCallback=function(X){var Y=T;return function(){var ne=T;T=Y;try{return X.apply(this,arguments)}finally{T=ne}}}}(Hm)),Hm}var mx;function sT(){return mx||(mx=1,qm.exports=nT()),qm.exports}var Fm={exports:{}},hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var px;function rT(){if(px)return hn;px=1;var s=Lp();function e(m){var y="https://react.dev/errors/"+m;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+m+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(m,y,x){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:m,containerInfo:y,implementation:x}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,y){if(m==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,hn.createPortal=function(m,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(m,y,null,x)},hn.flushSync=function(m){var y=h.T,x=i.p;try{if(h.T=null,i.p=2,m)return m()}finally{h.T=y,i.p=x,i.d.f()}},hn.preconnect=function(m,y){typeof m=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(m,y))},hn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},hn.preinit=function(m,y){if(typeof m=="string"&&y&&typeof y.as=="string"){var x=y.as,w=p(x,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,S=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?i.d.S(m,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:S}):x==="script"&&i.d.X(m,{crossOrigin:w,integrity:T,fetchPriority:S,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},hn.preinitModule=function(m,y){if(typeof m=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=p(y.as,y.crossOrigin);i.d.M(m,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(m)},hn.preload=function(m,y){if(typeof m=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,w=p(x,y.crossOrigin);i.d.L(m,x,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},hn.preloadModule=function(m,y){if(typeof m=="string")if(y){var x=p(y.as,y.crossOrigin);i.d.m(m,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(m)},hn.requestFormReset=function(m){i.d.r(m)},hn.unstable_batchedUpdates=function(m,y){return m(y)},hn.useFormState=function(m,y,x){return h.H.useFormState(m,y,x)},hn.useFormStatus=function(){return h.H.useHostTransitionStatus()},hn.version="19.0.0",hn}var gx;function iT(){if(gx)return Fm.exports;gx=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Fm.exports=rT(),Fm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx;function aT(){if(yx)return sc;yx=1;var s=sT(),e=Lp(),t=iT();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var l=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),S=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),F=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function re(n){return n===null||typeof n!="object"?null:(n=ee&&n[ee]||n["@@iterator"],typeof n=="function"?n:null)}var L=Symbol.for("react.client.reference");function E(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===L?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case m:return"Fragment";case p:return"Portal";case x:return"Profiler";case y:return"StrictMode";case q:return"Suspense";case N:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case S:return(n.displayName||"Context")+".Provider";case T:return(n._context.displayName||"Context")+".Consumer";case A:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case V:return r=n.displayName||null,r!==null?r:E(n.type)||"Memo";case P:r=n._payload,n=n._init;try{return E(n(r))}catch{}}return null}var R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=Object.assign,B,O;function D(n){if(B===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);B=r&&r[1]||"",O=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+B+n+O}var Ee=!1;function be(n,r){if(!n||Ee)return"";Ee=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(te){var W=te}Reflect.construct(n,[],ue)}else{try{ue.call()}catch(te){W=te}n.call(ue.prototype)}}else{try{throw Error()}catch(te){W=te}(ue=n())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(te){if(te&&W&&typeof te.stack=="string")return[te.stack,W.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),b=g[0],j=g[1];if(b&&j){var z=b.split(`
`),G=j.split(`
`);for(f=c=0;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(c===z.length||f===G.length)for(c=z.length-1,f=G.length-1;1<=c&&0<=f&&z[c]!==G[f];)f--;for(;1<=c&&0<=f;c--,f--)if(z[c]!==G[f]){if(c!==1||f!==1)do if(c--,f--,0>f||z[c]!==G[f]){var se=`
`+z[c].replace(" at new "," at ");return n.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",n.displayName)),se}while(1<=c&&0<=f);break}}}finally{Ee=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?D(a):""}function X(n){switch(n.tag){case 26:case 27:case 5:return D(n.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 15:return n=be(n.type,!1),n;case 11:return n=be(n.type.render,!1),n;case 1:return n=be(n.type,!0),n;default:return""}}function Y(n){try{var r="";do r+=X(n),n=n.return;while(n);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function ne(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,r.flags&4098&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function ce(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function U(n){if(ne(n)!==n)throw Error(i(188))}function ie(n){var r=n.alternate;if(!r){if(r=ne(n),r===null)throw Error(i(188));return r!==n?null:n}for(var a=n,c=r;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return U(f),n;if(g===c)return U(f),r;g=g.sibling}throw Error(i(188))}if(a.return!==c.return)a=f,c=g;else{for(var b=!1,j=f.child;j;){if(j===a){b=!0,a=f,c=g;break}if(j===c){b=!0,c=f,a=g;break}j=j.sibling}if(!b){for(j=g.child;j;){if(j===a){b=!0,a=g,c=f;break}if(j===c){b=!0,c=g,a=f;break}j=j.sibling}if(!b)throw Error(i(189))}}if(a.alternate!==c)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?n:r}function pe(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=pe(n),r!==null)return r;n=n.sibling}return null}var fe=Array.isArray,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ie={pending:!1,data:null,method:null,action:null},he=[],Ae=-1;function Me(n){return{current:n}}function ot(n){0>Ae||(n.current=he[Ae],he[Ae]=null,Ae--)}function et(n,r){Ae++,he[Ae]=n.current,n.current=r}var Lt=Me(null),$s=Me(null),zn=Me(null),Ir=Me(null);function Dr(n,r){switch(et(zn,r),et($s,n),et(Lt,null),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)&&(r=r.namespaceURI)?Uv(r):0;break;default:if(n=n===8?r.parentNode:r,r=n.tagName,n=n.namespaceURI)n=Uv(n),r=Vv(n,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ot(Lt),et(Lt,r)}function Ks(){ot(Lt),ot($s),ot(zn)}function Xo(n){n.memoizedState!==null&&et(Ir,n);var r=Lt.current,a=Vv(r,n.type);r!==a&&(et($s,n),et(Lt,a))}function Da(n){$s.current===n&&(ot(Lt),ot($s)),Ir.current===n&&(ot(Ir),Xl._currentValue=Ie)}var Ma=Object.prototype.hasOwnProperty,Vi=s.unstable_scheduleCallback,Oa=s.unstable_cancelCallback,zd=s.unstable_shouldYield,Zo=s.unstable_requestPaint,Nn=s.unstable_now,Zc=s.unstable_getCurrentPriorityLevel,Ut=s.unstable_ImmediatePriority,Kt=s.unstable_UserBlockingPriority,Qs=s.unstable_NormalPriority,Jc=s.unstable_LowPriority,Jo=s.unstable_IdlePriority,Bd=s.log,zi=s.unstable_setDisableYieldValue,Mr=null,cn=null;function el(n){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Mr,n,void 0,(n.current.flags&128)===128)}catch{}}function _s(n){if(typeof Bd=="function"&&zi(n),cn&&typeof cn.setStrictMode=="function")try{cn.setStrictMode(Mr,n)}catch{}}var yn=Math.clz32?Math.clz32:tu,tl=Math.log,eu=Math.LN2;function tu(n){return n>>>=0,n===0?32:31-(tl(n)/eu|0)|0}var bs=128,Or=4194304;function as(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Bn(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,g=n.pingedLanes,b=n.warmLanes;n=n.finishedLanes!==0;var j=a&134217727;return j!==0?(a=j&~f,a!==0?c=as(a):(g&=j,g!==0?c=as(g):n||(b=j&~b,b!==0&&(c=as(b))))):(j=a&~f,j!==0?c=as(j):g!==0?c=as(g):n||(b=a&~b,b!==0&&(c=as(b)))),c===0?0:r!==0&&r!==c&&!(r&f)&&(f=c&-c,b=r&-r,f>=b||f===32&&(b&4194176)!==0)?r:c}function kr(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function ka(n,r){switch(n){case 1:case 2:case 4:case 8:return r+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nl(){var n=bs;return bs<<=1,!(bs&4194176)&&(bs=128),n}function Pr(){var n=Or;return Or<<=1,!(Or&62914560)&&(Or=4194304),n}function Pa(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function At(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function nu(n,r,a,c,f,g){var b=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var j=n.entanglements,z=n.expirationTimes,G=n.hiddenUpdates;for(a=b&~a;0<a;){var se=31-yn(a),ue=1<<se;j[se]=0,z[se]=-1;var W=G[se];if(W!==null)for(G[se]=null,se=0;se<W.length;se++){var te=W[se];te!==null&&(te.lane&=-536870913)}a&=~ue}c!==0&&Lr(n,c,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(b&~r))}function Lr(n,r,a){n.pendingLanes|=r,n.suspendedLanes&=~r;var c=31-yn(r);n.entangledLanes|=r,n.entanglements[c]=n.entanglements[c]|1073741824|a&4194218}function Ur(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-yn(a),f=1<<c;f&r|n[c]&r&&(n[c]|=r),a&=~f}}function su(n){return n&=-n,2<n?8<n?n&134217727?32:268435456:8:2}function ru(){var n=me.p;return n!==0?n:(n=window.event,n===void 0?32:sx(n.type))}function Vr(n,r){var a=me.p;try{return me.p=n,r()}finally{me.p=a}}var ws=Math.random().toString(36).slice(2),Qt="__reactFiber$"+ws,Vt="__reactProps$"+ws,Ys="__reactContainer$"+ws,Bi="__reactEvents$"+ws,La="__reactListeners$"+ws,Es="__reactHandles$"+ws,sl="__reactResources$"+ws,zr="__reactMarker$"+ws;function qi(n){delete n[Qt],delete n[Vt],delete n[Bi],delete n[La],delete n[Es]}function os(n){var r=n[Qt];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Ys]||a[Qt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=qv(n);n!==null;){if(a=n[Qt])return a;n=qv(n)}return r}n=a,a=n.parentNode}return null}function Ws(n){if(n=n[Qt]||n[Ys]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function Br(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function qr(n){var r=n[sl];return r||(r=n[sl]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function yt(n){n[zr]=!0}var rl=new Set,Ua={};function In(n,r){Sn(n,r),Sn(n+"Capture",r)}function Sn(n,r){for(Ua[n]=r,n=0;n<r.length;n++)rl.add(r[n])}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),il={},al={};function iu(n){return Ma.call(al,n)?!0:Ma.call(il,n)?!1:qd.test(n)?al[n]=!0:(il[n]=!0,!1)}function Hr(n,r,a){if(iu(r))if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+a)}}function Fr(n,r,a){if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+a)}}function qn(n,r,a,c){if(c===null)n.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(r,a,""+c)}}function vn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function au(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Hd(n){var r=au(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(b){c=""+b,g.call(this,b)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(b){c=""+b},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Hi(n){n._valueTracker||(n._valueTracker=Hd(n))}function ol(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=au(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function Va(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Xs=/[\n"\\]/g;function bt(n){return n.replace(Xs,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Gr(n,r,a,c,f,g,b,j){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),r!=null?b==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+vn(r)):n.value!==""+vn(r)&&(n.value=""+vn(r)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),r!=null?za(n,b,vn(r)):a!=null?za(n,b,vn(a)):c!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?n.name=""+vn(j):n.removeAttribute("name")}function Fi(n,r,a,c,f,g,b,j){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),r!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||r!=null))return;a=a!=null?""+vn(a):"",r=r!=null?""+vn(r):a,j||r===n.value||(n.value=r),n.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=j?n.checked:!!c,n.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b)}function za(n,r,a){r==="number"&&Va(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Xe(n,r,a,c){if(n=n.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=r.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+vn(a),r=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function Gi(n,r,a){if(r!=null&&(r=""+vn(r),r!==n.value&&(n.value=r),a==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=a!=null?""+vn(a):""}function $r(n,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(i(92));if(fe(c)){if(1<c.length)throw Error(i(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=vn(r),n.defaultValue=a,c=n.textContent,c===a&&c!==""&&c!==null&&(n.value=c)}function Hn(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var Fd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ll(n,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":c?n.setProperty(r,a):typeof a!="number"||a===0||Fd.has(r)?r==="float"?n.cssFloat=a:n[r]=(""+a).trim():n[r]=a+"px"}function ou(n,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&a[f]!==c&&ll(n,f,c)}else for(var g in r)r.hasOwnProperty(g)&&ll(n,g,r[g])}function cl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$d=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ts(n){return $d.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Fn=null;function Ba(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Zs=null,Js=null;function er(n){var r=Ws(n);if(r&&(n=r.stateNode)){var a=n[Vt]||null;e:switch(n=r.stateNode,r.type){case"input":if(Gr(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+bt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var f=c[Vt]||null;if(!f)throw Error(i(90));Gr(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===n.form&&ol(c)}break e;case"textarea":Gi(n,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Xe(n,!!a.multiple,r,!1)}}}var ul=!1;function lu(n,r,a){if(ul)return n(r,a);ul=!0;try{var c=n(r);return c}finally{if(ul=!1,(Zs!==null||Js!==null)&&(Ju(),Zs&&(r=Zs,n=Js,Js=Zs=null,er(r),n)))for(r=0;r<n.length;r++)er(n[r])}}function $i(n,r){var a=n.stateNode;if(a===null)return null;var c=a[Vt]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var Gn=!1;if(Dn)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{Gn=!1}var Ns=null,Kr=null,tr=null;function hl(){if(tr)return tr;var n,r=Kr,a=r.length,c,f="value"in Ns?Ns.value:Ns.textContent,g=f.length;for(n=0;n<a&&r[n]===f[n];n++);var b=a-n;for(c=1;c<=b&&r[a-c]===f[g-c];c++);return tr=f.slice(n,1<c?1-c:void 0)}function Ss(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function As(){return!0}function dl(){return!1}function Yt(n){function r(a,c,f,g,b){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var j in n)n.hasOwnProperty(j)&&(a=n[j],this[j]=a?a(g):g[j]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?As:dl,this.isPropagationStopped=dl,this}return M(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=As)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=As)},persist:function(){},isPersistent:As}),r}var nt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qa=Yt(nt),Qi=M({},nt,{view:0,detail:0}),cu=Yt(Qi),Ha,Fa,Rs,Yi=M({},Qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Rs&&(Rs&&n.type==="mousemove"?(Ha=n.screenX-Rs.screenX,Fa=n.screenY-Rs.screenY):Fa=Ha=0,Rs=n),Ha)},movementY:function(n){return"movementY"in n?n.movementY:Fa}}),$n=Yt(Yi),uu=M({},Yi,{dataTransfer:0}),Kd=Yt(uu),Wi=M({},Qi,{relatedTarget:0}),Ga=Yt(Wi),fl=M({},nt,{animationName:0,elapsedTime:0,pseudoElement:0}),$a=Yt(fl),hu=M({},nt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ka=Yt(hu),Qd=M({},nt,{data:0}),ml=Yt(Qd),Xi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},du={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pl(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=fu[n])?!!r[n]:!1}function Zi(){return pl}var mu=M({},Qi,{key:function(n){if(n.key){var r=Xi[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Ss(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?du[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zi,charCode:function(n){return n.type==="keypress"?Ss(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ss(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Qa=Yt(mu),pu=M({},Yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gl=Yt(pu),nr=M({},Qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zi}),gu=Yt(nr),yu=M({},nt,{propertyName:0,elapsedTime:0,pseudoElement:0}),vu=Yt(yu),xu=M({},Yi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ya=Yt(xu),xn=M({},nt,{newState:0,oldState:0}),_u=Yt(xn),bu=[9,13,27,32],Cs=Dn&&"CompositionEvent"in window,d=null;Dn&&"documentMode"in document&&(d=document.documentMode);var v=Dn&&"TextEvent"in window&&!d,_=Dn&&(!Cs||d&&8<d&&11>=d),I=" ",K=!1;function J(n,r){switch(n){case"keyup":return bu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function de(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ge=!1;function zt(n,r){switch(n){case"compositionend":return de(r);case"keypress":return r.which!==32?null:(K=!0,I);case"textInput":return n=r.data,n===I&&K?null:n;default:return null}}function $e(n,r){if(Ge)return n==="compositionend"||!Cs&&J(n,r)?(n=hl(),tr=Kr=Ns=null,Ge=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return _&&r.locale!=="ko"?null:r.data;default:return null}}var Wt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bt(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Wt[n.type]:r==="textarea"}function sr(n,r,a,c){Zs?Js?Js.push(c):Js=[c]:Zs=c,r=rh(r,"onChange"),0<r.length&&(a=new qa("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var tn=null,js=null;function yl(n){Mv(n,0)}function wu(n){var r=Br(n);if(ol(r))return n}function ly(n,r){if(n==="change")return r}var cy=!1;if(Dn){var Yd;if(Dn){var Wd="oninput"in document;if(!Wd){var uy=document.createElement("div");uy.setAttribute("oninput","return;"),Wd=typeof uy.oninput=="function"}Yd=Wd}else Yd=!1;cy=Yd&&(!document.documentMode||9<document.documentMode)}function hy(){tn&&(tn.detachEvent("onpropertychange",dy),js=tn=null)}function dy(n){if(n.propertyName==="value"&&wu(js)){var r=[];sr(r,js,n,Ba(n)),lu(yl,r)}}function R2(n,r,a){n==="focusin"?(hy(),tn=r,js=a,tn.attachEvent("onpropertychange",dy)):n==="focusout"&&hy()}function C2(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return wu(js)}function j2(n,r){if(n==="click")return wu(r)}function I2(n,r){if(n==="input"||n==="change")return wu(r)}function D2(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Mn=typeof Object.is=="function"?Object.is:D2;function vl(n,r){if(Mn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!Ma.call(r,f)||!Mn(n[f],r[f]))return!1}return!0}function fy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function my(n,r){var a=fy(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=fy(a)}}function py(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?py(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function gy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Va(n.document);r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=Va(n.document)}return r}function Xd(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function M2(n,r){var a=gy(r);r=n.focusedElem;var c=n.selectionRange;if(a!==r&&r&&r.ownerDocument&&py(r.ownerDocument.documentElement,r)){if(c!==null&&Xd(r)){if(n=c.start,a=c.end,a===void 0&&(a=n),"selectionStart"in r)r.selectionStart=n,r.selectionEnd=Math.min(a,r.value.length);else if(a=(n=r.ownerDocument||document)&&n.defaultView||window,a.getSelection){a=a.getSelection();var f=r.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!a.extend&&g>c&&(f=c,c=g,g=f),f=my(r,g);var b=my(r,c);f&&b&&(a.rangeCount!==1||a.anchorNode!==f.node||a.anchorOffset!==f.offset||a.focusNode!==b.node||a.focusOffset!==b.offset)&&(n=n.createRange(),n.setStart(f.node,f.offset),a.removeAllRanges(),g>c?(a.addRange(n),a.extend(b.node,b.offset)):(n.setEnd(b.node,b.offset),a.addRange(n)))}}for(n=[],a=r;a=a.parentNode;)a.nodeType===1&&n.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<n.length;r++)a=n[r],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var O2=Dn&&"documentMode"in document&&11>=document.documentMode,Wa=null,Zd=null,xl=null,Jd=!1;function yy(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Jd||Wa==null||Wa!==Va(c)||(c=Wa,"selectionStart"in c&&Xd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),xl&&vl(xl,c)||(xl=c,c=rh(Zd,"onSelect"),0<c.length&&(r=new qa("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=Wa)))}function Ji(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Xa={animationend:Ji("Animation","AnimationEnd"),animationiteration:Ji("Animation","AnimationIteration"),animationstart:Ji("Animation","AnimationStart"),transitionrun:Ji("Transition","TransitionRun"),transitionstart:Ji("Transition","TransitionStart"),transitioncancel:Ji("Transition","TransitionCancel"),transitionend:Ji("Transition","TransitionEnd")},ef={},vy={};Dn&&(vy=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function ea(n){if(ef[n])return ef[n];if(!Xa[n])return n;var r=Xa[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in vy)return ef[n]=r[a];return n}var xy=ea("animationend"),_y=ea("animationiteration"),by=ea("animationstart"),k2=ea("transitionrun"),P2=ea("transitionstart"),L2=ea("transitioncancel"),wy=ea("transitionend"),Ey=new Map,Ty="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function ls(n,r){Ey.set(n,r),In(r,[n])}var Kn=[],Za=0,tf=0;function Eu(){for(var n=Za,r=tf=Za=0;r<n;){var a=Kn[r];Kn[r++]=null;var c=Kn[r];Kn[r++]=null;var f=Kn[r];Kn[r++]=null;var g=Kn[r];if(Kn[r++]=null,c!==null&&f!==null){var b=c.pending;b===null?f.next=f:(f.next=b.next,b.next=f),c.pending=f}g!==0&&Ny(a,f,g)}}function Tu(n,r,a,c){Kn[Za++]=n,Kn[Za++]=r,Kn[Za++]=a,Kn[Za++]=c,tf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function nf(n,r,a,c){return Tu(n,r,a,c),Nu(n)}function Qr(n,r){return Tu(n,null,null,r),Nu(n)}function Ny(n,r,a){n.lanes|=a;var c=n.alternate;c!==null&&(c.lanes|=a);for(var f=!1,g=n.return;g!==null;)g.childLanes|=a,c=g.alternate,c!==null&&(c.childLanes|=a),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;f&&r!==null&&n.tag===3&&(g=n.stateNode,f=31-yn(a),g=g.hiddenUpdates,n=g[f],n===null?g[f]=[r]:n.push(r),r.lane=a|536870912)}function Nu(n){if(50<Fl)throw Fl=0,cm=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Ja={},Sy=new WeakMap;function Qn(n,r){if(typeof n=="object"&&n!==null){var a=Sy.get(n);return a!==void 0?a:(r={value:n,source:r,stack:Y(r)},Sy.set(n,r),r)}return{value:n,source:r,stack:Y(r)}}var eo=[],to=0,Su=null,Au=0,Yn=[],Wn=0,ta=null,rr=1,ir="";function na(n,r){eo[to++]=Au,eo[to++]=Su,Su=n,Au=r}function Ay(n,r,a){Yn[Wn++]=rr,Yn[Wn++]=ir,Yn[Wn++]=ta,ta=n;var c=rr;n=ir;var f=32-yn(c)-1;c&=~(1<<f),a+=1;var g=32-yn(r)+f;if(30<g){var b=f-f%5;g=(c&(1<<b)-1).toString(32),c>>=b,f-=b,rr=1<<32-yn(r)+f|a<<f|c,ir=g+n}else rr=1<<g|a<<f|c,ir=n}function sf(n){n.return!==null&&(na(n,1),Ay(n,1,0))}function rf(n){for(;n===Su;)Su=eo[--to],eo[to]=null,Au=eo[--to],eo[to]=null;for(;n===ta;)ta=Yn[--Wn],Yn[Wn]=null,ir=Yn[--Wn],Yn[Wn]=null,rr=Yn[--Wn],Yn[Wn]=null}var _n=null,nn=null,Ze=!1,cs=null,Is=!1,af=Error(i(519));function sa(n){var r=Error(i(418,""));throw wl(Qn(r,n)),af}function Ry(n){var r=n.stateNode,a=n.type,c=n.memoizedProps;switch(r[Qt]=n,r[Vt]=c,a){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(a=0;a<$l.length;a++)Fe($l[a],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Fe("invalid",r),Fi(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Hi(r);break;case"select":Fe("invalid",r);break;case"textarea":Fe("invalid",r),$r(r,c.value,c.defaultValue,c.children),Hi(r)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||Lv(r.textContent,a)?(c.popover!=null&&(Fe("beforetoggle",r),Fe("toggle",r)),c.onScroll!=null&&Fe("scroll",r),c.onScrollEnd!=null&&Fe("scrollend",r),c.onClick!=null&&(r.onclick=ih),r=!0):r=!1,r||sa(n)}function Cy(n){for(_n=n.return;_n;)switch(_n.tag){case 3:case 27:Is=!0;return;case 5:case 13:Is=!1;return;default:_n=_n.return}}function _l(n){if(n!==_n)return!1;if(!Ze)return Cy(n),Ze=!0,!1;var r=!1,a;if((a=n.tag!==3&&n.tag!==27)&&((a=n.tag===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Sm(n.type,n.memoizedProps)),a=!a),a&&(r=!0),r&&nn&&sa(n),Cy(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(r===0){nn=hs(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;n=n.nextSibling}nn=null}}else nn=_n?hs(n.stateNode.nextSibling):null;return!0}function bl(){nn=_n=null,Ze=!1}function wl(n){cs===null?cs=[n]:cs.push(n)}var El=Error(i(460)),jy=Error(i(474)),of={then:function(){}};function Iy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ru(){}function Dy(n,r,a){switch(a=n[a],a===void 0?n.push(r):a!==r&&(r.then(Ru,Ru),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,n===El?Error(i(483)):n;default:if(typeof r.status=="string")r.then(Ru,Ru);else{if(n=ct,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,n===El?Error(i(483)):n}throw Tl=r,El}}var Tl=null;function My(){if(Tl===null)throw Error(i(459));var n=Tl;return Tl=null,n}var no=null,Nl=0;function Cu(n){var r=Nl;return Nl+=1,no===null&&(no=[]),Dy(no,n,r)}function Sl(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function ju(n,r){throw r.$$typeof===l?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Oy(n){var r=n._init;return r(n._payload)}function ky(n){function r($,H){if(n){var Q=$.deletions;Q===null?($.deletions=[H],$.flags|=16):Q.push(H)}}function a($,H){if(!n)return null;for(;H!==null;)r($,H),H=H.sibling;return null}function c($){for(var H=new Map;$!==null;)$.key!==null?H.set($.key,$):H.set($.index,$),$=$.sibling;return H}function f($,H){return $=ai($,H),$.index=0,$.sibling=null,$}function g($,H,Q){return $.index=Q,n?(Q=$.alternate,Q!==null?(Q=Q.index,Q<H?($.flags|=33554434,H):Q):($.flags|=33554434,H)):($.flags|=1048576,H)}function b($){return n&&$.alternate===null&&($.flags|=33554434),$}function j($,H,Q,oe){return H===null||H.tag!==6?(H=tm(Q,$.mode,oe),H.return=$,H):(H=f(H,Q),H.return=$,H)}function z($,H,Q,oe){var _e=Q.type;return _e===m?se($,H,Q.props.children,oe,Q.key):H!==null&&(H.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===P&&Oy(_e)===H.type)?(H=f(H,Q.props),Sl(H,Q),H.return=$,H):(H=Qu(Q.type,Q.key,Q.props,null,$.mode,oe),Sl(H,Q),H.return=$,H)}function G($,H,Q,oe){return H===null||H.tag!==4||H.stateNode.containerInfo!==Q.containerInfo||H.stateNode.implementation!==Q.implementation?(H=nm(Q,$.mode,oe),H.return=$,H):(H=f(H,Q.children||[]),H.return=$,H)}function se($,H,Q,oe,_e){return H===null||H.tag!==7?(H=fa(Q,$.mode,oe,_e),H.return=$,H):(H=f(H,Q),H.return=$,H)}function ue($,H,Q){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=tm(""+H,$.mode,Q),H.return=$,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case h:return Q=Qu(H.type,H.key,H.props,null,$.mode,Q),Sl(Q,H),Q.return=$,Q;case p:return H=nm(H,$.mode,Q),H.return=$,H;case P:var oe=H._init;return H=oe(H._payload),ue($,H,Q)}if(fe(H)||re(H))return H=fa(H,$.mode,Q,null),H.return=$,H;if(typeof H.then=="function")return ue($,Cu(H),Q);if(H.$$typeof===S)return ue($,Gu($,H),Q);ju($,H)}return null}function W($,H,Q,oe){var _e=H!==null?H.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return _e!==null?null:j($,H,""+Q,oe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case h:return Q.key===_e?z($,H,Q,oe):null;case p:return Q.key===_e?G($,H,Q,oe):null;case P:return _e=Q._init,Q=_e(Q._payload),W($,H,Q,oe)}if(fe(Q)||re(Q))return _e!==null?null:se($,H,Q,oe,null);if(typeof Q.then=="function")return W($,H,Cu(Q),oe);if(Q.$$typeof===S)return W($,H,Gu($,Q),oe);ju($,Q)}return null}function te($,H,Q,oe,_e){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return $=$.get(Q)||null,j(H,$,""+oe,_e);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case h:return $=$.get(oe.key===null?Q:oe.key)||null,z(H,$,oe,_e);case p:return $=$.get(oe.key===null?Q:oe.key)||null,G(H,$,oe,_e);case P:var ze=oe._init;return oe=ze(oe._payload),te($,H,Q,oe,_e)}if(fe(oe)||re(oe))return $=$.get(Q)||null,se(H,$,oe,_e,null);if(typeof oe.then=="function")return te($,H,Q,Cu(oe),_e);if(oe.$$typeof===S)return te($,H,Q,Gu(H,oe),_e);ju(H,oe)}return null}function Te($,H,Q,oe){for(var _e=null,ze=null,Ne=H,Re=H=0,Jt=null;Ne!==null&&Re<Q.length;Re++){Ne.index>Re?(Jt=Ne,Ne=null):Jt=Ne.sibling;var Je=W($,Ne,Q[Re],oe);if(Je===null){Ne===null&&(Ne=Jt);break}n&&Ne&&Je.alternate===null&&r($,Ne),H=g(Je,H,Re),ze===null?_e=Je:ze.sibling=Je,ze=Je,Ne=Jt}if(Re===Q.length)return a($,Ne),Ze&&na($,Re),_e;if(Ne===null){for(;Re<Q.length;Re++)Ne=ue($,Q[Re],oe),Ne!==null&&(H=g(Ne,H,Re),ze===null?_e=Ne:ze.sibling=Ne,ze=Ne);return Ze&&na($,Re),_e}for(Ne=c(Ne);Re<Q.length;Re++)Jt=te(Ne,$,Re,Q[Re],oe),Jt!==null&&(n&&Jt.alternate!==null&&Ne.delete(Jt.key===null?Re:Jt.key),H=g(Jt,H,Re),ze===null?_e=Jt:ze.sibling=Jt,ze=Jt);return n&&Ne.forEach(function(fi){return r($,fi)}),Ze&&na($,Re),_e}function Oe($,H,Q,oe){if(Q==null)throw Error(i(151));for(var _e=null,ze=null,Ne=H,Re=H=0,Jt=null,Je=Q.next();Ne!==null&&!Je.done;Re++,Je=Q.next()){Ne.index>Re?(Jt=Ne,Ne=null):Jt=Ne.sibling;var fi=W($,Ne,Je.value,oe);if(fi===null){Ne===null&&(Ne=Jt);break}n&&Ne&&fi.alternate===null&&r($,Ne),H=g(fi,H,Re),ze===null?_e=fi:ze.sibling=fi,ze=fi,Ne=Jt}if(Je.done)return a($,Ne),Ze&&na($,Re),_e;if(Ne===null){for(;!Je.done;Re++,Je=Q.next())Je=ue($,Je.value,oe),Je!==null&&(H=g(Je,H,Re),ze===null?_e=Je:ze.sibling=Je,ze=Je);return Ze&&na($,Re),_e}for(Ne=c(Ne);!Je.done;Re++,Je=Q.next())Je=te(Ne,$,Re,Je.value,oe),Je!==null&&(n&&Je.alternate!==null&&Ne.delete(Je.key===null?Re:Je.key),H=g(Je,H,Re),ze===null?_e=Je:ze.sibling=Je,ze=Je);return n&&Ne.forEach(function(XE){return r($,XE)}),Ze&&na($,Re),_e}function Tt($,H,Q,oe){if(typeof Q=="object"&&Q!==null&&Q.type===m&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case h:e:{for(var _e=Q.key;H!==null;){if(H.key===_e){if(_e=Q.type,_e===m){if(H.tag===7){a($,H.sibling),oe=f(H,Q.props.children),oe.return=$,$=oe;break e}}else if(H.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===P&&Oy(_e)===H.type){a($,H.sibling),oe=f(H,Q.props),Sl(oe,Q),oe.return=$,$=oe;break e}a($,H);break}else r($,H);H=H.sibling}Q.type===m?(oe=fa(Q.props.children,$.mode,oe,Q.key),oe.return=$,$=oe):(oe=Qu(Q.type,Q.key,Q.props,null,$.mode,oe),Sl(oe,Q),oe.return=$,$=oe)}return b($);case p:e:{for(_e=Q.key;H!==null;){if(H.key===_e)if(H.tag===4&&H.stateNode.containerInfo===Q.containerInfo&&H.stateNode.implementation===Q.implementation){a($,H.sibling),oe=f(H,Q.children||[]),oe.return=$,$=oe;break e}else{a($,H);break}else r($,H);H=H.sibling}oe=nm(Q,$.mode,oe),oe.return=$,$=oe}return b($);case P:return _e=Q._init,Q=_e(Q._payload),Tt($,H,Q,oe)}if(fe(Q))return Te($,H,Q,oe);if(re(Q)){if(_e=re(Q),typeof _e!="function")throw Error(i(150));return Q=_e.call(Q),Oe($,H,Q,oe)}if(typeof Q.then=="function")return Tt($,H,Cu(Q),oe);if(Q.$$typeof===S)return Tt($,H,Gu($,Q),oe);ju($,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,H!==null&&H.tag===6?(a($,H.sibling),oe=f(H,Q),oe.return=$,$=oe):(a($,H),oe=tm(Q,$.mode,oe),oe.return=$,$=oe),b($)):a($,H)}return function($,H,Q,oe){try{Nl=0;var _e=Tt($,H,Q,oe);return no=null,_e}catch(Ne){if(Ne===El)throw Ne;var ze=es(29,Ne,null,$.mode);return ze.lanes=oe,ze.return=$,ze}finally{}}}var ra=ky(!0),Py=ky(!1),so=Me(null),Iu=Me(0);function Ly(n,r){n=gr,et(Iu,n),et(so,r),gr=n|r.baseLanes}function lf(){et(Iu,gr),et(so,so.current)}function cf(){gr=Iu.current,ot(so),ot(Iu)}var Xn=Me(null),Ds=null;function Yr(n){var r=n.alternate;et(qt,qt.current&1),et(Xn,n),Ds===null&&(r===null||so.current!==null||r.memoizedState!==null)&&(Ds=n)}function Uy(n){if(n.tag===22){if(et(qt,qt.current),et(Xn,n),Ds===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(Ds=n)}}else Wr()}function Wr(){et(qt,qt.current),et(Xn,Xn.current)}function ar(n){ot(Xn),Ds===n&&(Ds=null),ot(qt)}var qt=Me(0);function Du(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var U2=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(a,c){n.push(c)}};this.abort=function(){r.aborted=!0,n.forEach(function(a){return a()})}},V2=s.unstable_scheduleCallback,z2=s.unstable_NormalPriority,Ht={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uf(){return{controller:new U2,data:new Map,refCount:0}}function Al(n){n.refCount--,n.refCount===0&&V2(z2,function(){n.controller.abort()})}var Rl=null,hf=0,ro=0,io=null;function B2(n,r){if(Rl===null){var a=Rl=[];hf=0,ro=ym(),io={status:"pending",value:void 0,then:function(c){a.push(c)}}}return hf++,r.then(Vy,Vy),r}function Vy(){if(--hf===0&&Rl!==null){io!==null&&(io.status="fulfilled");var n=Rl;Rl=null,ro=0,io=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function q2(n,r){var a=[],c={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),c}var zy=R.S;R.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&B2(n,r),zy!==null&&zy(n,r)};var ia=Me(null);function df(){var n=ia.current;return n!==null?n:ct.pooledCache}function Mu(n,r){r===null?et(ia,ia.current):et(ia,r.pool)}function By(){var n=df();return n===null?null:{parent:Ht._currentValue,pool:n}}var Xr=0,Le=null,it=null,It=null,Ou=!1,ao=!1,aa=!1,ku=0,Cl=0,oo=null,H2=0;function Rt(){throw Error(i(321))}function ff(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Mn(n[a],r[a]))return!1;return!0}function mf(n,r,a,c,f,g){return Xr=g,Le=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,R.H=n===null||n.memoizedState===null?oa:Zr,aa=!1,g=a(c,f),aa=!1,ao&&(g=Hy(r,a,c,f)),qy(n),g}function qy(n){R.H=Ms;var r=it!==null&&it.next!==null;if(Xr=0,It=it=Le=null,Ou=!1,Cl=0,oo=null,r)throw Error(i(300));n===null||Xt||(n=n.dependencies,n!==null&&Fu(n)&&(Xt=!0))}function Hy(n,r,a,c){Le=n;var f=0;do{if(ao&&(oo=null),Cl=0,ao=!1,25<=f)throw Error(i(301));if(f+=1,It=it=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}R.H=la,g=r(a,c)}while(ao);return g}function F2(){var n=R.H,r=n.useState()[0];return r=typeof r.then=="function"?jl(r):r,n=n.useState()[0],(it!==null?it.memoizedState:null)!==n&&(Le.flags|=1024),r}function pf(){var n=ku!==0;return ku=0,n}function gf(n,r,a){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~a}function yf(n){if(Ou){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Ou=!1}Xr=0,It=it=Le=null,ao=!1,Cl=ku=0,oo=null}function An(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Le.memoizedState=It=n:It=It.next=n,It}function Dt(){if(it===null){var n=Le.alternate;n=n!==null?n.memoizedState:null}else n=it.next;var r=It===null?Le.memoizedState:It.next;if(r!==null)It=r,it=n;else{if(n===null)throw Le.alternate===null?Error(i(467)):Error(i(310));it=n,n={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},It===null?Le.memoizedState=It=n:It=It.next=n}return It}var Pu;Pu=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function jl(n){var r=Cl;return Cl+=1,oo===null&&(oo=[]),n=Dy(oo,n,r),r=Le,(It===null?r.memoizedState:It.next)===null&&(r=r.alternate,R.H=r===null||r.memoizedState===null?oa:Zr),n}function Lu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return jl(n);if(n.$$typeof===S)return un(n)}throw Error(i(438,String(n)))}function vf(n){var r=null,a=Le.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=Le.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Pu(),Le.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(n),c=0;c<n;c++)a[c]=F;return r.index++,a}function or(n,r){return typeof r=="function"?r(n):r}function Uu(n){var r=Dt();return xf(r,it,n)}function xf(n,r,a){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=a;var f=n.baseQueue,g=c.pending;if(g!==null){if(f!==null){var b=f.next;f.next=g.next,g.next=b}r.baseQueue=f=g,c.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{r=f.next;var j=b=null,z=null,G=r,se=!1;do{var ue=G.lane&-536870913;if(ue!==G.lane?(Ke&ue)===ue:(Xr&ue)===ue){var W=G.revertLane;if(W===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ue===ro&&(se=!0);else if((Xr&W)===W){G=G.next,W===ro&&(se=!0);continue}else ue={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},z===null?(j=z=ue,b=g):z=z.next=ue,Le.lanes|=W,oi|=W;ue=G.action,aa&&a(g,ue),g=G.hasEagerState?G.eagerState:a(g,ue)}else W={lane:ue,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},z===null?(j=z=W,b=g):z=z.next=W,Le.lanes|=ue,oi|=ue;G=G.next}while(G!==null&&G!==r);if(z===null?b=g:z.next=j,!Mn(g,n.memoizedState)&&(Xt=!0,se&&(a=io,a!==null)))throw a;n.memoizedState=g,n.baseState=b,n.baseQueue=z,c.lastRenderedState=g}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function _f(n){var r=Dt(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,g=r.memoizedState;if(f!==null){a.pending=null;var b=f=f.next;do g=n(g,b.action),b=b.next;while(b!==f);Mn(g,r.memoizedState)||(Xt=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),a.lastRenderedState=g}return[g,c]}function Fy(n,r,a){var c=Le,f=Dt(),g=Ze;if(g){if(a===void 0)throw Error(i(407));a=a()}else a=r();var b=!Mn((it||f).memoizedState,a);if(b&&(f.memoizedState=a,Xt=!0),f=f.queue,Ef(Ky.bind(null,c,f,n),[n]),f.getSnapshot!==r||b||It!==null&&It.memoizedState.tag&1){if(c.flags|=2048,lo(9,$y.bind(null,c,f,a,r),{destroy:void 0},null),ct===null)throw Error(i(349));g||Xr&60||Gy(c,r,a)}return a}function Gy(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=Le.updateQueue,r===null?(r=Pu(),Le.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function $y(n,r,a,c){r.value=a,r.getSnapshot=c,Qy(r)&&Yy(n)}function Ky(n,r,a){return a(function(){Qy(r)&&Yy(n)})}function Qy(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Mn(n,a)}catch{return!0}}function Yy(n){var r=Qr(n,2);r!==null&&bn(r,n,2)}function bf(n){var r=An();if(typeof n=="function"){var a=n;if(n=a(),aa){_s(!0);try{a()}finally{_s(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:n},r}function Wy(n,r,a,c){return n.baseState=a,xf(n,it,typeof c=="function"?c:or)}function G2(n,r,a,c,f){if(Bu(n))throw Error(i(485));if(n=r.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};R.T!==null?a(!0):g.isTransition=!1,c(g),a=r.pending,a===null?(g.next=r.pending=g,Xy(r,g)):(g.next=a.next,r.pending=a.next=g)}}function Xy(n,r){var a=r.action,c=r.payload,f=n.state;if(r.isTransition){var g=R.T,b={};R.T=b;try{var j=a(f,c),z=R.S;z!==null&&z(b,j),Zy(n,r,j)}catch(G){wf(n,r,G)}finally{R.T=g}}else try{g=a(f,c),Zy(n,r,g)}catch(G){wf(n,r,G)}}function Zy(n,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Jy(n,r,c)},function(c){return wf(n,r,c)}):Jy(n,r,a)}function Jy(n,r,a){r.status="fulfilled",r.value=a,e0(r),n.state=a,r=n.pending,r!==null&&(a=r.next,a===r?n.pending=null:(a=a.next,r.next=a,Xy(n,a)))}function wf(n,r,a){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,e0(r),r=r.next;while(r!==c)}n.action=null}function e0(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function t0(n,r){return r}function n0(n,r){if(Ze){var a=ct.formState;if(a!==null){e:{var c=Le;if(Ze){if(nn){t:{for(var f=nn,g=Is;f.nodeType!==8;){if(!g){f=null;break t}if(f=hs(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){nn=hs(f.nextSibling),c=f.data==="F!";break e}}sa(c)}c=!1}c&&(r=a[0])}}return a=An(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t0,lastRenderedState:r},a.queue=c,a=_0.bind(null,Le,c),c.dispatch=a,c=bf(!1),g=Rf.bind(null,Le,!1,c.queue),c=An(),f={state:r,dispatch:null,action:n,pending:null},c.queue=f,a=G2.bind(null,Le,f,g,a),f.dispatch=a,c.memoizedState=n,[r,a,!1]}function s0(n){var r=Dt();return r0(r,it,n)}function r0(n,r,a){r=xf(n,r,t0)[0],n=Uu(or)[0],r=typeof r=="object"&&r!==null&&typeof r.then=="function"?jl(r):r;var c=Dt(),f=c.queue,g=f.dispatch;return a!==c.memoizedState&&(Le.flags|=2048,lo(9,$2.bind(null,f,a),{destroy:void 0},null)),[r,g,n]}function $2(n,r){n.action=r}function i0(n){var r=Dt(),a=it;if(a!==null)return r0(r,a,n);Dt(),r=r.memoizedState,a=Dt();var c=a.queue.dispatch;return a.memoizedState=n,[r,c,!1]}function lo(n,r,a,c){return n={tag:n,create:r,inst:a,deps:c,next:null},r=Le.updateQueue,r===null&&(r=Pu(),Le.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n),n}function a0(){return Dt().memoizedState}function Vu(n,r,a,c){var f=An();Le.flags|=n,f.memoizedState=lo(1|r,a,{destroy:void 0},c===void 0?null:c)}function zu(n,r,a,c){var f=Dt();c=c===void 0?null:c;var g=f.memoizedState.inst;it!==null&&c!==null&&ff(c,it.memoizedState.deps)?f.memoizedState=lo(r,a,g,c):(Le.flags|=n,f.memoizedState=lo(1|r,a,g,c))}function o0(n,r){Vu(8390656,8,n,r)}function Ef(n,r){zu(2048,8,n,r)}function l0(n,r){return zu(4,2,n,r)}function c0(n,r){return zu(4,4,n,r)}function u0(n,r){if(typeof r=="function"){n=n();var a=r(n);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function h0(n,r,a){a=a!=null?a.concat([n]):null,zu(4,4,u0.bind(null,r,n),a)}function Tf(){}function d0(n,r){var a=Dt();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&ff(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function f0(n,r){var a=Dt();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&ff(r,c[1]))return c[0];if(c=n(),aa){_s(!0);try{n()}finally{_s(!1)}}return a.memoizedState=[c,r],c}function Nf(n,r,a){return a===void 0||Xr&1073741824?n.memoizedState=r:(n.memoizedState=a,n=pv(),Le.lanes|=n,oi|=n,a)}function m0(n,r,a,c){return Mn(a,r)?a:so.current!==null?(n=Nf(n,a,c),Mn(n,r)||(Xt=!0),n):Xr&42?(n=pv(),Le.lanes|=n,oi|=n,r):(Xt=!0,n.memoizedState=a)}function p0(n,r,a,c,f){var g=me.p;me.p=g!==0&&8>g?g:8;var b=R.T,j={};R.T=j,Rf(n,!1,r,a);try{var z=f(),G=R.S;if(G!==null&&G(j,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var se=q2(z,c);Il(n,r,se,Ln(n))}else Il(n,r,c,Ln(n))}catch(ue){Il(n,r,{then:function(){},status:"rejected",reason:ue},Ln())}finally{me.p=g,R.T=b}}function K2(){}function Sf(n,r,a,c){if(n.tag!==5)throw Error(i(476));var f=g0(n).queue;p0(n,f,r,Ie,a===null?K2:function(){return y0(n),a(c)})}function g0(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Ie,baseState:Ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:Ie},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:a},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function y0(n){var r=g0(n).next.queue;Il(n,r,{},Ln())}function Af(){return un(Xl)}function v0(){return Dt().memoizedState}function x0(){return Dt().memoizedState}function Q2(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var a=Ln();n=ti(a);var c=ni(r,n,a);c!==null&&(bn(c,r,a),Ol(c,r,a)),r={cache:uf()},n.payload=r;return}r=r.return}}function Y2(n,r,a){var c=Ln();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Bu(n)?b0(r,a):(a=nf(n,r,a,c),a!==null&&(bn(a,n,c),w0(a,r,c)))}function _0(n,r,a){var c=Ln();Il(n,r,a,c)}function Il(n,r,a,c){var f={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Bu(n))b0(r,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var b=r.lastRenderedState,j=g(b,a);if(f.hasEagerState=!0,f.eagerState=j,Mn(j,b))return Tu(n,r,f,0),ct===null&&Eu(),!1}catch{}finally{}if(a=nf(n,r,f,c),a!==null)return bn(a,n,c),w0(a,r,c),!0}return!1}function Rf(n,r,a,c){if(c={lane:2,revertLane:ym(),action:c,hasEagerState:!1,eagerState:null,next:null},Bu(n)){if(r)throw Error(i(479))}else r=nf(n,a,c,2),r!==null&&bn(r,n,2)}function Bu(n){var r=n.alternate;return n===Le||r!==null&&r===Le}function b0(n,r){ao=Ou=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function w0(n,r,a){if(a&4194176){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Ur(n,a)}}var Ms={readContext:un,use:Lu,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt};Ms.useCacheRefresh=Rt,Ms.useMemoCache=Rt,Ms.useHostTransitionStatus=Rt,Ms.useFormState=Rt,Ms.useActionState=Rt,Ms.useOptimistic=Rt;var oa={readContext:un,use:Lu,useCallback:function(n,r){return An().memoizedState=[n,r===void 0?null:r],n},useContext:un,useEffect:o0,useImperativeHandle:function(n,r,a){a=a!=null?a.concat([n]):null,Vu(4194308,4,u0.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Vu(4194308,4,n,r)},useInsertionEffect:function(n,r){Vu(4,2,n,r)},useMemo:function(n,r){var a=An();r=r===void 0?null:r;var c=n();if(aa){_s(!0);try{n()}finally{_s(!1)}}return a.memoizedState=[c,r],c},useReducer:function(n,r,a){var c=An();if(a!==void 0){var f=a(r);if(aa){_s(!0);try{a(r)}finally{_s(!1)}}}else f=r;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=Y2.bind(null,Le,n),[c.memoizedState,n]},useRef:function(n){var r=An();return n={current:n},r.memoizedState=n},useState:function(n){n=bf(n);var r=n.queue,a=_0.bind(null,Le,r);return r.dispatch=a,[n.memoizedState,a]},useDebugValue:Tf,useDeferredValue:function(n,r){var a=An();return Nf(a,n,r)},useTransition:function(){var n=bf(!1);return n=p0.bind(null,Le,n.queue,!0,!1),An().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,a){var c=Le,f=An();if(Ze){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),ct===null)throw Error(i(349));Ke&60||Gy(c,r,a)}f.memoizedState=a;var g={value:a,getSnapshot:r};return f.queue=g,o0(Ky.bind(null,c,g,n),[n]),c.flags|=2048,lo(9,$y.bind(null,c,g,a,r),{destroy:void 0},null),a},useId:function(){var n=An(),r=ct.identifierPrefix;if(Ze){var a=ir,c=rr;a=(c&~(1<<32-yn(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=ku++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=H2++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},useCacheRefresh:function(){return An().memoizedState=Q2.bind(null,Le)}};oa.useMemoCache=vf,oa.useHostTransitionStatus=Af,oa.useFormState=n0,oa.useActionState=n0,oa.useOptimistic=function(n){var r=An();r.memoizedState=r.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Rf.bind(null,Le,!0,a),a.dispatch=r,[n,r]};var Zr={readContext:un,use:Lu,useCallback:d0,useContext:un,useEffect:Ef,useImperativeHandle:h0,useInsertionEffect:l0,useLayoutEffect:c0,useMemo:f0,useReducer:Uu,useRef:a0,useState:function(){return Uu(or)},useDebugValue:Tf,useDeferredValue:function(n,r){var a=Dt();return m0(a,it.memoizedState,n,r)},useTransition:function(){var n=Uu(or)[0],r=Dt().memoizedState;return[typeof n=="boolean"?n:jl(n),r]},useSyncExternalStore:Fy,useId:v0};Zr.useCacheRefresh=x0,Zr.useMemoCache=vf,Zr.useHostTransitionStatus=Af,Zr.useFormState=s0,Zr.useActionState=s0,Zr.useOptimistic=function(n,r){var a=Dt();return Wy(a,it,n,r)};var la={readContext:un,use:Lu,useCallback:d0,useContext:un,useEffect:Ef,useImperativeHandle:h0,useInsertionEffect:l0,useLayoutEffect:c0,useMemo:f0,useReducer:_f,useRef:a0,useState:function(){return _f(or)},useDebugValue:Tf,useDeferredValue:function(n,r){var a=Dt();return it===null?Nf(a,n,r):m0(a,it.memoizedState,n,r)},useTransition:function(){var n=_f(or)[0],r=Dt().memoizedState;return[typeof n=="boolean"?n:jl(n),r]},useSyncExternalStore:Fy,useId:v0};la.useCacheRefresh=x0,la.useMemoCache=vf,la.useHostTransitionStatus=Af,la.useFormState=i0,la.useActionState=i0,la.useOptimistic=function(n,r){var a=Dt();return it!==null?Wy(a,it,n,r):(a.baseState=n,[n,a.queue.dispatch])};function Cf(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:M({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var jf={isMounted:function(n){return(n=n._reactInternals)?ne(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=Ln(),f=ti(c);f.payload=r,a!=null&&(f.callback=a),r=ni(n,f,c),r!==null&&(bn(r,n,c),Ol(r,n,c))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=Ln(),f=ti(c);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=ni(n,f,c),r!==null&&(bn(r,n,c),Ol(r,n,c))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Ln(),c=ti(a);c.tag=2,r!=null&&(c.callback=r),r=ni(n,c,a),r!==null&&(bn(r,n,a),Ol(r,n,a))}};function E0(n,r,a,c,f,g,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,b):r.prototype&&r.prototype.isPureReactComponent?!vl(a,c)||!vl(f,g):!0}function T0(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&jf.enqueueReplaceState(r,r.state,null)}function ca(n,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(n=n.defaultProps){a===r&&(a=M({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var qu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function N0(n){qu(n)}function S0(n){console.error(n)}function A0(n){qu(n)}function Hu(n,r){try{var a=n.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function R0(n,r,a){try{var c=n.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function If(n,r,a){return a=ti(a),a.tag=3,a.payload={element:null},a.callback=function(){Hu(n,r)},a}function C0(n){return n=ti(n),n.tag=3,n}function j0(n,r,a,c){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var g=c.value;n.payload=function(){return f(g)},n.callback=function(){R0(r,a,c)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){R0(r,a,c),typeof f!="function"&&(li===null?li=new Set([this]):li.add(this));var j=c.stack;this.componentDidCatch(c.value,{componentStack:j!==null?j:""})})}function W2(n,r,a,c,f){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&Ml(r,a,f,!0),a=Xn.current,a!==null){switch(a.tag){case 13:return Ds===null?dm():a.alternate===null&&Et===0&&(Et=3),a.flags&=-257,a.flags|=65536,a.lanes=f,c===of?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),mm(n,c,f)),!1;case 22:return a.flags|=65536,c===of?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),mm(n,c,f)),!1}throw Error(i(435,a.tag))}return mm(n,c,f),dm(),!1}if(Ze)return r=Xn.current,r!==null?(!(r.flags&65536)&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==af&&(n=Error(i(422),{cause:c}),wl(Qn(n,a)))):(c!==af&&(r=Error(i(423),{cause:c}),wl(Qn(r,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Qn(c,a),f=If(n.stateNode,c,f),$f(n,f),Et!==4&&(Et=2)),!1;var g=Error(i(520),{cause:c});if(g=Qn(g,a),ql===null?ql=[g]:ql.push(g),Et!==4&&(Et=2),r===null)return!0;c=Qn(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=If(a.stateNode,c,n),$f(a,n),!1;case 1:if(r=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(li===null||!li.has(g))))return a.flags|=65536,f&=-f,a.lanes|=f,f=C0(f),j0(f,n,a,c),$f(a,f),!1}a=a.return}while(a!==null);return!1}var I0=Error(i(461)),Xt=!1;function sn(n,r,a,c){r.child=n===null?Py(r,null,a,c):ra(r,n.child,a,c)}function D0(n,r,a,c,f){a=a.render;var g=r.ref;if("ref"in c){var b={};for(var j in c)j!=="ref"&&(b[j]=c[j])}else b=c;return ha(r),c=mf(n,r,a,b,g,f),j=pf(),n!==null&&!Xt?(gf(n,r,f),lr(n,r,f)):(Ze&&j&&sf(r),r.flags|=1,sn(n,r,c,f),r.child)}function M0(n,r,a,c,f){if(n===null){var g=a.type;return typeof g=="function"&&!em(g)&&g.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=g,O0(n,r,g,c,f)):(n=Qu(a.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(g=n.child,!zf(n,f)){var b=g.memoizedProps;if(a=a.compare,a=a!==null?a:vl,a(b,c)&&n.ref===r.ref)return lr(n,r,f)}return r.flags|=1,n=ai(g,c),n.ref=r.ref,n.return=r,r.child=n}function O0(n,r,a,c,f){if(n!==null){var g=n.memoizedProps;if(vl(g,c)&&n.ref===r.ref)if(Xt=!1,r.pendingProps=c=g,zf(n,f))n.flags&131072&&(Xt=!0);else return r.lanes=n.lanes,lr(n,r,f)}return Df(n,r,a,c,f)}function k0(n,r,a){var c=r.pendingProps,f=c.children,g=(r.stateNode._pendingVisibility&2)!==0,b=n!==null?n.memoizedState:null;if(Dl(n,r),c.mode==="hidden"||g){if(r.flags&128){if(c=b!==null?b.baseLanes|a:a,n!==null){for(f=r.child=n.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;r.childLanes=g&~c}else r.childLanes=0,r.child=null;return P0(n,r,c,a)}if(a&536870912)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&Mu(r,b!==null?b.cachePool:null),b!==null?Ly(r,b):lf(),Uy(r);else return r.lanes=r.childLanes=536870912,P0(n,r,b!==null?b.baseLanes|a:a,a)}else b!==null?(Mu(r,b.cachePool),Ly(r,b),Wr(),r.memoizedState=null):(n!==null&&Mu(r,null),lf(),Wr());return sn(n,r,f,a),r.child}function P0(n,r,a,c){var f=df();return f=f===null?null:{parent:Ht._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},n!==null&&Mu(r,null),lf(),Uy(r),n!==null&&Ml(n,r,c,!0),null}function Dl(n,r){var a=r.ref;if(a===null)n!==null&&n.ref!==null&&(r.flags|=2097664);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(n===null||n.ref!==a)&&(r.flags|=2097664)}}function Df(n,r,a,c,f){return ha(r),a=mf(n,r,a,c,void 0,f),c=pf(),n!==null&&!Xt?(gf(n,r,f),lr(n,r,f)):(Ze&&c&&sf(r),r.flags|=1,sn(n,r,a,f),r.child)}function L0(n,r,a,c,f,g){return ha(r),r.updateQueue=null,a=Hy(r,c,a,f),qy(n),c=pf(),n!==null&&!Xt?(gf(n,r,g),lr(n,r,g)):(Ze&&c&&sf(r),r.flags|=1,sn(n,r,a,g),r.child)}function U0(n,r,a,c,f){if(ha(r),r.stateNode===null){var g=Ja,b=a.contextType;typeof b=="object"&&b!==null&&(g=un(b)),g=new a(c,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=jf,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=c,g.state=r.memoizedState,g.refs={},Ff(r),b=a.contextType,g.context=typeof b=="object"&&b!==null?un(b):Ja,g.state=r.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Cf(r,a,b,c),g.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&jf.enqueueReplaceState(g,g.state,null),Pl(r,c,g,f),kl(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(n===null){g=r.stateNode;var j=r.memoizedProps,z=ca(a,j);g.props=z;var G=g.context,se=a.contextType;b=Ja,typeof se=="object"&&se!==null&&(b=un(se));var ue=a.getDerivedStateFromProps;se=typeof ue=="function"||typeof g.getSnapshotBeforeUpdate=="function",j=r.pendingProps!==j,se||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(j||G!==b)&&T0(r,g,c,b),ei=!1;var W=r.memoizedState;g.state=W,Pl(r,c,g,f),kl(),G=r.memoizedState,j||W!==G||ei?(typeof ue=="function"&&(Cf(r,a,ue,c),G=r.memoizedState),(z=ei||E0(r,a,z,c,W,G,b))?(se||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=G),g.props=c,g.state=G,g.context=b,c=z):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{g=r.stateNode,Gf(n,r),b=r.memoizedProps,se=ca(a,b),g.props=se,ue=r.pendingProps,W=g.context,G=a.contextType,z=Ja,typeof G=="object"&&G!==null&&(z=un(G)),j=a.getDerivedStateFromProps,(G=typeof j=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==ue||W!==z)&&T0(r,g,c,z),ei=!1,W=r.memoizedState,g.state=W,Pl(r,c,g,f),kl();var te=r.memoizedState;b!==ue||W!==te||ei||n!==null&&n.dependencies!==null&&Fu(n.dependencies)?(typeof j=="function"&&(Cf(r,a,j,c),te=r.memoizedState),(se=ei||E0(r,a,se,c,W,te,z)||n!==null&&n.dependencies!==null&&Fu(n.dependencies))?(G||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,te,z),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,te,z)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===n.memoizedProps&&W===n.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&W===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=te),g.props=c,g.state=te,g.context=z,c=se):(typeof g.componentDidUpdate!="function"||b===n.memoizedProps&&W===n.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&W===n.memoizedState||(r.flags|=1024),c=!1)}return g=c,Dl(n,r),c=(r.flags&128)!==0,g||c?(g=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,n!==null&&c?(r.child=ra(r,n.child,null,f),r.child=ra(r,null,a,f)):sn(n,r,a,f),r.memoizedState=g.state,n=r.child):n=lr(n,r,f),n}function V0(n,r,a,c){return bl(),r.flags|=256,sn(n,r,a,c),r.child}var Mf={dehydrated:null,treeContext:null,retryLane:0};function Of(n){return{baseLanes:n,cachePool:By()}}function kf(n,r,a){return n=n!==null?n.childLanes&~a:0,r&&(n|=ts),n}function z0(n,r,a){var c=r.pendingProps,f=!1,g=(r.flags&128)!==0,b;if((b=g)||(b=n!==null&&n.memoizedState===null?!1:(qt.current&2)!==0),b&&(f=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,n===null){if(Ze){if(f?Yr(r):Wr(),Ze){var j=nn,z;if(z=j){e:{for(z=j,j=Is;z.nodeType!==8;){if(!j){j=null;break e}if(z=hs(z.nextSibling),z===null){j=null;break e}}j=z}j!==null?(r.memoizedState={dehydrated:j,treeContext:ta!==null?{id:rr,overflow:ir}:null,retryLane:536870912},z=es(18,null,null,0),z.stateNode=j,z.return=r,r.child=z,_n=r,nn=null,z=!0):z=!1}z||sa(r)}if(j=r.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return j.data==="$!"?r.lanes=16:r.lanes=536870912,null;ar(r)}return j=c.children,c=c.fallback,f?(Wr(),f=r.mode,j=Lf({mode:"hidden",children:j},f),c=fa(c,f,a,null),j.return=r,c.return=r,j.sibling=c,r.child=j,f=r.child,f.memoizedState=Of(a),f.childLanes=kf(n,b,a),r.memoizedState=Mf,c):(Yr(r),Pf(r,j))}if(z=n.memoizedState,z!==null&&(j=z.dehydrated,j!==null)){if(g)r.flags&256?(Yr(r),r.flags&=-257,r=Uf(n,r,a)):r.memoizedState!==null?(Wr(),r.child=n.child,r.flags|=128,r=null):(Wr(),f=c.fallback,j=r.mode,c=Lf({mode:"visible",children:c.children},j),f=fa(f,j,a,null),f.flags|=2,c.return=r,f.return=r,c.sibling=f,r.child=c,ra(r,n.child,null,a),c=r.child,c.memoizedState=Of(a),c.childLanes=kf(n,b,a),r.memoizedState=Mf,r=f);else if(Yr(r),j.data==="$!"){if(b=j.nextSibling&&j.nextSibling.dataset,b)var G=b.dgst;b=G,c=Error(i(419)),c.stack="",c.digest=b,wl({value:c,source:null,stack:null}),r=Uf(n,r,a)}else if(Xt||Ml(n,r,a,!1),b=(a&n.childLanes)!==0,Xt||b){if(b=ct,b!==null){if(c=a&-a,c&42)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=c&(b.suspendedLanes|a)?0:c,c!==0&&c!==z.retryLane)throw z.retryLane=c,Qr(n,c),bn(b,n,c),I0}j.data==="$?"||dm(),r=Uf(n,r,a)}else j.data==="$?"?(r.flags|=128,r.child=n.child,r=hE.bind(null,n),j._reactRetry=r,r=null):(n=z.treeContext,nn=hs(j.nextSibling),_n=r,Ze=!0,cs=null,Is=!1,n!==null&&(Yn[Wn++]=rr,Yn[Wn++]=ir,Yn[Wn++]=ta,rr=n.id,ir=n.overflow,ta=r),r=Pf(r,c.children),r.flags|=4096);return r}return f?(Wr(),f=c.fallback,j=r.mode,z=n.child,G=z.sibling,c=ai(z,{mode:"hidden",children:c.children}),c.subtreeFlags=z.subtreeFlags&31457280,G!==null?f=ai(G,f):(f=fa(f,j,a,null),f.flags|=2),f.return=r,c.return=r,c.sibling=f,r.child=c,c=f,f=r.child,j=n.child.memoizedState,j===null?j=Of(a):(z=j.cachePool,z!==null?(G=Ht._currentValue,z=z.parent!==G?{parent:G,pool:G}:z):z=By(),j={baseLanes:j.baseLanes|a,cachePool:z}),f.memoizedState=j,f.childLanes=kf(n,b,a),r.memoizedState=Mf,c):(Yr(r),a=n.child,n=a.sibling,a=ai(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,n!==null&&(b=r.deletions,b===null?(r.deletions=[n],r.flags|=16):b.push(n)),r.child=a,r.memoizedState=null,a)}function Pf(n,r){return r=Lf({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Lf(n,r){return dv(n,r,0,null)}function Uf(n,r,a){return ra(r,n.child,null,a),n=Pf(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function B0(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),qf(n.return,r,a)}function Vf(n,r,a,c,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=f)}function q0(n,r,a){var c=r.pendingProps,f=c.revealOrder,g=c.tail;if(sn(n,r,c.children,a),c=qt.current,c&2)c=c&1|2,r.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&B0(n,a,r);else if(n.tag===19)B0(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(et(qt,c),f){case"forwards":for(a=r.child,f=null;a!==null;)n=a.alternate,n!==null&&Du(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),Vf(r,!1,f,a,g);break;case"backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&Du(n)===null){r.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Vf(r,!0,a,null,g);break;case"together":Vf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function lr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),oi|=r.lanes,!(a&r.childLanes))if(n!==null){if(Ml(n,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,a=ai(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=ai(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function zf(n,r){return n.lanes&r?!0:(n=n.dependencies,!!(n!==null&&Fu(n)))}function X2(n,r,a){switch(r.tag){case 3:Dr(r,r.stateNode.containerInfo),Jr(r,Ht,n.memoizedState.cache),bl();break;case 27:case 5:Xo(r);break;case 4:Dr(r,r.stateNode.containerInfo);break;case 10:Jr(r,r.type,r.memoizedProps.value);break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Yr(r),r.flags|=128,null):a&r.child.childLanes?z0(n,r,a):(Yr(r),n=lr(n,r,a),n!==null?n.sibling:null);Yr(r);break;case 19:var f=(n.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(Ml(n,r,a,!1),c=(a&r.childLanes)!==0),f){if(c)return q0(n,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),et(qt,qt.current),c)break;return null;case 22:case 23:return r.lanes=0,k0(n,r,a);case 24:Jr(r,Ht,n.memoizedState.cache)}return lr(n,r,a)}function H0(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps)Xt=!0;else{if(!zf(n,a)&&!(r.flags&128))return Xt=!1,X2(n,r,a);Xt=!!(n.flags&131072)}else Xt=!1,Ze&&r.flags&1048576&&Ay(r,Au,r.index);switch(r.lanes=0,r.tag){case 16:e:{n=r.pendingProps;var c=r.elementType,f=c._init;if(c=f(c._payload),r.type=c,typeof c=="function")em(c)?(n=ca(c,n),r.tag=1,r=U0(null,r,c,n,a)):(r.tag=0,r=Df(null,r,c,n,a));else{if(c!=null){if(f=c.$$typeof,f===A){r.tag=11,r=D0(null,r,c,n,a);break e}else if(f===V){r.tag=14,r=M0(null,r,c,n,a);break e}}throw r=E(c)||c,Error(i(306,r,""))}}return r;case 0:return Df(n,r,r.type,r.pendingProps,a);case 1:return c=r.type,f=ca(c,r.pendingProps),U0(n,r,c,f,a);case 3:e:{if(Dr(r,r.stateNode.containerInfo),n===null)throw Error(i(387));var g=r.pendingProps;f=r.memoizedState,c=f.element,Gf(n,r),Pl(r,g,null,a);var b=r.memoizedState;if(g=b.cache,Jr(r,Ht,g),g!==f.cache&&Hf(r,[Ht],a,!0),kl(),g=b.element,f.isDehydrated)if(f={element:g,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=V0(n,r,g,a);break e}else if(g!==c){c=Qn(Error(i(424)),r),wl(c),r=V0(n,r,g,a);break e}else for(nn=hs(r.stateNode.containerInfo.firstChild),_n=r,Ze=!0,cs=null,Is=!0,a=Py(r,null,g,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(bl(),g===c){r=lr(n,r,a);break e}sn(n,r,g,a)}r=r.child}return r;case 26:return Dl(n,r),n===null?(a=$v(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ze||(a=r.type,n=r.pendingProps,c=ah(zn.current).createElement(a),c[Qt]=r,c[Vt]=n,rn(c,a,n),yt(c),r.stateNode=c):r.memoizedState=$v(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Xo(r),n===null&&Ze&&(c=r.stateNode=Hv(r.type,r.pendingProps,zn.current),_n=r,Is=!0,nn=hs(c.firstChild)),c=r.pendingProps.children,n!==null||Ze?sn(n,r,c,a):r.child=ra(r,null,c,a),Dl(n,r),r.child;case 5:return n===null&&Ze&&((f=c=nn)&&(c=AE(c,r.type,r.pendingProps,Is),c!==null?(r.stateNode=c,_n=r,nn=hs(c.firstChild),Is=!1,f=!0):f=!1),f||sa(r)),Xo(r),f=r.type,g=r.pendingProps,b=n!==null?n.memoizedProps:null,c=g.children,Sm(f,g)?c=null:b!==null&&Sm(f,b)&&(r.flags|=32),r.memoizedState!==null&&(f=mf(n,r,F2,null,null,a),Xl._currentValue=f),Dl(n,r),sn(n,r,c,a),r.child;case 6:return n===null&&Ze&&((n=a=nn)&&(a=RE(a,r.pendingProps,Is),a!==null?(r.stateNode=a,_n=r,nn=null,n=!0):n=!1),n||sa(r)),null;case 13:return z0(n,r,a);case 4:return Dr(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=ra(r,null,c,a):sn(n,r,c,a),r.child;case 11:return D0(n,r,r.type,r.pendingProps,a);case 7:return sn(n,r,r.pendingProps,a),r.child;case 8:return sn(n,r,r.pendingProps.children,a),r.child;case 12:return sn(n,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,Jr(r,r.type,c.value),sn(n,r,c.children,a),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,ha(r),f=un(f),c=c(f),r.flags|=1,sn(n,r,c,a),r.child;case 14:return M0(n,r,r.type,r.pendingProps,a);case 15:return O0(n,r,r.type,r.pendingProps,a);case 19:return q0(n,r,a);case 22:return k0(n,r,a);case 24:return ha(r),c=un(Ht),n===null?(f=df(),f===null&&(f=ct,g=uf(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=a),f=g),r.memoizedState={parent:c,cache:f},Ff(r),Jr(r,Ht,f)):(n.lanes&a&&(Gf(n,r),Pl(r,null,null,a),kl()),f=n.memoizedState,g=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Jr(r,Ht,c)):(c=g.cache,Jr(r,Ht,c),c!==f.cache&&Hf(r,[Ht],a,!0))),sn(n,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}var Bf=Me(null),ua=null,cr=null;function Jr(n,r,a){et(Bf,r._currentValue),r._currentValue=a}function ur(n){n._currentValue=Bf.current,ot(Bf)}function qf(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function Hf(n,r,a,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var b=f.child;g=g.firstContext;e:for(;g!==null;){var j=g;g=f;for(var z=0;z<r.length;z++)if(j.context===r[z]){g.lanes|=a,j=g.alternate,j!==null&&(j.lanes|=a),qf(g.return,a,n),c||(b=null);break e}g=j.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(i(341));b.lanes|=a,g=b.alternate,g!==null&&(g.lanes|=a),qf(b,a,n),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===n){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function Ml(n,r,a,c){n=null;for(var f=r,g=!1;f!==null;){if(!g){if(f.flags&524288)g=!0;else if(f.flags&262144)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var j=f.type;Mn(f.pendingProps.value,b.value)||(n!==null?n.push(j):n=[j])}}else if(f===Ir.current){if(b=f.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Xl):n=[Xl])}f=f.return}n!==null&&Hf(r,n,a,c),r.flags|=262144}function Fu(n){for(n=n.firstContext;n!==null;){if(!Mn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ha(n){ua=n,cr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function un(n){return F0(ua,n)}function Gu(n,r){return ua===null&&ha(n),F0(n,r)}function F0(n,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},cr===null){if(n===null)throw Error(i(308));cr=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else cr=cr.next=r;return a}var ei=!1;function Ff(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gf(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ti(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ni(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,xt&2){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=Nu(n),Ny(n,null,a),r}return Tu(n,c,r,a),Nu(n)}function Ol(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194176)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Ur(n,a)}}function $f(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?f=g=b:g=g.next=b,a=a.next}while(a!==null);g===null?f=g=r:g=g.next=r}else f=g=r;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}var Kf=!1;function kl(){if(Kf){var n=io;if(n!==null)throw n}}function Pl(n,r,a,c){Kf=!1;var f=n.updateQueue;ei=!1;var g=f.firstBaseUpdate,b=f.lastBaseUpdate,j=f.shared.pending;if(j!==null){f.shared.pending=null;var z=j,G=z.next;z.next=null,b===null?g=G:b.next=G,b=z;var se=n.alternate;se!==null&&(se=se.updateQueue,j=se.lastBaseUpdate,j!==b&&(j===null?se.firstBaseUpdate=G:j.next=G,se.lastBaseUpdate=z))}if(g!==null){var ue=f.baseState;b=0,se=G=z=null,j=g;do{var W=j.lane&-536870913,te=W!==j.lane;if(te?(Ke&W)===W:(c&W)===W){W!==0&&W===ro&&(Kf=!0),se!==null&&(se=se.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Te=n,Oe=j;W=r;var Tt=a;switch(Oe.tag){case 1:if(Te=Oe.payload,typeof Te=="function"){ue=Te.call(Tt,ue,W);break e}ue=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Oe.payload,W=typeof Te=="function"?Te.call(Tt,ue,W):Te,W==null)break e;ue=M({},ue,W);break e;case 2:ei=!0}}W=j.callback,W!==null&&(n.flags|=64,te&&(n.flags|=8192),te=f.callbacks,te===null?f.callbacks=[W]:te.push(W))}else te={lane:W,tag:j.tag,payload:j.payload,callback:j.callback,next:null},se===null?(G=se=te,z=ue):se=se.next=te,b|=W;if(j=j.next,j===null){if(j=f.shared.pending,j===null)break;te=j,j=te.next,te.next=null,f.lastBaseUpdate=te,f.shared.pending=null}}while(!0);se===null&&(z=ue),f.baseState=z,f.firstBaseUpdate=G,f.lastBaseUpdate=se,g===null&&(f.shared.lanes=0),oi|=b,n.lanes=b,n.memoizedState=ue}}function G0(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function $0(n,r){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)G0(a[n],r)}function Ll(n,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&n)===n){c=void 0;var g=a.create,b=a.inst;c=g(),b.destroy=c}a=a.next}while(a!==f)}}catch(j){lt(r,r.return,j)}}function si(n,r,a){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&n)===n){var b=c.inst,j=b.destroy;if(j!==void 0){b.destroy=void 0,f=r;var z=a;try{j()}catch(G){lt(f,z,G)}}}c=c.next}while(c!==g)}}catch(G){lt(r,r.return,G)}}function K0(n){var r=n.updateQueue;if(r!==null){var a=n.stateNode;try{$0(r,a)}catch(c){lt(n,n.return,c)}}}function Q0(n,r,a){a.props=ca(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(c){lt(n,r,c)}}function da(n,r){try{var a=n.ref;if(a!==null){var c=n.stateNode;switch(n.tag){case 26:case 27:case 5:var f=c;break;default:f=c}typeof a=="function"?n.refCleanup=a(f):a.current=f}}catch(g){lt(n,r,g)}}function On(n,r){var a=n.ref,c=n.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(f){lt(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){lt(n,r,f)}else a.current=null}function Y0(n){var r=n.type,a=n.memoizedProps,c=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(f){lt(n,n.return,f)}}function W0(n,r,a){try{var c=n.stateNode;wE(c,n.type,a,r),c[Vt]=r}catch(f){lt(n,n.return,f)}}function X0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function Qf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||X0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Yf(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=ih));else if(c!==4&&c!==27&&(n=n.child,n!==null))for(Yf(n,r,a),n=n.sibling;n!==null;)Yf(n,r,a),n=n.sibling}function $u(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&c!==27&&(n=n.child,n!==null))for($u(n,r,a),n=n.sibling;n!==null;)$u(n,r,a),n=n.sibling}var hr=!1,wt=!1,Wf=!1,Z0=typeof WeakSet=="function"?WeakSet:Set,Zt=null,J0=!1;function Z2(n,r){if(n=n.containerInfo,Tm=dh,n=gy(n),Xd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var b=0,j=-1,z=-1,G=0,se=0,ue=n,W=null;t:for(;;){for(var te;ue!==a||f!==0&&ue.nodeType!==3||(j=b+f),ue!==g||c!==0&&ue.nodeType!==3||(z=b+c),ue.nodeType===3&&(b+=ue.nodeValue.length),(te=ue.firstChild)!==null;)W=ue,ue=te;for(;;){if(ue===n)break t;if(W===a&&++G===f&&(j=b),W===g&&++se===c&&(z=b),(te=ue.nextSibling)!==null)break;ue=W,W=ue.parentNode}ue=te}a=j===-1||z===-1?null:{start:j,end:z}}else a=null}a=a||{start:0,end:0}}else a=null;for(Nm={focusedElem:n,selectionRange:a},dh=!1,Zt=r;Zt!==null;)if(r=Zt,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Zt=n;else for(;Zt!==null;){switch(r=Zt,g=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if(n&1024&&g!==null){n=void 0,a=r,f=g.memoizedProps,g=g.memoizedState,c=a.stateNode;try{var Te=ca(a.type,f,a.elementType===a.type);n=c.getSnapshotBeforeUpdate(Te,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(Oe){lt(a,a.return,Oe)}}break;case 3:if(n&1024){if(n=r.stateNode.containerInfo,a=n.nodeType,a===9)Cm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Cm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(n&1024)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,Zt=n;break}Zt=r.return}return Te=J0,J0=!1,Te}function ev(n,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:fr(n,a),c&4&&Ll(5,a);break;case 1:if(fr(n,a),c&4)if(n=a.stateNode,r===null)try{n.componentDidMount()}catch(j){lt(a,a.return,j)}else{var f=ca(a.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(j){lt(a,a.return,j)}}c&64&&K0(a),c&512&&da(a,a.return);break;case 3:if(fr(n,a),c&64&&(c=a.updateQueue,c!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{$0(c,n)}catch(j){lt(a,a.return,j)}}break;case 26:fr(n,a),c&512&&da(a,a.return);break;case 27:case 5:fr(n,a),r===null&&c&4&&Y0(a),c&512&&da(a,a.return);break;case 12:fr(n,a);break;case 13:fr(n,a),c&4&&sv(n,a);break;case 22:if(f=a.memoizedState!==null||hr,!f){r=r!==null&&r.memoizedState!==null||wt;var g=hr,b=wt;hr=f,(wt=r)&&!b?ri(n,a,(a.subtreeFlags&8772)!==0):fr(n,a),hr=g,wt=b}c&512&&(a.memoizedProps.mode==="manual"?da(a,a.return):On(a,a.return));break;default:fr(n,a)}}function tv(n){var r=n.alternate;r!==null&&(n.alternate=null,tv(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&qi(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Mt=null,kn=!1;function dr(n,r,a){for(a=a.child;a!==null;)nv(n,r,a),a=a.sibling}function nv(n,r,a){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Mr,a)}catch{}switch(a.tag){case 26:wt||On(a,r),dr(n,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:wt||On(a,r);var c=Mt,f=kn;for(Mt=a.stateNode,dr(n,r,a),a=a.stateNode,r=a.attributes;r.length;)a.removeAttributeNode(r[0]);qi(a),Mt=c,kn=f;break;case 5:wt||On(a,r);case 6:f=Mt;var g=kn;if(Mt=null,dr(n,r,a),Mt=f,kn=g,Mt!==null)if(kn)try{n=Mt,c=a.stateNode,n.nodeType===8?n.parentNode.removeChild(c):n.removeChild(c)}catch(b){lt(a,r,b)}else try{Mt.removeChild(a.stateNode)}catch(b){lt(a,r,b)}break;case 18:Mt!==null&&(kn?(r=Mt,a=a.stateNode,r.nodeType===8?Rm(r.parentNode,a):r.nodeType===1&&Rm(r,a),tc(r)):Rm(Mt,a.stateNode));break;case 4:c=Mt,f=kn,Mt=a.stateNode.containerInfo,kn=!0,dr(n,r,a),Mt=c,kn=f;break;case 0:case 11:case 14:case 15:wt||si(2,a,r),wt||si(4,a,r),dr(n,r,a);break;case 1:wt||(On(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Q0(a,r,c)),dr(n,r,a);break;case 21:dr(n,r,a);break;case 22:wt||On(a,r),wt=(c=wt)||a.memoizedState!==null,dr(n,r,a),wt=c;break;default:dr(n,r,a)}}function sv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{tc(n)}catch(a){lt(r,r.return,a)}}function J2(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new Z0),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new Z0),r;default:throw Error(i(435,n.tag))}}function Xf(n,r){var a=J2(n);r.forEach(function(c){var f=dE.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}function Zn(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c],g=n,b=r,j=b;e:for(;j!==null;){switch(j.tag){case 27:case 5:Mt=j.stateNode,kn=!1;break e;case 3:Mt=j.stateNode.containerInfo,kn=!0;break e;case 4:Mt=j.stateNode.containerInfo,kn=!0;break e}j=j.return}if(Mt===null)throw Error(i(160));nv(g,b,f),Mt=null,kn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)rv(r,n),r=r.sibling}var us=null;function rv(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Zn(r,n),Jn(n),c&4&&(si(3,n,n.return),Ll(3,n),si(5,n,n.return));break;case 1:Zn(r,n),Jn(n),c&512&&(wt||a===null||On(a,a.return)),c&64&&hr&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var f=us;if(Zn(r,n),Jn(n),c&512&&(wt||a===null||On(a,a.return)),c&4){var g=a!==null?a.memoizedState:null;if(c=n.memoizedState,a===null)if(c===null)if(n.stateNode===null){e:{c=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":g=f.getElementsByTagName("title")[0],(!g||g[zr]||g[Qt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(c),f.head.insertBefore(g,f.querySelector("head > title"))),rn(g,c,a),g[Qt]=n,yt(g),c=g;break e;case"link":var b=Yv("link","href",f).get(c+(a.href||""));if(b){for(var j=0;j<b.length;j++)if(g=b[j],g.getAttribute("href")===(a.href==null?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(j,1);break t}}g=f.createElement(c),rn(g,c,a),f.head.appendChild(g);break;case"meta":if(b=Yv("meta","content",f).get(c+(a.content||""))){for(j=0;j<b.length;j++)if(g=b[j],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(j,1);break t}}g=f.createElement(c),rn(g,c,a),f.head.appendChild(g);break;default:throw Error(i(468,c))}g[Qt]=n,yt(g),c=g}n.stateNode=c}else Wv(f,n.type,n.stateNode);else n.stateNode=Qv(f,c,n.memoizedProps);else g!==c?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,c===null?Wv(f,n.type,n.stateNode):Qv(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&W0(n,n.memoizedProps,a.memoizedProps)}break;case 27:if(c&4&&n.alternate===null){f=n.stateNode,g=n.memoizedProps;try{for(var z=f.firstChild;z;){var G=z.nextSibling,se=z.nodeName;z[zr]||se==="HEAD"||se==="BODY"||se==="SCRIPT"||se==="STYLE"||se==="LINK"&&z.rel.toLowerCase()==="stylesheet"||f.removeChild(z),z=G}for(var ue=n.type,W=f.attributes;W.length;)f.removeAttributeNode(W[0]);rn(f,ue,g),f[Qt]=n,f[Vt]=g}catch(Te){lt(n,n.return,Te)}}case 5:if(Zn(r,n),Jn(n),c&512&&(wt||a===null||On(a,a.return)),n.flags&32){f=n.stateNode;try{Hn(f,"")}catch(Te){lt(n,n.return,Te)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,W0(n,f,a!==null?a.memoizedProps:f)),c&1024&&(Wf=!0);break;case 6:if(Zn(r,n),Jn(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,a=n.stateNode;try{a.nodeValue=c}catch(Te){lt(n,n.return,Te)}}break;case 3:if(ch=null,f=us,us=oh(r.containerInfo),Zn(r,n),us=f,Jn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{tc(r.containerInfo)}catch(Te){lt(n,n.return,Te)}Wf&&(Wf=!1,iv(n));break;case 4:c=us,us=oh(n.stateNode.containerInfo),Zn(r,n),Jn(n),us=c;break;case 12:Zn(r,n),Jn(n);break;case 13:Zn(r,n),Jn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(am=Nn()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Xf(n,c)));break;case 22:if(c&512&&(wt||a===null||On(a,a.return)),z=n.memoizedState!==null,G=a!==null&&a.memoizedState!==null,se=hr,ue=wt,hr=se||z,wt=ue||G,Zn(r,n),wt=ue,hr=se,Jn(n),r=n.stateNode,r._current=n,r._visibility&=-3,r._visibility|=r._pendingVisibility&2,c&8192&&(r._visibility=z?r._visibility&-2:r._visibility|1,z&&(r=hr||wt,a===null||G||r||co(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))e:for(a=null,r=n;;){if(r.tag===5||r.tag===26||r.tag===27){if(a===null){G=a=r;try{if(f=G.stateNode,z)g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{b=G.stateNode,j=G.memoizedProps.style;var te=j!=null&&j.hasOwnProperty("display")?j.display:null;b.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Te){lt(G,G.return,Te)}}}else if(r.tag===6){if(a===null){G=r;try{G.stateNode.nodeValue=z?"":G.memoizedProps}catch(Te){lt(G,G.return,Te)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=n.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Xf(n,a))));break;case 19:Zn(r,n),Jn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Xf(n,c)));break;case 21:break;default:Zn(r,n),Jn(n)}}function Jn(n){var r=n.flags;if(r&2){try{if(n.tag!==27){e:{for(var a=n.return;a!==null;){if(X0(a)){var c=a;break e}a=a.return}throw Error(i(160))}switch(c.tag){case 27:var f=c.stateNode,g=Qf(n);$u(n,g,f);break;case 5:var b=c.stateNode;c.flags&32&&(Hn(b,""),c.flags&=-33);var j=Qf(n);$u(n,j,b);break;case 3:case 4:var z=c.stateNode.containerInfo,G=Qf(n);Yf(n,G,z);break;default:throw Error(i(161))}}}catch(se){lt(n,n.return,se)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function iv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;iv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function fr(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)ev(n,r.alternate,r),r=r.sibling}function co(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:si(4,r,r.return),co(r);break;case 1:On(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Q0(r,r.return,a),co(r);break;case 26:case 27:case 5:On(r,r.return),co(r);break;case 22:On(r,r.return),r.memoizedState===null&&co(r);break;default:co(r)}n=n.sibling}}function ri(n,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=n,g=r,b=g.flags;switch(g.tag){case 0:case 11:case 15:ri(f,g,a),Ll(4,g);break;case 1:if(ri(f,g,a),c=g,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){lt(c,c.return,G)}if(c=g,f=c.updateQueue,f!==null){var j=c.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)G0(z[f],j)}catch(G){lt(c,c.return,G)}}a&&b&64&&K0(g),da(g,g.return);break;case 26:case 27:case 5:ri(f,g,a),a&&c===null&&b&4&&Y0(g),da(g,g.return);break;case 12:ri(f,g,a);break;case 13:ri(f,g,a),a&&b&4&&sv(f,g);break;case 22:g.memoizedState===null&&ri(f,g,a),da(g,g.return);break;default:ri(f,g,a)}r=r.sibling}}function Zf(n,r){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Al(a))}function Jf(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Al(n))}function ii(n,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)av(n,r,a,c),r=r.sibling}function av(n,r,a,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:ii(n,r,a,c),f&2048&&Ll(9,r);break;case 3:ii(n,r,a,c),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Al(n)));break;case 12:if(f&2048){ii(n,r,a,c),n=r.stateNode;try{var g=r.memoizedProps,b=g.id,j=g.onPostCommit;typeof j=="function"&&j(b,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(z){lt(r,r.return,z)}}else ii(n,r,a,c);break;case 23:break;case 22:g=r.stateNode,r.memoizedState!==null?g._visibility&4?ii(n,r,a,c):Ul(n,r):g._visibility&4?ii(n,r,a,c):(g._visibility|=4,uo(n,r,a,c,(r.subtreeFlags&10256)!==0)),f&2048&&Zf(r.alternate,r);break;case 24:ii(n,r,a,c),f&2048&&Jf(r.alternate,r);break;default:ii(n,r,a,c)}}function uo(n,r,a,c,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var g=n,b=r,j=a,z=c,G=b.flags;switch(b.tag){case 0:case 11:case 15:uo(g,b,j,z,f),Ll(8,b);break;case 23:break;case 22:var se=b.stateNode;b.memoizedState!==null?se._visibility&4?uo(g,b,j,z,f):Ul(g,b):(se._visibility|=4,uo(g,b,j,z,f)),f&&G&2048&&Zf(b.alternate,b);break;case 24:uo(g,b,j,z,f),f&&G&2048&&Jf(b.alternate,b);break;default:uo(g,b,j,z,f)}r=r.sibling}}function Ul(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=n,c=r,f=c.flags;switch(c.tag){case 22:Ul(a,c),f&2048&&Zf(c.alternate,c);break;case 24:Ul(a,c),f&2048&&Jf(c.alternate,c);break;default:Ul(a,c)}r=r.sibling}}var Vl=8192;function ho(n){if(n.subtreeFlags&Vl)for(n=n.child;n!==null;)ov(n),n=n.sibling}function ov(n){switch(n.tag){case 26:ho(n),n.flags&Vl&&n.memoizedState!==null&&BE(us,n.memoizedState,n.memoizedProps);break;case 5:ho(n);break;case 3:case 4:var r=us;us=oh(n.stateNode.containerInfo),ho(n),us=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=Vl,Vl=16777216,ho(n),Vl=r):ho(n));break;default:ho(n)}}function lv(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function zl(n){var r=n.deletions;if(n.flags&16){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Zt=c,uv(c,n)}lv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)cv(n),n=n.sibling}function cv(n){switch(n.tag){case 0:case 11:case 15:zl(n),n.flags&2048&&si(9,n,n.return);break;case 3:zl(n);break;case 12:zl(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&4&&(n.return===null||n.return.tag!==13)?(r._visibility&=-5,Ku(n)):zl(n);break;default:zl(n)}}function Ku(n){var r=n.deletions;if(n.flags&16){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Zt=c,uv(c,n)}lv(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:si(8,r,r.return),Ku(r);break;case 22:a=r.stateNode,a._visibility&4&&(a._visibility&=-5,Ku(r));break;default:Ku(r)}n=n.sibling}}function uv(n,r){for(;Zt!==null;){var a=Zt;switch(a.tag){case 0:case 11:case 15:si(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Al(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Zt=c;else e:for(a=n;Zt!==null;){c=Zt;var f=c.sibling,g=c.return;if(tv(c),c===a){Zt=null;break e}if(f!==null){f.return=g,Zt=f;break e}Zt=g}}}function eE(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function es(n,r,a,c){return new eE(n,r,a,c)}function em(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ai(n,r){var a=n.alternate;return a===null?(a=es(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&31457280,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function hv(n,r){n.flags&=31457282;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Qu(n,r,a,c,f,g){var b=0;if(c=n,typeof n=="function")em(n)&&(b=1);else if(typeof n=="string")b=VE(n,a,Lt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case m:return fa(a.children,f,g,r);case y:b=8,f|=24;break;case x:return n=es(12,a,r,f|2),n.elementType=x,n.lanes=g,n;case q:return n=es(13,a,r,f),n.elementType=q,n.lanes=g,n;case N:return n=es(19,a,r,f),n.elementType=N,n.lanes=g,n;case k:return dv(a,f,g,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case w:case S:b=10;break e;case T:b=9;break e;case A:b=11;break e;case V:b=14;break e;case P:b=16,c=null;break e}b=29,a=Error(i(130,n===null?"null":typeof n,"")),c=null}return r=es(b,a,r,f),r.elementType=n,r.type=c,r.lanes=g,r}function fa(n,r,a,c){return n=es(7,n,c,r),n.lanes=a,n}function dv(n,r,a,c){n=es(22,n,c,r),n.elementType=k,n.lanes=a;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var g=f._current;if(g===null)throw Error(i(456));if(!(f._pendingVisibility&2)){var b=Qr(g,2);b!==null&&(f._pendingVisibility|=2,bn(b,g,2))}},attach:function(){var g=f._current;if(g===null)throw Error(i(456));if(f._pendingVisibility&2){var b=Qr(g,2);b!==null&&(f._pendingVisibility&=-3,bn(b,g,2))}}};return n.stateNode=f,n}function tm(n,r,a){return n=es(6,n,null,r),n.lanes=a,n}function nm(n,r,a){return r=es(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function mr(n){n.flags|=4}function fv(n,r){if(r.type!=="stylesheet"||r.state.loading&4)n.flags&=-16777217;else if(n.flags|=16777216,!Xv(r)){if(r=Xn.current,r!==null&&((Ke&4194176)===Ke?Ds!==null:(Ke&62914560)!==Ke&&!(Ke&536870912)||r!==Ds))throw Tl=of,jy;n.flags|=8192}}function Yu(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Pr():536870912,n.lanes|=r,mo|=r)}function Bl(n,r){if(!Ze)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function vt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&31457280,c|=f.flags&31457280,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function tE(n,r,a){var c=r.pendingProps;switch(rf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(r),null;case 1:return vt(r),null;case 3:return a=r.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ur(Ht),Ks(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(_l(r)?mr(r):n===null||n.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,cs!==null&&(um(cs),cs=null))),vt(r),null;case 26:return a=r.memoizedState,n===null?(mr(r),a!==null?(vt(r),fv(r,a)):(vt(r),r.flags&=-16777217)):a?a!==n.memoizedState?(mr(r),vt(r),fv(r,a)):(vt(r),r.flags&=-16777217):(n.memoizedProps!==c&&mr(r),vt(r),r.flags&=-16777217),null;case 27:Da(r),a=zn.current;var f=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==c&&mr(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return vt(r),null}n=Lt.current,_l(r)?Ry(r):(n=Hv(f,c,a),r.stateNode=n,mr(r))}return vt(r),null;case 5:if(Da(r),a=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&mr(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return vt(r),null}if(n=Lt.current,_l(r))Ry(r);else{switch(f=ah(zn.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?f.createElement(a,{is:c.is}):f.createElement(a)}}n[Qt]=r,n[Vt]=c;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=n;e:switch(rn(n,a,c),a){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&mr(r)}}return vt(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==c&&mr(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(n=zn.current,_l(r)){if(n=r.stateNode,a=r.memoizedProps,c=null,f=_n,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Qt]=r,n=!!(n.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Lv(n.nodeValue,a)),n||sa(r)}else n=ah(n).createTextNode(c),n[Qt]=r,r.stateNode=n}return vt(r),null;case 13:if(c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=_l(r),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Qt]=r}else bl(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;vt(r),f=!1}else cs!==null&&(um(cs),cs=null),f=!0;if(!f)return r.flags&256?(ar(r),r):(ar(r),null)}if(ar(r),r.flags&128)return r.lanes=a,r;if(a=c!==null,n=n!==null&&n.memoizedState!==null,a){c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048)}return a!==n&&a&&(r.child.flags|=8192),Yu(r,r.updateQueue),vt(r),null;case 4:return Ks(),n===null&&bm(r.stateNode.containerInfo),vt(r),null;case 10:return ur(r.type),vt(r),null;case 19:if(ot(qt),f=r.memoizedState,f===null)return vt(r),null;if(c=(r.flags&128)!==0,g=f.rendering,g===null)if(c)Bl(f,!1);else{if(Et!==0||n!==null&&n.flags&128)for(n=r.child;n!==null;){if(g=Du(n),g!==null){for(r.flags|=128,Bl(f,!1),n=g.updateQueue,r.updateQueue=n,Yu(r,n),r.subtreeFlags=0,n=a,a=r.child;a!==null;)hv(a,n),a=a.sibling;return et(qt,qt.current&1|2),r.child}n=n.sibling}f.tail!==null&&Nn()>Wu&&(r.flags|=128,c=!0,Bl(f,!1),r.lanes=4194304)}else{if(!c)if(n=Du(g),n!==null){if(r.flags|=128,c=!0,n=n.updateQueue,r.updateQueue=n,Yu(r,n),Bl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Ze)return vt(r),null}else 2*Nn()-f.renderingStartTime>Wu&&a!==536870912&&(r.flags|=128,c=!0,Bl(f,!1),r.lanes=4194304);f.isBackwards?(g.sibling=r.child,r.child=g):(n=f.last,n!==null?n.sibling=g:r.child=g,f.last=g)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=Nn(),r.sibling=null,n=qt.current,et(qt,c?n&1|2:n&1),r):(vt(r),null);case 22:case 23:return ar(r),cf(),c=r.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?a&536870912&&!(r.flags&128)&&(vt(r),r.subtreeFlags&6&&(r.flags|=8192)):vt(r),a=r.updateQueue,a!==null&&Yu(r,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),n!==null&&ot(ia),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ur(Ht),vt(r),null;case 25:return null}throw Error(i(156,r.tag))}function nE(n,r){switch(rf(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return ur(Ht),Ks(),n=r.flags,n&65536&&!(n&128)?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Da(r),null;case 13:if(ar(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));bl()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return ot(qt),null;case 4:return Ks(),null;case 10:return ur(r.type),null;case 22:case 23:return ar(r),cf(),n!==null&&ot(ia),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return ur(Ht),null;case 25:return null;default:return null}}function mv(n,r){switch(rf(r),r.tag){case 3:ur(Ht),Ks();break;case 26:case 27:case 5:Da(r);break;case 4:Ks();break;case 13:ar(r);break;case 19:ot(qt);break;case 10:ur(r.type);break;case 22:case 23:ar(r),cf(),n!==null&&ot(ia);break;case 24:ur(Ht)}}var sE={getCacheForType:function(n){var r=un(Ht),a=r.data.get(n);return a===void 0&&(a=n(),r.data.set(n,a)),a}},rE=typeof WeakMap=="function"?WeakMap:Map,xt=0,ct=null,Be=null,Ke=0,ut=0,Pn=null,pr=!1,fo=!1,sm=!1,gr=0,Et=0,oi=0,ma=0,rm=0,ts=0,mo=0,ql=null,Os=null,im=!1,am=0,Wu=1/0,Xu=null,li=null,Zu=!1,pa=null,Hl=0,om=0,lm=null,Fl=0,cm=null;function Ln(){if(xt&2&&Ke!==0)return Ke&-Ke;if(R.T!==null){var n=ro;return n!==0?n:ym()}return ru()}function pv(){ts===0&&(ts=!(Ke&536870912)||Ze?nl():536870912);var n=Xn.current;return n!==null&&(n.flags|=32),ts}function bn(n,r,a){(n===ct&&ut===2||n.cancelPendingCommit!==null)&&(po(n,0),yr(n,Ke,ts,!1)),At(n,a),(!(xt&2)||n!==ct)&&(n===ct&&(!(xt&2)&&(ma|=a),Et===4&&yr(n,Ke,ts,!1)),ks(n))}function gv(n,r,a){if(xt&6)throw Error(i(327));var c=!a&&(r&60)===0&&(r&n.expiredLanes)===0||kr(n,r),f=c?oE(n,r):fm(n,r,!0),g=c;do{if(f===0){fo&&!c&&yr(n,r,0,!1);break}else if(f===6)yr(n,r,0,!pr);else{if(a=n.current.alternate,g&&!iE(a)){f=fm(n,r,!1),g=!1;continue}if(f===2){if(g=r,n.errorRecoveryDisabledLanes&g)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var j=n;f=ql;var z=j.current.memoizedState.isDehydrated;if(z&&(po(j,b).flags|=256),b=fm(j,b,!1),b!==2){if(sm&&!z){j.errorRecoveryDisabledLanes|=g,ma|=g,f=4;break e}g=Os,Os=f,g!==null&&um(g)}f=b}if(g=!1,f!==2)continue}}if(f===1){po(n,0),yr(n,r,0,!0);break}e:{switch(c=n,f){case 0:case 1:throw Error(i(345));case 4:if((r&4194176)===r){yr(c,r,ts,!pr);break e}break;case 2:Os=null;break;case 3:case 5:break;default:throw Error(i(329))}if(c.finishedWork=a,c.finishedLanes=r,(r&62914560)===r&&(g=am+300-Nn(),10<g)){if(yr(c,r,ts,!pr),Bn(c,0)!==0)break e;c.timeoutHandle=zv(yv.bind(null,c,a,Os,Xu,im,r,ts,ma,mo,pr,2,-0,0),g);break e}yv(c,a,Os,Xu,im,r,ts,ma,mo,pr,0,-0,0)}}break}while(!0);ks(n)}function um(n){Os===null?Os=n:Os.push.apply(Os,n)}function yv(n,r,a,c,f,g,b,j,z,G,se,ue,W){var te=r.subtreeFlags;if((te&8192||(te&16785408)===16785408)&&(Wl={stylesheets:null,count:0,unsuspend:zE},ov(r),r=qE(),r!==null)){n.cancelPendingCommit=r(Tv.bind(null,n,a,c,f,b,j,z,1,ue,W)),yr(n,g,b,!G);return}Tv(n,a,c,f,b,j,z,se,ue,W)}function iE(n){for(var r=n;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var f=a[c],g=f.getSnapshot;f=f.value;try{if(!Mn(g(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function yr(n,r,a,c){r&=~rm,r&=~ma,n.suspendedLanes|=r,n.pingedLanes&=~r,c&&(n.warmLanes|=r),c=n.expirationTimes;for(var f=r;0<f;){var g=31-yn(f),b=1<<g;c[g]=-1,f&=~b}a!==0&&Lr(n,a,r)}function Ju(){return xt&6?!0:(Gl(0),!1)}function hm(){if(Be!==null){if(ut===0)var n=Be.return;else n=Be,cr=ua=null,yf(n),no=null,Nl=0,n=Be;for(;n!==null;)mv(n.alternate,n),n=n.return;Be=null}}function po(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,TE(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),hm(),ct=n,Be=a=ai(n.current,null),Ke=r,ut=0,Pn=null,pr=!1,fo=kr(n,r),sm=!1,mo=ts=rm=ma=oi=Et=0,Os=ql=null,im=!1,r&8&&(r|=r&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=r;0<c;){var f=31-yn(c),g=1<<f;r|=n[f],c&=~g}return gr=r,Eu(),a}function vv(n,r){Le=null,R.H=Ms,r===El?(r=My(),ut=3):r===jy?(r=My(),ut=4):ut=r===I0?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Pn=r,Be===null&&(Et=1,Hu(n,Qn(r,n.current)))}function xv(){var n=R.H;return R.H=Ms,n===null?Ms:n}function _v(){var n=R.A;return R.A=sE,n}function dm(){Et=4,pr||(Ke&4194176)!==Ke&&Xn.current!==null||(fo=!0),!(oi&134217727)&&!(ma&134217727)||ct===null||yr(ct,Ke,ts,!1)}function fm(n,r,a){var c=xt;xt|=2;var f=xv(),g=_v();(ct!==n||Ke!==r)&&(Xu=null,po(n,r)),r=!1;var b=Et;e:do try{if(ut!==0&&Be!==null){var j=Be,z=Pn;switch(ut){case 8:hm(),b=6;break e;case 3:case 2:case 6:Xn.current===null&&(r=!0);var G=ut;if(ut=0,Pn=null,go(n,j,z,G),a&&fo){b=0;break e}break;default:G=ut,ut=0,Pn=null,go(n,j,z,G)}}aE(),b=Et;break}catch(se){vv(n,se)}while(!0);return r&&n.shellSuspendCounter++,cr=ua=null,xt=c,R.H=f,R.A=g,Be===null&&(ct=null,Ke=0,Eu()),b}function aE(){for(;Be!==null;)bv(Be)}function oE(n,r){var a=xt;xt|=2;var c=xv(),f=_v();ct!==n||Ke!==r?(Xu=null,Wu=Nn()+500,po(n,r)):fo=kr(n,r);e:do try{if(ut!==0&&Be!==null){r=Be;var g=Pn;t:switch(ut){case 1:ut=0,Pn=null,go(n,r,g,1);break;case 2:if(Iy(g)){ut=0,Pn=null,wv(r);break}r=function(){ut===2&&ct===n&&(ut=7),ks(n)},g.then(r,r);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Iy(g)?(ut=0,Pn=null,wv(r)):(ut=0,Pn=null,go(n,r,g,7));break;case 5:var b=null;switch(Be.tag){case 26:b=Be.memoizedState;case 5:case 27:var j=Be;if(!b||Xv(b)){ut=0,Pn=null;var z=j.sibling;if(z!==null)Be=z;else{var G=j.return;G!==null?(Be=G,eh(G)):Be=null}break t}}ut=0,Pn=null,go(n,r,g,5);break;case 6:ut=0,Pn=null,go(n,r,g,6);break;case 8:hm(),Et=6;break e;default:throw Error(i(462))}}lE();break}catch(se){vv(n,se)}while(!0);return cr=ua=null,R.H=c,R.A=f,xt=a,Be!==null?0:(ct=null,Ke=0,Eu(),Et)}function lE(){for(;Be!==null&&!zd();)bv(Be)}function bv(n){var r=H0(n.alternate,n,gr);n.memoizedProps=n.pendingProps,r===null?eh(n):Be=r}function wv(n){var r=n,a=r.alternate;switch(r.tag){case 15:case 0:r=L0(a,r,r.pendingProps,r.type,void 0,Ke);break;case 11:r=L0(a,r,r.pendingProps,r.type.render,r.ref,Ke);break;case 5:yf(r);default:mv(a,r),r=Be=hv(r,gr),r=H0(a,r,gr)}n.memoizedProps=n.pendingProps,r===null?eh(n):Be=r}function go(n,r,a,c){cr=ua=null,yf(r),no=null,Nl=0;var f=r.return;try{if(W2(n,f,r,a,Ke)){Et=1,Hu(n,Qn(a,n.current)),Be=null;return}}catch(g){if(f!==null)throw Be=f,g;Et=1,Hu(n,Qn(a,n.current)),Be=null;return}r.flags&32768?(Ze||c===1?n=!0:fo||Ke&536870912?n=!1:(pr=n=!0,(c===2||c===3||c===6)&&(c=Xn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Ev(r,n)):eh(r)}function eh(n){var r=n;do{if(r.flags&32768){Ev(r,pr);return}n=r.return;var a=tE(r.alternate,r,gr);if(a!==null){Be=a;return}if(r=r.sibling,r!==null){Be=r;return}Be=r=n}while(r!==null);Et===0&&(Et=5)}function Ev(n,r){do{var a=nE(n.alternate,n);if(a!==null){a.flags&=32767,Be=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(n=n.sibling,n!==null)){Be=n;return}Be=n=a}while(n!==null);Et=6,Be=null}function Tv(n,r,a,c,f,g,b,j,z,G){var se=R.T,ue=me.p;try{me.p=2,R.T=null,cE(n,r,a,c,ue,f,g,b,j,z,G)}finally{R.T=se,me.p=ue}}function cE(n,r,a,c,f,g,b,j){do yo();while(pa!==null);if(xt&6)throw Error(i(327));var z=n.finishedWork;if(c=n.finishedLanes,z===null)return null;if(n.finishedWork=null,n.finishedLanes=0,z===n.current)throw Error(i(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var G=z.lanes|z.childLanes;if(G|=tf,nu(n,c,G,g,b,j),n===ct&&(Be=ct=null,Ke=0),!(z.subtreeFlags&10256)&&!(z.flags&10256)||Zu||(Zu=!0,om=G,lm=a,fE(Qs,function(){return yo(),null})),a=(z.flags&15990)!==0,z.subtreeFlags&15990||a?(a=R.T,R.T=null,g=me.p,me.p=2,b=xt,xt|=4,Z2(n,z),rv(z,n),M2(Nm,n.containerInfo),dh=!!Tm,Nm=Tm=null,n.current=z,ev(n,z.alternate,z),Zo(),xt=b,me.p=g,R.T=a):n.current=z,Zu?(Zu=!1,pa=n,Hl=c):Nv(n,G),G=n.pendingLanes,G===0&&(li=null),el(z.stateNode),ks(n),r!==null)for(f=n.onRecoverableError,z=0;z<r.length;z++)G=r[z],f(G.value,{componentStack:G.stack});return Hl&3&&yo(),G=n.pendingLanes,c&4194218&&G&42?n===cm?Fl++:(Fl=0,cm=n):Fl=0,Gl(0),null}function Nv(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Al(r)))}function yo(){if(pa!==null){var n=pa,r=om;om=0;var a=su(Hl),c=R.T,f=me.p;try{if(me.p=32>a?32:a,R.T=null,pa===null)var g=!1;else{a=lm,lm=null;var b=pa,j=Hl;if(pa=null,Hl=0,xt&6)throw Error(i(331));var z=xt;if(xt|=4,cv(b.current),av(b,b.current,j,a),xt=z,Gl(0,!1),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Mr,b)}catch{}g=!0}return g}finally{me.p=f,R.T=c,Nv(n,r)}}return!1}function Sv(n,r,a){r=Qn(a,r),r=If(n.stateNode,r,2),n=ni(n,r,2),n!==null&&(At(n,2),ks(n))}function lt(n,r,a){if(n.tag===3)Sv(n,n,a);else for(;r!==null;){if(r.tag===3){Sv(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(li===null||!li.has(c))){n=Qn(a,n),a=C0(2),c=ni(r,a,2),c!==null&&(j0(a,c,r,n),At(c,2),ks(c));break}}r=r.return}}function mm(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new rE;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(a)||(sm=!0,f.add(a),n=uE.bind(null,n,r,a),r.then(n,n))}function uE(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ct===n&&(Ke&a)===a&&(Et===4||Et===3&&(Ke&62914560)===Ke&&300>Nn()-am?!(xt&2)&&po(n,0):rm|=a,mo===Ke&&(mo=0)),ks(n)}function Av(n,r){r===0&&(r=Pr()),n=Qr(n,r),n!==null&&(At(n,r),ks(n))}function hE(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),Av(n,a)}function dE(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),Av(n,a)}function fE(n,r){return Vi(n,r)}var th=null,vo=null,pm=!1,nh=!1,gm=!1,ga=0;function ks(n){n!==vo&&n.next===null&&(vo===null?th=vo=n:vo=vo.next=n),nh=!0,pm||(pm=!0,pE(mE))}function Gl(n,r){if(!gm&&nh){gm=!0;do for(var a=!1,c=th;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var g=0;else{var b=c.suspendedLanes,j=c.pingedLanes;g=(1<<31-yn(42|n)+1)-1,g&=f&~(b&~j),g=g&201326677?g&201326677|1:g?g|2:0}g!==0&&(a=!0,jv(c,g))}else g=Ke,g=Bn(c,c===ct?g:0),!(g&3)||kr(c,g)||(a=!0,jv(c,g));c=c.next}while(a);gm=!1}}function mE(){nh=pm=!1;var n=0;ga!==0&&(EE()&&(n=ga),ga=0);for(var r=Nn(),a=null,c=th;c!==null;){var f=c.next,g=Rv(c,r);g===0?(c.next=null,a===null?th=f:a.next=f,f===null&&(vo=a)):(a=c,(n!==0||g&3)&&(nh=!0)),c=f}Gl(n)}function Rv(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var b=31-yn(g),j=1<<b,z=f[b];z===-1?(!(j&a)||j&c)&&(f[b]=ka(j,r)):z<=r&&(n.expiredLanes|=j),g&=~j}if(r=ct,a=Ke,a=Bn(n,n===r?a:0),c=n.callbackNode,a===0||n===r&&ut===2||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Oa(c),n.callbackNode=null,n.callbackPriority=0;if(!(a&3)||kr(n,a)){if(r=a&-a,r===n.callbackPriority)return r;switch(c!==null&&Oa(c),su(a)){case 2:case 8:a=Kt;break;case 32:a=Qs;break;case 268435456:a=Jo;break;default:a=Qs}return c=Cv.bind(null,n),a=Vi(a,c),n.callbackPriority=r,n.callbackNode=a,r}return c!==null&&c!==null&&Oa(c),n.callbackPriority=2,n.callbackNode=null,2}function Cv(n,r){var a=n.callbackNode;if(yo()&&n.callbackNode!==a)return null;var c=Ke;return c=Bn(n,n===ct?c:0),c===0?null:(gv(n,c,r),Rv(n,Nn()),n.callbackNode!=null&&n.callbackNode===a?Cv.bind(null,n):null)}function jv(n,r){if(yo())return null;gv(n,r,!0)}function pE(n){NE(function(){xt&6?Vi(Ut,n):n()})}function ym(){return ga===0&&(ga=nl()),ga}function Iv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ts(""+n)}function Dv(n,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,n.id&&a.setAttribute("form",n.id),r.parentNode.insertBefore(a,r),n=new FormData(n),a.parentNode.removeChild(a),n}function gE(n,r,a,c,f){if(r==="submit"&&a&&a.stateNode===f){var g=Iv((f[Vt]||null).action),b=c.submitter;b&&(r=(r=b[Vt]||null)?Iv(r.formAction):b.getAttribute("formAction"),r!==null&&(g=r,b=null));var j=new qa("action","action",null,c,f);n.push({event:j,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ga!==0){var z=b?Dv(f,b):new FormData(f);Sf(a,{pending:!0,data:z,method:f.method,action:g},null,z)}}else typeof g=="function"&&(j.preventDefault(),z=b?Dv(f,b):new FormData(f),Sf(a,{pending:!0,data:z,method:f.method,action:g},g,z))},currentTarget:f}]})}}for(var vm=0;vm<Ty.length;vm++){var xm=Ty[vm],yE=xm.toLowerCase(),vE=xm[0].toUpperCase()+xm.slice(1);ls(yE,"on"+vE)}ls(xy,"onAnimationEnd"),ls(_y,"onAnimationIteration"),ls(by,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(k2,"onTransitionRun"),ls(P2,"onTransitionStart"),ls(L2,"onTransitionCancel"),ls(wy,"onTransitionEnd"),Sn("onMouseEnter",["mouseout","mouseover"]),Sn("onMouseLeave",["mouseout","mouseover"]),Sn("onPointerEnter",["pointerout","pointerover"]),Sn("onPointerLeave",["pointerout","pointerover"]),In("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),In("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),In("onBeforeInput",["compositionend","keypress","textInput","paste"]),In("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),In("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),In("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($l));function Mv(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var g=void 0;if(r)for(var b=c.length-1;0<=b;b--){var j=c[b],z=j.instance,G=j.currentTarget;if(j=j.listener,z!==g&&f.isPropagationStopped())break e;g=j,f.currentTarget=G;try{g(f)}catch(se){qu(se)}f.currentTarget=null,g=z}else for(b=0;b<c.length;b++){if(j=c[b],z=j.instance,G=j.currentTarget,j=j.listener,z!==g&&f.isPropagationStopped())break e;g=j,f.currentTarget=G;try{g(f)}catch(se){qu(se)}f.currentTarget=null,g=z}}}}function Fe(n,r){var a=r[Bi];a===void 0&&(a=r[Bi]=new Set);var c=n+"__bubble";a.has(c)||(Ov(r,n,2,!1),a.add(c))}function _m(n,r,a){var c=0;r&&(c|=4),Ov(a,n,c,r)}var sh="_reactListening"+Math.random().toString(36).slice(2);function bm(n){if(!n[sh]){n[sh]=!0,rl.forEach(function(a){a!=="selectionchange"&&(xE.has(a)||_m(a,!1,n),_m(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[sh]||(r[sh]=!0,_m("selectionchange",!1,r))}}function Ov(n,r,a,c){switch(sx(r)){case 2:var f=GE;break;case 8:f=$E;break;default:f=Om}a=f.bind(null,r,a,n),f=void 0,!Gn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,a,{capture:!0,passive:f}):n.addEventListener(r,a,!0):f!==void 0?n.addEventListener(r,a,{passive:f}):n.addEventListener(r,a,!1)}function wm(n,r,a,c,f){var g=c;if(!(r&1)&&!(r&2)&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var j=c.stateNode.containerInfo;if(j===f||j.nodeType===8&&j.parentNode===f)break;if(b===4)for(b=c.return;b!==null;){var z=b.tag;if((z===3||z===4)&&(z=b.stateNode.containerInfo,z===f||z.nodeType===8&&z.parentNode===f))return;b=b.return}for(;j!==null;){if(b=os(j),b===null)return;if(z=b.tag,z===5||z===6||z===26||z===27){c=g=b;continue e}j=j.parentNode}}c=c.return}lu(function(){var G=g,se=Ba(a),ue=[];e:{var W=Ey.get(n);if(W!==void 0){var te=qa,Te=n;switch(n){case"keypress":if(Ss(a)===0)break e;case"keydown":case"keyup":te=Qa;break;case"focusin":Te="focus",te=Ga;break;case"focusout":Te="blur",te=Ga;break;case"beforeblur":case"afterblur":te=Ga;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=$n;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Kd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=gu;break;case xy:case _y:case by:te=$a;break;case wy:te=vu;break;case"scroll":case"scrollend":te=cu;break;case"wheel":te=Ya;break;case"copy":case"cut":case"paste":te=Ka;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=gl;break;case"toggle":case"beforetoggle":te=_u}var Oe=(r&4)!==0,Tt=!Oe&&(n==="scroll"||n==="scrollend"),$=Oe?W!==null?W+"Capture":null:W;Oe=[];for(var H=G,Q;H!==null;){var oe=H;if(Q=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Q===null||$===null||(oe=$i(H,$),oe!=null&&Oe.push(Kl(H,oe,Q))),Tt)break;H=H.return}0<Oe.length&&(W=new te(W,Te,null,a,se),ue.push({event:W,listeners:Oe}))}}if(!(r&7)){e:{if(W=n==="mouseover"||n==="pointerover",te=n==="mouseout"||n==="pointerout",W&&a!==Fn&&(Te=a.relatedTarget||a.fromElement)&&(os(Te)||Te[Ys]))break e;if((te||W)&&(W=se.window===se?se:(W=se.ownerDocument)?W.defaultView||W.parentWindow:window,te?(Te=a.relatedTarget||a.toElement,te=G,Te=Te?os(Te):null,Te!==null&&(Tt=ne(Te),Oe=Te.tag,Te!==Tt||Oe!==5&&Oe!==27&&Oe!==6)&&(Te=null)):(te=null,Te=G),te!==Te)){if(Oe=$n,oe="onMouseLeave",$="onMouseEnter",H="mouse",(n==="pointerout"||n==="pointerover")&&(Oe=gl,oe="onPointerLeave",$="onPointerEnter",H="pointer"),Tt=te==null?W:Br(te),Q=Te==null?W:Br(Te),W=new Oe(oe,H+"leave",te,a,se),W.target=Tt,W.relatedTarget=Q,oe=null,os(se)===G&&(Oe=new Oe($,H+"enter",Te,a,se),Oe.target=Q,Oe.relatedTarget=Tt,oe=Oe),Tt=oe,te&&Te)t:{for(Oe=te,$=Te,H=0,Q=Oe;Q;Q=xo(Q))H++;for(Q=0,oe=$;oe;oe=xo(oe))Q++;for(;0<H-Q;)Oe=xo(Oe),H--;for(;0<Q-H;)$=xo($),Q--;for(;H--;){if(Oe===$||$!==null&&Oe===$.alternate)break t;Oe=xo(Oe),$=xo($)}Oe=null}else Oe=null;te!==null&&kv(ue,W,te,Oe,!1),Te!==null&&Tt!==null&&kv(ue,Tt,Te,Oe,!0)}}e:{if(W=G?Br(G):window,te=W.nodeName&&W.nodeName.toLowerCase(),te==="select"||te==="input"&&W.type==="file")var _e=ly;else if(Bt(W))if(cy)_e=I2;else{_e=C2;var ze=R2}else te=W.nodeName,!te||te.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?G&&cl(G.elementType)&&(_e=ly):_e=j2;if(_e&&(_e=_e(n,G))){sr(ue,_e,a,se);break e}ze&&ze(n,W,G),n==="focusout"&&G&&W.type==="number"&&G.memoizedProps.value!=null&&za(W,"number",W.value)}switch(ze=G?Br(G):window,n){case"focusin":(Bt(ze)||ze.contentEditable==="true")&&(Wa=ze,Zd=G,xl=null);break;case"focusout":xl=Zd=Wa=null;break;case"mousedown":Jd=!0;break;case"contextmenu":case"mouseup":case"dragend":Jd=!1,yy(ue,a,se);break;case"selectionchange":if(O2)break;case"keydown":case"keyup":yy(ue,a,se)}var Ne;if(Cs)e:{switch(n){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Ge?J(n,a)&&(Re="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&(_&&a.locale!=="ko"&&(Ge||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Ge&&(Ne=hl()):(Ns=se,Kr="value"in Ns?Ns.value:Ns.textContent,Ge=!0)),ze=rh(G,Re),0<ze.length&&(Re=new ml(Re,n,null,a,se),ue.push({event:Re,listeners:ze}),Ne?Re.data=Ne:(Ne=de(a),Ne!==null&&(Re.data=Ne)))),(Ne=v?zt(n,a):$e(n,a))&&(Re=rh(G,"onBeforeInput"),0<Re.length&&(ze=new ml("onBeforeInput","beforeinput",null,a,se),ue.push({event:ze,listeners:Re}),ze.data=Ne)),gE(ue,n,G,a,se)}Mv(ue,r)})}function Kl(n,r,a){return{instance:n,listener:r,currentTarget:a}}function rh(n,r){for(var a=r+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=$i(n,a),f!=null&&c.unshift(Kl(n,f,g)),f=$i(n,r),f!=null&&c.push(Kl(n,f,g))),n=n.return}return c}function xo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function kv(n,r,a,c,f){for(var g=r._reactName,b=[];a!==null&&a!==c;){var j=a,z=j.alternate,G=j.stateNode;if(j=j.tag,z!==null&&z===c)break;j!==5&&j!==26&&j!==27||G===null||(z=G,f?(G=$i(a,g),G!=null&&b.unshift(Kl(a,G,z))):f||(G=$i(a,g),G!=null&&b.push(Kl(a,G,z)))),a=a.return}b.length!==0&&n.push({event:r,listeners:b})}var _E=/\r\n?/g,bE=/\u0000|\uFFFD/g;function Pv(n){return(typeof n=="string"?n:""+n).replace(_E,`
`).replace(bE,"")}function Lv(n,r){return r=Pv(r),Pv(n)===r}function ih(){}function at(n,r,a,c,f,g){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Hn(n,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Hn(n,""+c);break;case"className":Fr(n,"class",c);break;case"tabIndex":Fr(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Fr(n,a,c);break;case"style":ou(n,c,g);break;case"data":if(r!=="object"){Fr(n,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){n.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=Ts(""+c),n.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(r!=="input"&&at(n,r,"name",f.name,f,null),at(n,r,"formEncType",f.formEncType,f,null),at(n,r,"formMethod",f.formMethod,f,null),at(n,r,"formTarget",f.formTarget,f,null)):(at(n,r,"encType",f.encType,f,null),at(n,r,"method",f.method,f,null),at(n,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=Ts(""+c),n.setAttribute(a,c);break;case"onClick":c!=null&&(n.onclick=ih);break;case"onScroll":c!=null&&Fe("scroll",n);break;case"onScrollEnd":c!=null&&Fe("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}a=Ts(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""+c):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":c===!0?n.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,c):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(a,c):n.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(a):n.setAttribute(a,c);break;case"popover":Fe("beforetoggle",n),Fe("toggle",n),Hr(n,"popover",c);break;case"xlinkActuate":qn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":qn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":qn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":qn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":qn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":qn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":qn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":qn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":qn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Hr(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Gd.get(a)||a,Hr(n,a,c))}}function Em(n,r,a,c,f,g){switch(a){case"style":ou(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"children":typeof c=="string"?Hn(n,c):(typeof c=="number"||typeof c=="bigint")&&Hn(n,""+c);break;case"onScroll":c!=null&&Fe("scroll",n);break;case"onScrollEnd":c!=null&&Fe("scrollend",n);break;case"onClick":c!=null&&(n.onclick=ih);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ua.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),g=n[Vt]||null,g=g!=null?g[a]:null,typeof g=="function"&&n.removeEventListener(r,g,f),typeof c=="function")){typeof g!="function"&&g!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(r,c,f);break e}a in n?n[a]=c:c===!0?n.setAttribute(a,""):Hr(n,a,c)}}}function rn(n,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",n),Fe("load",n);var c=!1,f=!1,g;for(g in a)if(a.hasOwnProperty(g)){var b=a[g];if(b!=null)switch(g){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:at(n,r,g,b,a,null)}}f&&at(n,r,"srcSet",a.srcSet,a,null),c&&at(n,r,"src",a.src,a,null);return;case"input":Fe("invalid",n);var j=g=b=f=null,z=null,G=null;for(c in a)if(a.hasOwnProperty(c)){var se=a[c];if(se!=null)switch(c){case"name":f=se;break;case"type":b=se;break;case"checked":z=se;break;case"defaultChecked":G=se;break;case"value":g=se;break;case"defaultValue":j=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,r));break;default:at(n,r,c,se,a,null)}}Fi(n,g,j,z,G,b,f,!1),Hi(n);return;case"select":Fe("invalid",n),c=b=g=null;for(f in a)if(a.hasOwnProperty(f)&&(j=a[f],j!=null))switch(f){case"value":g=j;break;case"defaultValue":b=j;break;case"multiple":c=j;default:at(n,r,f,j,a,null)}r=g,a=b,n.multiple=!!c,r!=null?Xe(n,!!c,r,!1):a!=null&&Xe(n,!!c,a,!0);return;case"textarea":Fe("invalid",n),g=f=c=null;for(b in a)if(a.hasOwnProperty(b)&&(j=a[b],j!=null))switch(b){case"value":c=j;break;case"defaultValue":f=j;break;case"children":g=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(91));break;default:at(n,r,b,j,a,null)}$r(n,c,f,g),Hi(n);return;case"option":for(z in a)if(a.hasOwnProperty(z)&&(c=a[z],c!=null))switch(z){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:at(n,r,z,c,a,null)}return;case"dialog":Fe("cancel",n),Fe("close",n);break;case"iframe":case"object":Fe("load",n);break;case"video":case"audio":for(c=0;c<$l.length;c++)Fe($l[c],n);break;case"image":Fe("error",n),Fe("load",n);break;case"details":Fe("toggle",n);break;case"embed":case"source":case"link":Fe("error",n),Fe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(c=a[G],c!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:at(n,r,G,c,a,null)}return;default:if(cl(r)){for(se in a)a.hasOwnProperty(se)&&(c=a[se],c!==void 0&&Em(n,r,se,c,a,void 0));return}}for(j in a)a.hasOwnProperty(j)&&(c=a[j],c!=null&&at(n,r,j,c,a,null))}function wE(n,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,b=null,j=null,z=null,G=null,se=null;for(te in a){var ue=a[te];if(a.hasOwnProperty(te)&&ue!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":z=ue;default:c.hasOwnProperty(te)||at(n,r,te,null,c,ue)}}for(var W in c){var te=c[W];if(ue=a[W],c.hasOwnProperty(W)&&(te!=null||ue!=null))switch(W){case"type":g=te;break;case"name":f=te;break;case"checked":G=te;break;case"defaultChecked":se=te;break;case"value":b=te;break;case"defaultValue":j=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,r));break;default:te!==ue&&at(n,r,W,te,c,ue)}}Gr(n,b,j,z,G,se,g,f);return;case"select":te=b=j=W=null;for(g in a)if(z=a[g],a.hasOwnProperty(g)&&z!=null)switch(g){case"value":break;case"multiple":te=z;default:c.hasOwnProperty(g)||at(n,r,g,null,c,z)}for(f in c)if(g=c[f],z=a[f],c.hasOwnProperty(f)&&(g!=null||z!=null))switch(f){case"value":W=g;break;case"defaultValue":j=g;break;case"multiple":b=g;default:g!==z&&at(n,r,f,g,c,z)}r=j,a=b,c=te,W!=null?Xe(n,!!a,W,!1):!!c!=!!a&&(r!=null?Xe(n,!!a,r,!0):Xe(n,!!a,a?[]:"",!1));return;case"textarea":te=W=null;for(j in a)if(f=a[j],a.hasOwnProperty(j)&&f!=null&&!c.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:at(n,r,j,null,c,f)}for(b in c)if(f=c[b],g=a[b],c.hasOwnProperty(b)&&(f!=null||g!=null))switch(b){case"value":W=f;break;case"defaultValue":te=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==g&&at(n,r,b,f,c,g)}Gi(n,W,te);return;case"option":for(var Te in a)if(W=a[Te],a.hasOwnProperty(Te)&&W!=null&&!c.hasOwnProperty(Te))switch(Te){case"selected":n.selected=!1;break;default:at(n,r,Te,null,c,W)}for(z in c)if(W=c[z],te=a[z],c.hasOwnProperty(z)&&W!==te&&(W!=null||te!=null))switch(z){case"selected":n.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:at(n,r,z,W,c,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in a)W=a[Oe],a.hasOwnProperty(Oe)&&W!=null&&!c.hasOwnProperty(Oe)&&at(n,r,Oe,null,c,W);for(G in c)if(W=c[G],te=a[G],c.hasOwnProperty(G)&&W!==te&&(W!=null||te!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:at(n,r,G,W,c,te)}return;default:if(cl(r)){for(var Tt in a)W=a[Tt],a.hasOwnProperty(Tt)&&W!==void 0&&!c.hasOwnProperty(Tt)&&Em(n,r,Tt,void 0,c,W);for(se in c)W=c[se],te=a[se],!c.hasOwnProperty(se)||W===te||W===void 0&&te===void 0||Em(n,r,se,W,c,te);return}}for(var $ in a)W=a[$],a.hasOwnProperty($)&&W!=null&&!c.hasOwnProperty($)&&at(n,r,$,null,c,W);for(ue in c)W=c[ue],te=a[ue],!c.hasOwnProperty(ue)||W===te||W==null&&te==null||at(n,r,ue,W,c,te)}var Tm=null,Nm=null;function ah(n){return n.nodeType===9?n:n.ownerDocument}function Uv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vv(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Sm(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Am=null;function EE(){var n=window.event;return n&&n.type==="popstate"?n===Am?!1:(Am=n,!0):(Am=null,!1)}var zv=typeof setTimeout=="function"?setTimeout:void 0,TE=typeof clearTimeout=="function"?clearTimeout:void 0,Bv=typeof Promise=="function"?Promise:void 0,NE=typeof queueMicrotask=="function"?queueMicrotask:typeof Bv<"u"?function(n){return Bv.resolve(null).then(n).catch(SE)}:zv;function SE(n){setTimeout(function(){throw n})}function Rm(n,r){var a=r,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),tc(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);tc(r)}function Cm(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Cm(a),qi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function AE(n,r,a,c){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[zr])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=hs(n.nextSibling),n===null)break}return null}function RE(n,r,a){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=hs(n.nextSibling),n===null))return null;return n}function hs(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}function qv(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}function Hv(n,r,a){switch(r=ah(a),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}var ns=new Map,Fv=new Set;function oh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var vr=me.d;me.d={f:CE,r:jE,D:IE,C:DE,L:ME,m:OE,X:PE,S:kE,M:LE};function CE(){var n=vr.f(),r=Ju();return n||r}function jE(n){var r=Ws(n);r!==null&&r.tag===5&&r.type==="form"?y0(r):vr.r(n)}var _o=typeof document>"u"?null:document;function Gv(n,r,a){var c=_o;if(c&&typeof r=="string"&&r){var f=bt(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Fv.has(f)||(Fv.add(f),n={rel:n,crossOrigin:a,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),rn(r,"link",n),yt(r),c.head.appendChild(r)))}}function IE(n){vr.D(n),Gv("dns-prefetch",n,null)}function DE(n,r){vr.C(n,r),Gv("preconnect",n,r)}function ME(n,r,a){vr.L(n,r,a);var c=_o;if(c&&n&&r){var f='link[rel="preload"][as="'+bt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+bt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+bt(a.imageSizes)+'"]')):f+='[href="'+bt(n)+'"]';var g=f;switch(r){case"style":g=bo(n);break;case"script":g=wo(n)}ns.has(g)||(n=M({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:n,as:r},a),ns.set(g,n),c.querySelector(f)!==null||r==="style"&&c.querySelector(Ql(g))||r==="script"&&c.querySelector(Yl(g))||(r=c.createElement("link"),rn(r,"link",n),yt(r),c.head.appendChild(r)))}}function OE(n,r){vr.m(n,r);var a=_o;if(a&&n){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+bt(c)+'"][href="'+bt(n)+'"]',g=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=wo(n)}if(!ns.has(g)&&(n=M({rel:"modulepreload",href:n},r),ns.set(g,n),a.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Yl(g)))return}c=a.createElement("link"),rn(c,"link",n),yt(c),a.head.appendChild(c)}}}function kE(n,r,a){vr.S(n,r,a);var c=_o;if(c&&n){var f=qr(c).hoistableStyles,g=bo(n);r=r||"default";var b=f.get(g);if(!b){var j={loading:0,preload:null};if(b=c.querySelector(Ql(g)))j.loading=5;else{n=M({rel:"stylesheet",href:n,"data-precedence":r},a),(a=ns.get(g))&&jm(n,a);var z=b=c.createElement("link");yt(z),rn(z,"link",n),z._p=new Promise(function(G,se){z.onload=G,z.onerror=se}),z.addEventListener("load",function(){j.loading|=1}),z.addEventListener("error",function(){j.loading|=2}),j.loading|=4,lh(b,r,c)}b={type:"stylesheet",instance:b,count:1,state:j},f.set(g,b)}}}function PE(n,r){vr.X(n,r);var a=_o;if(a&&n){var c=qr(a).hoistableScripts,f=wo(n),g=c.get(f);g||(g=a.querySelector(Yl(f)),g||(n=M({src:n,async:!0},r),(r=ns.get(f))&&Im(n,r),g=a.createElement("script"),yt(g),rn(g,"link",n),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function LE(n,r){vr.M(n,r);var a=_o;if(a&&n){var c=qr(a).hoistableScripts,f=wo(n),g=c.get(f);g||(g=a.querySelector(Yl(f)),g||(n=M({src:n,async:!0,type:"module"},r),(r=ns.get(f))&&Im(n,r),g=a.createElement("script"),yt(g),rn(g,"link",n),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function $v(n,r,a,c){var f=(f=zn.current)?oh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=bo(a.href),a=qr(f).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=bo(a.href);var g=qr(f).hoistableStyles,b=g.get(n);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,b),(g=f.querySelector(Ql(n)))&&!g._p&&(b.instance=g,b.state.loading=5),ns.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ns.set(n,a),g||UE(f,n,a,b.state))),r&&c===null)throw Error(i(528,""));return b}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=wo(a),a=qr(f).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function bo(n){return'href="'+bt(n)+'"'}function Ql(n){return'link[rel="stylesheet"]['+n+"]"}function Kv(n){return M({},n,{"data-precedence":n.precedence,precedence:null})}function UE(n,r,a,c){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=n.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),rn(r,"link",a),yt(r),n.head.appendChild(r))}function wo(n){return'[src="'+bt(n)+'"]'}function Yl(n){return"script[async]"+n}function Qv(n,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=n.querySelector('style[data-href~="'+bt(a.href)+'"]');if(c)return r.instance=c,yt(c),c;var f=M({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),yt(c),rn(c,"style",f),lh(c,a.precedence,n),r.instance=c;case"stylesheet":f=bo(a.href);var g=n.querySelector(Ql(f));if(g)return r.state.loading|=4,r.instance=g,yt(g),g;c=Kv(a),(f=ns.get(f))&&jm(c,f),g=(n.ownerDocument||n).createElement("link"),yt(g);var b=g;return b._p=new Promise(function(j,z){b.onload=j,b.onerror=z}),rn(g,"link",c),r.state.loading|=4,lh(g,a.precedence,n),r.instance=g;case"script":return g=wo(a.src),(f=n.querySelector(Yl(g)))?(r.instance=f,yt(f),f):(c=a,(f=ns.get(g))&&(c=M({},a),Im(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),yt(f),rn(f,"link",c),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&!(r.state.loading&4)&&(c=r.instance,r.state.loading|=4,lh(c,a.precedence,n));return r.instance}function lh(n,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,g=f,b=0;b<c.length;b++){var j=c[b];if(j.dataset.precedence===r)g=j;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(n,r.firstChild))}function jm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Im(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var ch=null;function Yv(n,r,a){if(ch===null){var c=new Map,f=ch=new Map;f.set(a,c)}else f=ch,c=f.get(a),c||(c=new Map,f.set(a,c));if(c.has(n))return c;for(c.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var g=a[f];if(!(g[zr]||g[Qt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(r)||"";b=n+b;var j=c.get(b);j?j.push(g):c.set(b,[g])}}return c}function Wv(n,r,a){n=n.ownerDocument||n,n.head.insertBefore(a,r==="title"?n.querySelector("head > title"):null)}function VE(n,r,a){if(a===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Xv(n){return!(n.type==="stylesheet"&&!(n.state.loading&3))}var Wl=null;function zE(){}function BE(n,r,a){if(Wl===null)throw Error(i(475));var c=Wl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(r.state.loading&4)){if(r.instance===null){var f=bo(a.href),g=n.querySelector(Ql(f));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=uh.bind(c),n.then(c,c)),r.state.loading|=4,r.instance=g,yt(g);return}g=n.ownerDocument||n,a=Kv(a),(f=ns.get(f))&&jm(a,f),g=g.createElement("link"),yt(g);var b=g;b._p=new Promise(function(j,z){b.onload=j,b.onerror=z}),rn(g,"link",a),r.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(r,n),(n=r.state.preload)&&!(r.state.loading&3)&&(c.count++,r=uh.bind(c),n.addEventListener("load",r),n.addEventListener("error",r))}}function qE(){if(Wl===null)throw Error(i(475));var n=Wl;return n.stylesheets&&n.count===0&&Dm(n,n.stylesheets),0<n.count?function(r){var a=setTimeout(function(){if(n.stylesheets&&Dm(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(a)}}:null}function uh(){if(this.count--,this.count===0){if(this.stylesheets)Dm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var hh=null;function Dm(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,hh=new Map,r.forEach(HE,n),hh=null,uh.call(n))}function HE(n,r){if(!(r.state.loading&4)){var a=hh.get(n);if(a)var c=a.get(null);else{a=new Map,hh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var b=f[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),c=b)}c&&a.set(null,c)}f=r.instance,b=f.getAttribute("data-precedence"),g=a.get(b)||c,g===c&&a.set(null,f),a.set(b,f),this.count++,c=uh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Xl={$$typeof:S,Provider:null,Consumer:null,_currentValue:Ie,_currentValue2:Ie,_threadCount:0};function FE(n,r,a,c,f,g,b,j){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pa(0),this.hiddenUpdates=Pa(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Zv(n,r,a,c,f,g,b,j,z,G,se,ue){return n=new FE(n,r,a,b,j,z,G,ue),r=1,g===!0&&(r|=24),g=es(3,null,null,r),n.current=g,g.stateNode=n,r=uf(),r.refCount++,n.pooledCache=r,r.refCount++,g.memoizedState={element:c,isDehydrated:a,cache:r},Ff(g),n}function Jv(n){return n?(n=Ja,n):Ja}function ex(n,r,a,c,f,g){f=Jv(f),c.context===null?c.context=f:c.pendingContext=f,c=ti(r),c.payload={element:a},g=g===void 0?null:g,g!==null&&(c.callback=g),a=ni(n,c,r),a!==null&&(bn(a,n,r),Ol(a,n,r))}function tx(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Mm(n,r){tx(n,r),(n=n.alternate)&&tx(n,r)}function nx(n){if(n.tag===13){var r=Qr(n,67108864);r!==null&&bn(r,n,67108864),Mm(n,67108864)}}var dh=!0;function GE(n,r,a,c){var f=R.T;R.T=null;var g=me.p;try{me.p=2,Om(n,r,a,c)}finally{me.p=g,R.T=f}}function $E(n,r,a,c){var f=R.T;R.T=null;var g=me.p;try{me.p=8,Om(n,r,a,c)}finally{me.p=g,R.T=f}}function Om(n,r,a,c){if(dh){var f=km(c);if(f===null)wm(n,r,c,fh,a),rx(n,c);else if(QE(f,n,r,a,c))c.stopPropagation();else if(rx(n,c),r&4&&-1<KE.indexOf(n)){for(;f!==null;){var g=Ws(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=as(g.pendingLanes);if(b!==0){var j=g;for(j.pendingLanes|=2,j.entangledLanes|=2;b;){var z=1<<31-yn(b);j.entanglements[1]|=z,b&=~z}ks(g),!(xt&6)&&(Wu=Nn()+500,Gl(0))}}break;case 13:j=Qr(g,2),j!==null&&bn(j,g,2),Ju(),Mm(g,2)}if(g=km(c),g===null&&wm(n,r,c,fh,a),g===f)break;f=g}f!==null&&c.stopPropagation()}else wm(n,r,c,null,a)}}function km(n){return n=Ba(n),Pm(n)}var fh=null;function Pm(n){if(fh=null,n=os(n),n!==null){var r=ne(n);if(r===null)n=null;else{var a=r.tag;if(a===13){if(n=ce(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return fh=n,null}function sx(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zc()){case Ut:return 2;case Kt:return 8;case Qs:case Jc:return 32;case Jo:return 268435456;default:return 32}default:return 32}}var Lm=!1,ci=null,ui=null,hi=null,Zl=new Map,Jl=new Map,di=[],KE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rx(n,r){switch(n){case"focusin":case"focusout":ci=null;break;case"dragenter":case"dragleave":ui=null;break;case"mouseover":case"mouseout":hi=null;break;case"pointerover":case"pointerout":Zl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(r.pointerId)}}function ec(n,r,a,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},r!==null&&(r=Ws(r),r!==null&&nx(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function QE(n,r,a,c,f){switch(r){case"focusin":return ci=ec(ci,n,r,a,c,f),!0;case"dragenter":return ui=ec(ui,n,r,a,c,f),!0;case"mouseover":return hi=ec(hi,n,r,a,c,f),!0;case"pointerover":var g=f.pointerId;return Zl.set(g,ec(Zl.get(g)||null,n,r,a,c,f)),!0;case"gotpointercapture":return g=f.pointerId,Jl.set(g,ec(Jl.get(g)||null,n,r,a,c,f)),!0}return!1}function ix(n){var r=os(n.target);if(r!==null){var a=ne(r);if(a!==null){if(r=a.tag,r===13){if(r=ce(a),r!==null){n.blockedOn=r,Vr(n.priority,function(){if(a.tag===13){var c=Ln(),f=Qr(a,c);f!==null&&bn(f,a,c),Mm(a,c)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function mh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=km(n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Fn=c,a.target.dispatchEvent(c),Fn=null}else return r=Ws(a),r!==null&&nx(r),n.blockedOn=a,!1;r.shift()}return!0}function ax(n,r,a){mh(n)&&a.delete(r)}function YE(){Lm=!1,ci!==null&&mh(ci)&&(ci=null),ui!==null&&mh(ui)&&(ui=null),hi!==null&&mh(hi)&&(hi=null),Zl.forEach(ax),Jl.forEach(ax)}function ph(n,r){n.blockedOn===r&&(n.blockedOn=null,Lm||(Lm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,YE)))}var gh=null;function ox(n){gh!==n&&(gh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){gh===n&&(gh=null);for(var r=0;r<n.length;r+=3){var a=n[r],c=n[r+1],f=n[r+2];if(typeof c!="function"){if(Pm(c||a)===null)continue;break}var g=Ws(a);g!==null&&(n.splice(r,3),r-=3,Sf(g,{pending:!0,data:f,method:a.method,action:c},c,f))}}))}function tc(n){function r(z){return ph(z,n)}ci!==null&&ph(ci,n),ui!==null&&ph(ui,n),hi!==null&&ph(hi,n),Zl.forEach(r),Jl.forEach(r);for(var a=0;a<di.length;a++){var c=di[a];c.blockedOn===n&&(c.blockedOn=null)}for(;0<di.length&&(a=di[0],a.blockedOn===null);)ix(a),a.blockedOn===null&&di.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var f=a[c],g=a[c+1],b=f[Vt]||null;if(typeof g=="function")b||ox(a);else if(b){var j=null;if(g&&g.hasAttribute("formAction")){if(f=g,b=g[Vt]||null)j=b.formAction;else if(Pm(f)!==null)continue}else j=b.action;typeof j=="function"?a[c+1]=j:(a.splice(c,3),c-=3),ox(a)}}}function Um(n){this._internalRoot=n}yh.prototype.render=Um.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,c=Ln();ex(a,c,n,r,null,null)},yh.prototype.unmount=Um.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;n.tag===0&&yo(),ex(n.current,2,null,n,null,null),Ju(),r[Ys]=null}};function yh(n){this._internalRoot=n}yh.prototype.unstable_scheduleHydration=function(n){if(n){var r=ru();n={blockedOn:null,target:n,priority:r};for(var a=0;a<di.length&&r!==0&&r<di[a].priority;a++);di.splice(a,0,n),a===0&&ix(n)}};var lx=e.version;if(lx!=="19.0.0")throw Error(i(527,lx,"19.0.0"));me.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=ie(r),n=n!==null?pe(n):null,n=n===null?null:n.stateNode,n};var WE={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:R,findFiberByHostInstance:os,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vh.isDisabled&&vh.supportsFiber)try{Mr=vh.inject(WE),cn=vh}catch{}}return sc.createRoot=function(n,r){if(!o(n))throw Error(i(299));var a=!1,c="",f=N0,g=S0,b=A0,j=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(j=r.unstable_transitionCallbacks)),r=Zv(n,1,!1,null,null,a,c,f,g,b,j,null),n[Ys]=r.current,bm(n.nodeType===8?n.parentNode:n),new Um(r)},sc.hydrateRoot=function(n,r,a){if(!o(n))throw Error(i(299));var c=!1,f="",g=N0,b=S0,j=A0,z=null,G=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(j=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(z=a.unstable_transitionCallbacks),a.formState!==void 0&&(G=a.formState)),r=Zv(n,1,!0,r,a??null,c,f,g,b,j,z,G),r.context=Jv(null),a=r.current,c=Ln(),f=ti(c),f.callback=null,ni(a,f,c),r.current.lanes=c,At(r,c),ks(r),n[Ys]=r.current,bm(n),new yh(r)},sc.version="19.0.0",sc}var vx;function oT(){if(vx)return Bm.exports;vx=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Bm.exports=aT(),Bm.exports}var lT=oT(),rc={},xx;function cT(){if(xx)return rc;xx=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.parse=h,rc.serialize=y;const s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,l=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function h(T,S){const A=new l,q=T.length;if(q<2)return A;const N=(S==null?void 0:S.decode)||x;let V=0;do{const P=T.indexOf("=",V);if(P===-1)break;const k=T.indexOf(";",V),F=k===-1?q:k;if(P>F){V=T.lastIndexOf(";",P-1)+1;continue}const ee=p(T,V,P),re=m(T,P,ee),L=T.slice(ee,re);if(A[L]===void 0){let E=p(T,P+1,F),R=m(T,F,E);const M=N(T.slice(E,R));A[L]=M}V=F+1}while(V<q);return A}function p(T,S,A){do{const q=T.charCodeAt(S);if(q!==32&&q!==9)return S}while(++S<A);return A}function m(T,S,A){for(;S>A;){const q=T.charCodeAt(--S);if(q!==32&&q!==9)return S+1}return A}function y(T,S,A){const q=(A==null?void 0:A.encode)||encodeURIComponent;if(!s.test(T))throw new TypeError(`argument name is invalid: ${T}`);const N=q(S);if(!e.test(N))throw new TypeError(`argument val is invalid: ${S}`);let V=T+"="+N;if(!A)return V;if(A.maxAge!==void 0){if(!Number.isInteger(A.maxAge))throw new TypeError(`option maxAge is invalid: ${A.maxAge}`);V+="; Max-Age="+A.maxAge}if(A.domain){if(!t.test(A.domain))throw new TypeError(`option domain is invalid: ${A.domain}`);V+="; Domain="+A.domain}if(A.path){if(!i.test(A.path))throw new TypeError(`option path is invalid: ${A.path}`);V+="; Path="+A.path}if(A.expires){if(!w(A.expires)||!Number.isFinite(A.expires.valueOf()))throw new TypeError(`option expires is invalid: ${A.expires}`);V+="; Expires="+A.expires.toUTCString()}if(A.httpOnly&&(V+="; HttpOnly"),A.secure&&(V+="; Secure"),A.partitioned&&(V+="; Partitioned"),A.priority)switch(typeof A.priority=="string"?A.priority.toLowerCase():void 0){case"low":V+="; Priority=Low";break;case"medium":V+="; Priority=Medium";break;case"high":V+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${A.priority}`)}if(A.sameSite)switch(typeof A.sameSite=="string"?A.sameSite.toLowerCase():A.sameSite){case!0:case"strict":V+="; SameSite=Strict";break;case"lax":V+="; SameSite=Lax";break;case"none":V+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${A.sameSite}`)}return V}function x(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function w(T){return o.call(T)==="[object Date]"}return rc}cT();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _x="popstate";function uT(s={}){function e(i,o){let{pathname:l,search:h,hash:p}=i.location;return lp("",{pathname:l,search:h,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:wc(o)}return dT(e,t,null,s)}function gt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function ps(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hT(){return Math.random().toString(36).substring(2,10)}function bx(s,e){return{usr:s.state,key:s.key,idx:e}}function lp(s,e,t=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Vo(e):e,state:t,key:e&&e.key||i||hT()}}function wc({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Vo(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function dT(s,e,t,i={}){let{window:o=document.defaultView,v5Compat:l=!1}=i,h=o.history,p="POP",m=null,y=x();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function x(){return(h.state||{idx:null}).idx}function w(){p="POP";let N=x(),V=N==null?null:N-y;y=N,m&&m({action:p,location:q.location,delta:V})}function T(N,V){p="PUSH";let P=lp(q.location,N,V);y=x()+1;let k=bx(P,y),F=q.createHref(P);try{h.pushState(k,"",F)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;o.location.assign(F)}l&&m&&m({action:p,location:q.location,delta:1})}function S(N,V){p="REPLACE";let P=lp(q.location,N,V);y=x();let k=bx(P,y),F=q.createHref(P);h.replaceState(k,"",F),l&&m&&m({action:p,location:q.location,delta:0})}function A(N){let V=o.location.origin!=="null"?o.location.origin:o.location.href,P=typeof N=="string"?N:wc(N);return P=P.replace(/ $/,"%20"),gt(V,`No window.location.(origin|href) available to create URL for href: ${P}`),new URL(P,V)}let q={get action(){return p},get location(){return s(o,h)},listen(N){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(_x,w),m=N,()=>{o.removeEventListener(_x,w),m=null}},createHref(N){return e(o,N)},createURL:A,encodeLocation(N){let V=A(N);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:T,replace:S,go(N){return h.go(N)}};return q}function db(s,e,t="/"){return fT(s,e,t,!1)}function fT(s,e,t,i){let o=typeof e=="string"?Vo(e):e,l=Ti(o.pathname||"/",t);if(l==null)return null;let h=fb(s);mT(h);let p=null;for(let m=0;p==null&&m<h.length;++m){let y=NT(l);p=ET(h[m],y,i)}return p}function fb(s,e=[],t=[],i=""){let o=(l,h,p)=>{let m={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};m.relativePath.startsWith("/")&&(gt(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let y=br([i,m.relativePath]),x=t.concat(m);l.children&&l.children.length>0&&(gt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),fb(l.children,e,x,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:bT(y,l.index),routesMeta:x})};return s.forEach((l,h)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,h);else for(let m of mb(l.path))o(l,h,m)}),e}function mb(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let h=mb(i.join("/")),p=[];return p.push(...h.map(m=>m===""?l:[l,m].join("/"))),o&&p.push(...h),p.map(m=>s.startsWith("/")&&m===""?"/":m)}function mT(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:wT(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var pT=/^:[\w-]+$/,gT=3,yT=2,vT=1,xT=10,_T=-2,wx=s=>s==="*";function bT(s,e){let t=s.split("/"),i=t.length;return t.some(wx)&&(i+=_T),e&&(i+=yT),t.filter(o=>!wx(o)).reduce((o,l)=>o+(pT.test(l)?gT:l===""?vT:xT),i)}function wT(s,e){return s.length===e.length&&s.slice(0,-1).every((i,o)=>i===e[o])?s[s.length-1]-e[e.length-1]:0}function ET(s,e,t=!1){let{routesMeta:i}=s,o={},l="/",h=[];for(let p=0;p<i.length;++p){let m=i[p],y=p===i.length-1,x=l==="/"?e:e.slice(l.length)||"/",w=Fh({path:m.relativePath,caseSensitive:m.caseSensitive,end:y},x),T=m.route;if(!w&&y&&t&&!i[i.length-1].route.index&&(w=Fh({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},x)),!w)return null;Object.assign(o,w.params),h.push({params:o,pathname:br([l,w.pathname]),pathnameBase:CT(br([l,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(l=br([l,w.pathnameBase]))}return h}function Fh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=TT(s.path,s.caseSensitive,s.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((y,{paramName:x,isOptional:w},T)=>{if(x==="*"){let A=p[T]||"";h=l.slice(0,l.length-A.length).replace(/(.)\/+$/,"$1")}const S=p[T];return w&&!S?y[x]=void 0:y[x]=(S||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:s}}function TT(s,e=!1,t=!0){ps(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,m)=>(i.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(i.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function NT(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ps(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Ti(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}function ST(s,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof s=="string"?Vo(s):s;return{pathname:t?t.startsWith("/")?t:AT(t,e):e,search:jT(i),hash:IT(o)}}function AT(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Gm(s,e,t,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function RT(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Up(s){let e=RT(s);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Vp(s,e,t,i=!1){let o;typeof s=="string"?o=Vo(s):(o={...s},gt(!o.pathname||!o.pathname.includes("?"),Gm("?","pathname","search",o)),gt(!o.pathname||!o.pathname.includes("#"),Gm("#","pathname","hash",o)),gt(!o.search||!o.search.includes("#"),Gm("#","search","hash",o)));let l=s===""||o.pathname==="",h=l?"/":o.pathname,p;if(h==null)p=t;else{let w=e.length-1;if(!i&&h.startsWith("..")){let T=h.split("/");for(;T[0]==="..";)T.shift(),w-=1;o.pathname=T.join("/")}p=w>=0?e[w]:"/"}let m=ST(o,p),y=h&&h!=="/"&&h.endsWith("/"),x=(l||h===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(y||x)&&(m.pathname+="/"),m}var br=s=>s.join("/").replace(/\/\/+/g,"/"),CT=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),jT=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,IT=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function DT(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var pb=["POST","PUT","PATCH","DELETE"];new Set(pb);var MT=["GET",...pb];new Set(MT);var zo=C.createContext(null);zo.displayName="DataRouter";var fd=C.createContext(null);fd.displayName="DataRouterState";var gb=C.createContext({isTransitioning:!1});gb.displayName="ViewTransition";var OT=C.createContext(new Map);OT.displayName="Fetchers";var kT=C.createContext(null);kT.displayName="Await";var vs=C.createContext(null);vs.displayName="Navigation";var kc=C.createContext(null);kc.displayName="Location";var xs=C.createContext({outlet:null,matches:[],isDataRoute:!1});xs.displayName="Route";var zp=C.createContext(null);zp.displayName="RouteError";function PT(s,{relative:e}={}){gt(Bo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=C.useContext(vs),{hash:o,pathname:l,search:h}=Pc(s,{relative:e}),p=l;return t!=="/"&&(p=l==="/"?t:br([t,l])),i.createHref({pathname:p,search:h,hash:o})}function Bo(){return C.useContext(kc)!=null}function Mi(){return gt(Bo(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(kc).location}var yb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vb(s){C.useContext(vs).static||C.useLayoutEffect(s)}function jt(){let{isDataRoute:s}=C.useContext(xs);return s?YT():LT()}function LT(){gt(Bo(),"useNavigate() may be used only in the context of a <Router> component.");let s=C.useContext(zo),{basename:e,navigator:t}=C.useContext(vs),{matches:i}=C.useContext(xs),{pathname:o}=Mi(),l=JSON.stringify(Up(i)),h=C.useRef(!1);return vb(()=>{h.current=!0}),C.useCallback((m,y={})=>{if(ps(h.current,yb),!h.current)return;if(typeof m=="number"){t.go(m);return}let x=Vp(m,JSON.parse(l),o,y.relative==="path");s==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:br([e,x.pathname])),(y.replace?t.replace:t.push)(x,y.state,y)},[e,t,l,o,s])}C.createContext(null);function Bp(){let{matches:s}=C.useContext(xs),e=s[s.length-1];return e?e.params:{}}function Pc(s,{relative:e}={}){let{matches:t}=C.useContext(xs),{pathname:i}=Mi(),o=JSON.stringify(Up(t));return C.useMemo(()=>Vp(s,JSON.parse(o),i,e==="path"),[s,o,i,e])}function UT(s,e){return xb(s,e)}function xb(s,e,t,i){var P;gt(Bo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:l}=C.useContext(vs),{matches:h}=C.useContext(xs),p=h[h.length-1],m=p?p.params:{},y=p?p.pathname:"/",x=p?p.pathnameBase:"/",w=p&&p.route;{let k=w&&w.path||"";_b(y,!w||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let T=Mi(),S;if(e){let k=typeof e=="string"?Vo(e):e;gt(x==="/"||((P=k.pathname)==null?void 0:P.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${k.pathname}" was given in the \`location\` prop.`),S=k}else S=T;let A=S.pathname||"/",q=A;if(x!=="/"){let k=x.replace(/^\//,"").split("/");q="/"+A.replace(/^\//,"").split("/").slice(k.length).join("/")}let N=!l&&t&&t.matches&&t.matches.length>0?t.matches:db(s,{pathname:q});ps(w||N!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),ps(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=HT(N&&N.map(k=>Object.assign({},k,{params:Object.assign({},m,k.params),pathname:br([x,o.encodeLocation?o.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?x:br([x,o.encodeLocation?o.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),h,t,i);return e&&V?C.createElement(kc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},V):V}function VT(){let s=QT(),e=DT(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:l},"ErrorBoundary")," or"," ",C.createElement("code",{style:l},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:o},t):null,h)}var zT=C.createElement(VT,null),BT=class extends C.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?C.createElement(xs.Provider,{value:this.props.routeContext},C.createElement(zp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function qT({routeContext:s,match:e,children:t}){let i=C.useContext(zo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(xs.Provider,{value:s},t)}function HT(s,e=[],t=null,i=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let o=s,l=t==null?void 0:t.errors;if(l!=null){let m=o.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);gt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let h=!1,p=-1;if(t)for(let m=0;m<o.length;m++){let y=o[m];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=m),y.route.id){let{loaderData:x,errors:w}=t,T=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||T){h=!0,p>=0?o=o.slice(0,p+1):o=[o[0]];break}}}return o.reduceRight((m,y,x)=>{let w,T=!1,S=null,A=null;t&&(w=l&&y.route.id?l[y.route.id]:void 0,S=y.route.errorElement||zT,h&&(p<0&&x===0?(_b("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,A=null):p===x&&(T=!0,A=y.route.hydrateFallbackElement||null)));let q=e.concat(o.slice(0,x+1)),N=()=>{let V;return w?V=S:T?V=A:y.route.Component?V=C.createElement(y.route.Component,null):y.route.element?V=y.route.element:V=m,C.createElement(qT,{match:y,routeContext:{outlet:m,matches:q,isDataRoute:t!=null},children:V})};return t&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?C.createElement(BT,{location:t.location,revalidation:t.revalidation,component:S,error:w,children:N(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):N()},null)}function qp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FT(s){let e=C.useContext(zo);return gt(e,qp(s)),e}function GT(s){let e=C.useContext(fd);return gt(e,qp(s)),e}function $T(s){let e=C.useContext(xs);return gt(e,qp(s)),e}function Hp(s){let e=$T(s),t=e.matches[e.matches.length-1];return gt(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function KT(){return Hp("useRouteId")}function QT(){var i;let s=C.useContext(zp),e=GT("useRouteError"),t=Hp("useRouteError");return s!==void 0?s:(i=e.errors)==null?void 0:i[t]}function YT(){let{router:s}=FT("useNavigate"),e=Hp("useNavigate"),t=C.useRef(!1);return vb(()=>{t.current=!0}),C.useCallback(async(o,l={})=>{ps(t.current,yb),t.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...l}))},[s,e])}var Ex={};function _b(s,e,t){!e&&!Ex[s]&&(Ex[s]=!0,ps(!1,t))}C.memo(WT);function WT({routes:s,future:e,state:t}){return xb(s,void 0,t,e)}function XT({to:s,replace:e,state:t,relative:i}){gt(Bo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=C.useContext(vs);ps(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=C.useContext(xs),{pathname:h}=Mi(),p=jt(),m=Vp(s,Up(l),h,i==="path"),y=JSON.stringify(m);return C.useEffect(()=>{p(JSON.parse(y),{replace:e,state:t,relative:i})},[p,y,i,e,t]),null}function st(s){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZT({basename:s="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:l=!1}){gt(!Bo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=s.replace(/^\/*/,"/"),p=C.useMemo(()=>({basename:h,navigator:o,static:l,future:{}}),[h,o,l]);typeof t=="string"&&(t=Vo(t));let{pathname:m="/",search:y="",hash:x="",state:w=null,key:T="default"}=t,S=C.useMemo(()=>{let A=Ti(m,h);return A==null?null:{location:{pathname:A,search:y,hash:x,state:w,key:T},navigationType:i}},[h,m,y,x,w,T,i]);return ps(S!=null,`<Router basename="${h}"> is not able to match the URL "${m}${y}${x}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:C.createElement(vs.Provider,{value:p},C.createElement(kc.Provider,{children:e,value:S}))}function JT({children:s,location:e}){return UT(cp(s),e)}function cp(s,e=[]){let t=[];return C.Children.forEach(s,(i,o)=>{if(!C.isValidElement(i))return;let l=[...e,o];if(i.type===C.Fragment){t.push.apply(t,cp(i.props.children,l));return}gt(i.type===st,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=cp(i.props.children,l)),t.push(h)}),t}var Ih="get",Dh="application/x-www-form-urlencoded";function md(s){return s!=null&&typeof s.tagName=="string"}function eN(s){return md(s)&&s.tagName.toLowerCase()==="button"}function tN(s){return md(s)&&s.tagName.toLowerCase()==="form"}function nN(s){return md(s)&&s.tagName.toLowerCase()==="input"}function sN(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function rN(s,e){return s.button===0&&(!e||e==="_self")&&!sN(s)}var xh=null;function iN(){if(xh===null)try{new FormData(document.createElement("form"),0),xh=!1}catch{xh=!0}return xh}var aN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $m(s){return s!=null&&!aN.has(s)?(ps(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Dh}"`),null):s}function oN(s,e){let t,i,o,l,h;if(tN(s)){let p=s.getAttribute("action");i=p?Ti(p,e):null,t=s.getAttribute("method")||Ih,o=$m(s.getAttribute("enctype"))||Dh,l=new FormData(s)}else if(eN(s)||nN(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=s.getAttribute("formaction")||p.getAttribute("action");if(i=m?Ti(m,e):null,t=s.getAttribute("formmethod")||p.getAttribute("method")||Ih,o=$m(s.getAttribute("formenctype"))||$m(p.getAttribute("enctype"))||Dh,l=new FormData(p,s),!iN()){let{name:y,type:x,value:w}=s;if(x==="image"){let T=y?`${y}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else y&&l.append(y,w)}}else{if(md(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ih,i=null,o=Dh,h=s}return l&&o==="text/plain"&&(h=l,l=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:l,body:h}}function Fp(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}async function lN(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cN(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function uN(s,e,t){let i=await Promise.all(s.map(async o=>{let l=e.routes[o.route.id];if(l){let h=await lN(l,t);return h.links?h.links():[]}return[]}));return mN(i.flat(1).filter(cN).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Tx(s,e,t,i,o,l){let h=(m,y)=>t[y]?m.route.id!==t[y].route.id:!0,p=(m,y)=>{var x;return t[y].pathname!==m.pathname||((x=t[y].route.path)==null?void 0:x.endsWith("*"))&&t[y].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,y)=>h(m,y)||p(m,y)):l==="data"?e.filter((m,y)=>{var w;let x=i.routes[m.route.id];if(!x||!x.hasLoader)return!1;if(h(m,y)||p(m,y))return!0;if(m.route.shouldRevalidate){let T=m.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(s,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function hN(s,e){return dN(s.map(t=>{let i=e.routes[t.route.id];if(!i)return[];let o=[i.module];return i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function dN(s){return[...new Set(s)]}function fN(s){let e={},t=Object.keys(s).sort();for(let i of t)e[i]=s[i];return e}function mN(s,e){let t=new Set;return new Set(e),s.reduce((i,o)=>{let l=JSON.stringify(fN(o));return t.has(l)||(t.add(l),i.push({key:l,link:o})),i},[])}function pN(s){let e=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function gN(){let s=C.useContext(zo);return Fp(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function yN(){let s=C.useContext(fd);return Fp(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Gp=C.createContext(void 0);Gp.displayName="FrameworkContext";function bb(){let s=C.useContext(Gp);return Fp(s,"You must render this element inside a <HydratedRouter> element"),s}function vN(s,e){let t=C.useContext(Gp),[i,o]=C.useState(!1),[l,h]=C.useState(!1),{onFocus:p,onBlur:m,onMouseEnter:y,onMouseLeave:x,onTouchStart:w}=e,T=C.useRef(null);C.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let q=V=>{V.forEach(P=>{h(P.isIntersecting)})},N=new IntersectionObserver(q,{threshold:.5});return T.current&&N.observe(T.current),()=>{N.disconnect()}}},[s]),C.useEffect(()=>{if(i){let q=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(q)}}},[i]);let S=()=>{o(!0)},A=()=>{o(!1),h(!1)};return t?s!=="intent"?[l,T,{}]:[l,T,{onFocus:ic(p,S),onBlur:ic(m,A),onMouseEnter:ic(y,S),onMouseLeave:ic(x,A),onTouchStart:ic(w,S)}]:[!1,T,{}]}function ic(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function xN({page:s,...e}){let{router:t}=gN(),i=C.useMemo(()=>db(t.routes,s,t.basename),[t.routes,s,t.basename]);return i?C.createElement(bN,{page:s,matches:i,...e}):null}function _N(s){let{manifest:e,routeModules:t}=bb(),[i,o]=C.useState([]);return C.useEffect(()=>{let l=!1;return uN(s,e,t).then(h=>{l||o(h)}),()=>{l=!0}},[s,e,t]),i}function bN({page:s,matches:e,...t}){let i=Mi(),{manifest:o,routeModules:l}=bb(),{loaderData:h,matches:p}=yN(),m=C.useMemo(()=>Tx(s,e,p,o,i,"data"),[s,e,p,o,i]),y=C.useMemo(()=>Tx(s,e,p,o,i,"assets"),[s,e,p,o,i]),x=C.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let S=new Set,A=!1;if(e.forEach(N=>{var P;let V=o.routes[N.route.id];!V||!V.hasLoader||(!m.some(k=>k.route.id===N.route.id)&&N.route.id in h&&((P=l[N.route.id])!=null&&P.shouldRevalidate)||V.hasClientLoader?A=!0:S.add(N.route.id))}),S.size===0)return[];let q=pN(s);return A&&S.size>0&&q.searchParams.set("_routes",e.filter(N=>S.has(N.route.id)).map(N=>N.route.id).join(",")),[q.pathname+q.search]},[h,i,o,m,e,s,l]),w=C.useMemo(()=>hN(y,o),[y,o]),T=_N(y);return C.createElement(C.Fragment,null,x.map(S=>C.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),w.map(S=>C.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),T.map(({key:S,link:A})=>C.createElement("link",{key:S,...A})))}function wN(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var wb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wb&&(window.__reactRouterVersion="7.1.5")}catch{}function EN({basename:s,children:e,window:t}){let i=C.useRef();i.current==null&&(i.current=uT({window:t,v5Compat:!0}));let o=i.current,[l,h]=C.useState({action:o.action,location:o.location}),p=C.useCallback(m=>{C.startTransition(()=>h(m))},[h]);return C.useLayoutEffect(()=>o.listen(p),[o,p]),C.createElement(ZT,{basename:s,children:e,location:l.location,navigationType:l.action,navigator:o})}var Eb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ft=C.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:l,replace:h,state:p,target:m,to:y,preventScrollReset:x,viewTransition:w,...T},S){let{basename:A}=C.useContext(vs),q=typeof y=="string"&&Eb.test(y),N,V=!1;if(typeof y=="string"&&q&&(N=y,wb))try{let R=new URL(window.location.href),M=y.startsWith("//")?new URL(R.protocol+y):new URL(y),B=Ti(M.pathname,A);M.origin===R.origin&&B!=null?y=B+M.search+M.hash:V=!0}catch{ps(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let P=PT(y,{relative:o}),[k,F,ee]=vN(i,T),re=AN(y,{replace:h,state:p,target:m,preventScrollReset:x,relative:o,viewTransition:w});function L(R){e&&e(R),R.defaultPrevented||re(R)}let E=C.createElement("a",{...T,...ee,href:N||P,onClick:V||l?e:L,ref:wN(S,F),target:m,"data-discover":!q&&t==="render"?"true":void 0});return k&&!q?C.createElement(C.Fragment,null,E,C.createElement(xN,{page:P})):E});Ft.displayName="Link";var TN=C.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:l,to:h,viewTransition:p,children:m,...y},x){let w=Pc(h,{relative:y.relative}),T=Mi(),S=C.useContext(fd),{navigator:A,basename:q}=C.useContext(vs),N=S!=null&&DN(w)&&p===!0,V=A.encodeLocation?A.encodeLocation(w).pathname:w.pathname,P=T.pathname,k=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(P=P.toLowerCase(),k=k?k.toLowerCase():null,V=V.toLowerCase()),k&&q&&(k=Ti(k,q)||k);const F=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let ee=P===V||!o&&P.startsWith(V)&&P.charAt(F)==="/",re=k!=null&&(k===V||!o&&k.startsWith(V)&&k.charAt(V.length)==="/"),L={isActive:ee,isPending:re,isTransitioning:N},E=ee?e:void 0,R;typeof i=="function"?R=i(L):R=[i,ee?"active":null,re?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(L):l;return C.createElement(Ft,{...y,"aria-current":E,className:R,ref:x,style:M,to:h,viewTransition:p},typeof m=="function"?m(L):m)});TN.displayName="NavLink";var NN=C.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:l,method:h=Ih,action:p,onSubmit:m,relative:y,preventScrollReset:x,viewTransition:w,...T},S)=>{let A=jN(),q=IN(p,{relative:y}),N=h.toLowerCase()==="get"?"get":"post",V=typeof p=="string"&&Eb.test(p),P=k=>{if(m&&m(k),k.defaultPrevented)return;k.preventDefault();let F=k.nativeEvent.submitter,ee=(F==null?void 0:F.getAttribute("formmethod"))||h;A(F||k.currentTarget,{fetcherKey:e,method:ee,navigate:t,replace:o,state:l,relative:y,preventScrollReset:x,viewTransition:w})};return C.createElement("form",{ref:S,method:N,action:q,onSubmit:i?m:P,...T,"data-discover":!V&&s==="render"?"true":void 0})});NN.displayName="Form";function SN(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tb(s){let e=C.useContext(zo);return gt(e,SN(s)),e}function AN(s,{target:e,replace:t,state:i,preventScrollReset:o,relative:l,viewTransition:h}={}){let p=jt(),m=Mi(),y=Pc(s,{relative:l});return C.useCallback(x=>{if(rN(x,e)){x.preventDefault();let w=t!==void 0?t:wc(m)===wc(y);p(s,{replace:w,state:i,preventScrollReset:o,relative:l,viewTransition:h})}},[m,p,y,t,i,e,s,o,l,h])}var RN=0,CN=()=>`__${String(++RN)}__`;function jN(){let{router:s}=Tb("useSubmit"),{basename:e}=C.useContext(vs),t=KT();return C.useCallback(async(i,o={})=>{let{action:l,method:h,encType:p,formData:m,body:y}=oN(i,e);if(o.navigate===!1){let x=o.fetcherKey||CN();await s.fetch(x,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:m,body:y,formMethod:o.method||h,formEncType:o.encType||p,flushSync:o.flushSync})}else await s.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:m,body:y,formMethod:o.method||h,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,t])}function IN(s,{relative:e}={}){let{basename:t}=C.useContext(vs),i=C.useContext(xs);gt(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),l={...Pc(s||".",{relative:e})},h=Mi();if(s==null){l.search=h.search;let p=new URLSearchParams(l.search),m=p.getAll("index");if(m.some(x=>x==="")){p.delete("index"),m.filter(w=>w).forEach(w=>p.append("index",w));let x=p.toString();l.search=x?`?${x}`:""}}return(!s||s===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:br([t,l.pathname])),wc(l)}function DN(s,e={}){let t=C.useContext(gb);gt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Tb("useViewTransitionState"),o=Pc(s,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Ti(t.currentLocation.pathname,i)||t.currentLocation.pathname,h=Ti(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Fh(o.pathname,h)!=null||Fh(o.pathname,l)!=null}new TextEncoder;const MN=()=>{};var Nx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},ON=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const o=s[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=s[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=s[t++],h=s[t++],p=s[t++],m=((o&7)<<18|(l&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=s[t++],h=s[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Sb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const l=s[o],h=o+1<s.length,p=h?s[o+1]:0,m=o+2<s.length,y=m?s[o+2]:0,x=l>>2,w=(l&3)<<4|p>>4;let T=(p&15)<<2|y>>6,S=y&63;m||(S=64,h||(T=64)),i.push(t[x],t[w],t[T],t[S])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Nb(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):ON(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const l=t[s.charAt(o++)],p=o<s.length?t[s.charAt(o)]:0;++o;const y=o<s.length?t[s.charAt(o)]:64;++o;const w=o<s.length?t[s.charAt(o)]:64;if(++o,l==null||p==null||y==null||w==null)throw new kN;const T=l<<2|p>>4;if(i.push(T),y!==64){const S=p<<4&240|y>>2;if(i.push(S),w!==64){const A=y<<6&192|w;i.push(A)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class kN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PN=function(s){const e=Nb(s);return Sb.encodeByteArray(e,!0)},Gh=function(s){return PN(s).replace(/\./g,"")},Ab=function(s){try{return Sb.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=()=>LN().__FIREBASE_DEFAULTS__,VN=()=>{if(typeof process>"u"||typeof Nx>"u")return;const s=Nx.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},zN=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Ab(s[1]);return e&&JSON.parse(e)},pd=()=>{try{return MN()||UN()||VN()||zN()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Rb=s=>{var e,t;return(t=(e=pd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[s]},Cb=s=>{const e=Rb(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},jb=()=>{var s;return(s=pd())===null||s===void 0?void 0:s.config},Ib=s=>{var e;return(e=pd())===null||e===void 0?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Gh(JSON.stringify(t)),Gh(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function HN(){var s;const e=(s=pd())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GN(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function $N(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KN(){const s=gn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function QN(){return!HN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YN(){try{return typeof indexedDB=="object"}catch{return!1}}function WN(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="FirebaseError";class Gs extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=XN,Object.setPrototypeOf(this,Gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lc.prototype.create)}}class Lc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?ZN(l,i):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new Gs(o,p,i)}}function ZN(s,e){return s.replace(JN,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const JN=/\{\$([^}]+)}/g;function eS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function wa(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=s[o],h=e[o];if(Sx(l)&&Sx(h)){if(!wa(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Sx(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function uc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function hc(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function tS(s,e){const t=new nS(s,e);return t.subscribe.bind(t)}class nS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");sS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Km),o.error===void 0&&(o.error=Km),o.complete===void 0&&(o.complete=Km);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sS(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Km(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(s){return s&&s._delegate?s._delegate:s}class Ni{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new BN;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aS(e))try{this.getOrInitializeService({instanceIdentifier:ya})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=ya){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ya){return this.instances.has(e)}getOptions(e=ya){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:iS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ya){return this.component?this.component.multipleInstances?e:ya:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iS(s){return s===ya?void 0:s}function aS(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(qe||(qe={}));const lS={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},cS=qe.INFO,uS={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},hS=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=uS[e];if(o)console[o](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $p{constructor(e){this.name=e,this._logLevel=cS,this._logHandler=hS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const dS=(s,e)=>e.some(t=>s instanceof t);let Ax,Rx;function fS(){return Ax||(Ax=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mS(){return Rx||(Rx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Mb=new WeakMap,up=new WeakMap,Ob=new WeakMap,Qm=new WeakMap,Kp=new WeakMap;function pS(s){const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("success",l),s.removeEventListener("error",h)},l=()=>{t(_i(s.result)),o()},h=()=>{i(s.error),o()};s.addEventListener("success",l),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Mb.set(t,s)}).catch(()=>{}),Kp.set(e,s),e}function gS(s){if(up.has(s))return;const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",h),s.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",l),s.addEventListener("error",h),s.addEventListener("abort",h)});up.set(s,e)}let hp={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return up.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Ob.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _i(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function yS(s){hp=s(hp)}function vS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(Ym(this),e,...t);return Ob.set(i,e.sort?e.sort():[e]),_i(i)}:mS().includes(s)?function(...e){return s.apply(Ym(this),e),_i(Mb.get(this))}:function(...e){return _i(s.apply(Ym(this),e))}}function xS(s){return typeof s=="function"?vS(s):(s instanceof IDBTransaction&&gS(s),dS(s,fS())?new Proxy(s,hp):s)}function _i(s){if(s instanceof IDBRequest)return pS(s);if(Qm.has(s))return Qm.get(s);const e=xS(s);return e!==s&&(Qm.set(s,e),Kp.set(e,s)),e}const Ym=s=>Kp.get(s);function _S(s,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(s,e),p=_i(h);return i&&h.addEventListener("upgradeneeded",m=>{i(_i(h.result),m.oldVersion,m.newVersion,_i(h.transaction),m)}),t&&h.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),p.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const bS=["get","getKey","getAll","getAllKeys","count"],wS=["put","add","delete","clear"],Wm=new Map;function Cx(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Wm.get(e))return Wm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=wS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||bS.includes(t)))return;const l=async function(h,...p){const m=this.transaction(h,o?"readwrite":"readonly");let y=m.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[t](...p),o&&m.done]))[0]};return Wm.set(e,l),l}yS(s=>({...s,get:(e,t,i)=>Cx(e,t)||s.get(e,t,i),has:(e,t)=>!!Cx(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function TS(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dp="@firebase/app",jx="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr=new $p("@firebase/app"),NS="@firebase/app-compat",SS="@firebase/analytics-compat",AS="@firebase/analytics",RS="@firebase/app-check-compat",CS="@firebase/app-check",jS="@firebase/auth",IS="@firebase/auth-compat",DS="@firebase/database",MS="@firebase/data-connect",OS="@firebase/database-compat",kS="@firebase/functions",PS="@firebase/functions-compat",LS="@firebase/installations",US="@firebase/installations-compat",VS="@firebase/messaging",zS="@firebase/messaging-compat",BS="@firebase/performance",qS="@firebase/performance-compat",HS="@firebase/remote-config",FS="@firebase/remote-config-compat",GS="@firebase/storage",$S="@firebase/storage-compat",KS="@firebase/firestore",QS="@firebase/vertexai",YS="@firebase/firestore-compat",WS="firebase",XS="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="[DEFAULT]",ZS={[dp]:"fire-core",[NS]:"fire-core-compat",[AS]:"fire-analytics",[SS]:"fire-analytics-compat",[CS]:"fire-app-check",[RS]:"fire-app-check-compat",[jS]:"fire-auth",[IS]:"fire-auth-compat",[DS]:"fire-rtdb",[MS]:"fire-data-connect",[OS]:"fire-rtdb-compat",[kS]:"fire-fn",[PS]:"fire-fn-compat",[LS]:"fire-iid",[US]:"fire-iid-compat",[VS]:"fire-fcm",[zS]:"fire-fcm-compat",[BS]:"fire-perf",[qS]:"fire-perf-compat",[HS]:"fire-rc",[FS]:"fire-rc-compat",[GS]:"fire-gcs",[$S]:"fire-gcs-compat",[KS]:"fire-fst",[YS]:"fire-fst-compat",[QS]:"fire-vertex","fire-js":"fire-js",[WS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=new Map,JS=new Map,mp=new Map;function Ix(s,e){try{s.container.addComponent(e)}catch(t){Tr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Ea(s){const e=s.name;if(mp.has(e))return Tr.debug(`There were multiple attempts to register component ${e}.`),!1;mp.set(e,s);for(const t of $h.values())Ix(t,s);for(const t of JS.values())Ix(t,s);return!0}function gd(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Cn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bi=new Lc("app","Firebase",eA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ni("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=XS;function kb(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i=Object.assign({name:fp,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw bi.create("bad-app-name",{appName:String(o)});if(t||(t=jb()),!t)throw bi.create("no-options");const l=$h.get(o);if(l){if(wa(t,l.options)&&wa(i,l.config))return l;throw bi.create("duplicate-app",{appName:o})}const h=new oS(o);for(const m of mp.values())h.addComponent(m);const p=new tA(t,i,h);return $h.set(o,p),p}function Qp(s=fp){const e=$h.get(s);if(!e&&s===fp&&jb())return kb();if(!e)throw bi.create("no-app",{appName:s});return e}function Us(s,e,t){var i;let o=(i=ZS[s])!==null&&i!==void 0?i:s;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tr.warn(p.join(" "));return}Ea(new Ni(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="firebase-heartbeat-database",sA=1,Ec="firebase-heartbeat-store";let Xm=null;function Pb(){return Xm||(Xm=_S(nA,sA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Ec)}catch(t){console.warn(t)}}}}).catch(s=>{throw bi.create("idb-open",{originalErrorMessage:s.message})})),Xm}async function rA(s){try{const t=(await Pb()).transaction(Ec),i=await t.objectStore(Ec).get(Lb(s));return await t.done,i}catch(e){if(e instanceof Gs)Tr.warn(e.message);else{const t=bi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Tr.warn(t.message)}}}async function Dx(s,e){try{const i=(await Pb()).transaction(Ec,"readwrite");await i.objectStore(Ec).put(e,Lb(s)),await i.done}catch(t){if(t instanceof Gs)Tr.warn(t.message);else{const i=bi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Tr.warn(i.message)}}}function Lb(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=1024,aA=30;class oA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new cA(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Mx();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>aA){const h=uA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Tr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Mx(),{heartbeatsToSend:i,unsentEntries:o}=lA(this._heartbeatsCache.heartbeats),l=Gh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Tr.warn(t),""}}}function Mx(){return new Date().toISOString().substring(0,10)}function lA(s,e=iA){const t=[];let i=s.slice();for(const o of s){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Ox(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Ox(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class cA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YN()?WN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await rA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Dx(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Dx(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Ox(s){return Gh(JSON.stringify({version:2,heartbeats:s})).length}function uA(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(s){Ea(new Ni("platform-logger",e=>new ES(e),"PRIVATE")),Ea(new Ni("heartbeat",e=>new oA(e),"PRIVATE")),Us(dp,jx,s),Us(dp,jx,"esm2017"),Us("fire-js","")}hA("");var dA="firebase",fA="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Us(dA,fA,"app");function Yp(s,e){var t={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&e.indexOf(i)<0&&(t[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(s);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(s,i[o])&&(t[i[o]]=s[i[o]]);return t}function Ub(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mA=Ub,Vb=new Lc("auth","Firebase",Ub());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=new $p("@firebase/auth");function pA(s,...e){Kh.logLevel<=qe.WARN&&Kh.warn(`Auth (${Ca}): ${s}`,...e)}function Mh(s,...e){Kh.logLevel<=qe.ERROR&&Kh.error(`Auth (${Ca}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(s,...e){throw Xp(s,...e)}function ms(s,...e){return Xp(s,...e)}function Wp(s,e,t){const i=Object.assign(Object.assign({},mA()),{[e]:t});return new Lc("auth","Firebase",i).create(e,{appName:s.name})}function wr(s){return Wp(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gA(s,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ss(s,"argument-error"),Wp(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xp(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return Vb.create(s,...e)}function Ce(s,e,...t){if(!s)throw Xp(e,...t)}function xr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Mh(e),new Error(e)}function Nr(s,e){s||xr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function yA(){return kx()==="http:"||kx()==="https:"}function kx(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yA()||GN()||"connection"in navigator)?navigator.onLine:!0}function xA(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Nr(t>e,"Short delay should be less than long delay!"),this.isMobile=qN()||$N()}get(){return vA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(s,e){Nr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wA=new Vc(3e4,6e4);function Rr(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function Cr(s,e,t,i,o={}){return Bb(s,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const p=Uc(Object.assign({key:s.config.apiKey},h)).slice(1),m=await s._getAdditionalHeaders();m["Content-Type"]="application/json",s.languageCode&&(m["X-Firebase-Locale"]=s.languageCode);const y=Object.assign({method:e,headers:m},l);return FN()||(y.referrerPolicy="no-referrer"),zb.fetch()(await qb(s,s.config.apiHost,t,p),y)})}async function Bb(s,e,t){s._canInitEmulator=!1;const i=Object.assign(Object.assign({},_A),e);try{const o=new TA(s),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw _h(s,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const p=l.ok?h.errorMessage:h.error.message,[m,y]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw _h(s,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw _h(s,"email-already-in-use",h);if(m==="USER_DISABLED")throw _h(s,"user-disabled",h);const x=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Wp(s,x,y);ss(s,x)}}catch(o){if(o instanceof Gs)throw o;ss(s,"network-request-failed",{message:String(o)})}}async function zc(s,e,t,i,o={}){const l=await Cr(s,e,t,i,o);return"mfaPendingCredential"in l&&ss(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function qb(s,e,t,i){const o=`${e}${t}?${i}`,l=s,h=l.config.emulator?Zp(s.config,o):`${s.config.apiScheme}://${o}`;return bA.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function EA(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class TA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ms(this.auth,"network-request-failed")),wA.get())})}}function _h(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=ms(s,e,i);return o.customData._tokenResponse=t,o}function Px(s){return s!==void 0&&s.enterprise!==void 0}class NA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return EA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SA(s,e){return Cr(s,"GET","/v2/recaptchaConfig",Rr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AA(s,e){return Cr(s,"POST","/v1/accounts:delete",e)}async function Qh(s,e){return Cr(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RA(s,e=!1){const t=mt(s),i=await t.getIdToken(e),o=Jp(i);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:gc(Zm(o.auth_time)),issuedAtTime:gc(Zm(o.iat)),expirationTime:gc(Zm(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Zm(s){return Number(s)*1e3}function Jp(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return Mh("JWT malformed, contained fewer than 3 sections"),null;try{const o=Ab(t);return o?JSON.parse(o):(Mh("Failed to decode base64 JWT payload"),null)}catch(o){return Mh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Lx(s){const e=Jp(s);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tc(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Gs&&CA(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function CA({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gc(this.lastLoginAt),this.creationTime=gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yh(s){var e;const t=s.auth,i=await s.getIdToken(),o=await Tc(s,Qh(t,{idToken:i}));Ce(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];s._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Hb(l.providerUserInfo):[],p=DA(s.providerData,h),m=s.isAnonymous,y=!(s.email&&l.passwordHash)&&!(p!=null&&p.length),x=m?y:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new gp(l.createdAt,l.lastLoginAt),isAnonymous:x};Object.assign(s,w)}async function IA(s){const e=mt(s);await Yh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DA(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Hb(s){return s.map(e=>{var{providerId:t}=e,i=Yp(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(s,e){const t=await Bb(s,{},async()=>{const i=Uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=s.config,h=await qb(s,o,"/v1/token",`key=${l}`),p=await s._getAdditionalHeaders();return p["Content-Type"]="application/x-www-form-urlencoded",zb.fetch()(h,{method:"POST",headers:p,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function OA(s,e){return Cr(s,"POST","/v2/accounts:revokeToken",Rr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Lx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=Lx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await MA(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Ao;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ce(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ce(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ao,this.toJSON())}_performRefresh(){return xr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(s,e){Ce(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class fs{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Yp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new gp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Tc(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return RA(this,e)}reload(){return IA(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Yh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cn(this.auth.app))return Promise.reject(wr(this.auth));const e=await this.getIdToken();return await Tc(this,AA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,p,m,y,x;const w=(i=t.displayName)!==null&&i!==void 0?i:void 0,T=(o=t.email)!==null&&o!==void 0?o:void 0,S=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,A=(h=t.photoURL)!==null&&h!==void 0?h:void 0,q=(p=t.tenantId)!==null&&p!==void 0?p:void 0,N=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,V=(y=t.createdAt)!==null&&y!==void 0?y:void 0,P=(x=t.lastLoginAt)!==null&&x!==void 0?x:void 0,{uid:k,emailVerified:F,isAnonymous:ee,providerData:re,stsTokenManager:L}=t;Ce(k&&L,e,"internal-error");const E=Ao.fromJSON(this.name,L);Ce(typeof k=="string",e,"internal-error"),mi(w,e.name),mi(T,e.name),Ce(typeof F=="boolean",e,"internal-error"),Ce(typeof ee=="boolean",e,"internal-error"),mi(S,e.name),mi(A,e.name),mi(q,e.name),mi(N,e.name),mi(V,e.name),mi(P,e.name);const R=new fs({uid:k,auth:e,email:T,emailVerified:F,displayName:w,isAnonymous:ee,photoURL:A,phoneNumber:S,tenantId:q,stsTokenManager:E,createdAt:V,lastLoginAt:P});return re&&Array.isArray(re)&&(R.providerData=re.map(M=>Object.assign({},M))),N&&(R._redirectEventId=N),R}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ao;o.updateFromServerResponse(t);const l=new fs({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Yh(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Hb(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new Ao;p.updateFromIdToken(i);const m=new fs({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new gp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,y),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=new Map;function _r(s){Nr(s instanceof Function,"Expected a class definition");let e=Ux.get(s);return e?(Nr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Ux.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Fb.type="NONE";const Vx=Fb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(s,e,t){return`firebase:${s}:${e}:${t}`}class Ro{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Oh(this.userKey,o.apiKey,l),this.fullPersistenceKey=Oh("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Qh(this.auth,{idToken:e}).catch(()=>{});return t?fs._fromGetAccountInfoResponse(this.auth,t,e):null}return fs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ro(_r(Vx),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||_r(Vx);const h=Oh(i,e.config.apiKey,e.name);let p=null;for(const y of t)try{const x=await y._get(h);if(x){let w;if(typeof x=="string"){const T=await Qh(e,{idToken:x}).catch(()=>{});if(!T)break;w=await fs._fromGetAccountInfoResponse(e,T,x)}else w=fs._fromJSON(e,x);y!==l&&(p=w),l=y;break}}catch{}const m=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Ro(l,e,i):(l=m[0],p&&await l._set(h,p.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new Ro(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Qb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Gb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Wb(e))return"Blackberry";if(Xb(e))return"Webos";if($b(e))return"Safari";if((e.includes("chrome/")||Kb(e))&&!e.includes("edge/"))return"Chrome";if(Yb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Gb(s=gn()){return/firefox\//i.test(s)}function $b(s=gn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kb(s=gn()){return/crios\//i.test(s)}function Qb(s=gn()){return/iemobile/i.test(s)}function Yb(s=gn()){return/android/i.test(s)}function Wb(s=gn()){return/blackberry/i.test(s)}function Xb(s=gn()){return/webos/i.test(s)}function eg(s=gn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function kA(s=gn()){var e;return eg(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function PA(){return KN()&&document.documentMode===10}function Zb(s=gn()){return eg(s)||Yb(s)||Xb(s)||Wb(s)||/windows phone/i.test(s)||Qb(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(s,e=[]){let t;switch(s){case"Browser":t=zx(gn());break;case"Worker":t=`${zx(gn())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ca}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,p)=>{try{const m=e(l);h(m)}catch(m){p(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UA(s,e={}){return Cr(s,"GET","/v2/passwordPolicy",Rr(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=6;class zA{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:VA,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,p;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(h=m.containsNumericCharacter)!==null&&h!==void 0?h:!0),m.isValid&&(m.isValid=(p=m.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bx(this),this.idTokenSubscription=new Bx(this),this.beforeStateQueue=new LA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_r(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Ro.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Qh(this,{idToken:e}),i=await fs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Cn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,p=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!h||h===p)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cn(this.app))return Promise.reject(wr(this));const t=e?mt(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cn(this.app)?Promise.reject(wr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cn(this.app)?Promise.reject(wr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UA(this),t=new zA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await OA(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_r(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await Ro.create(this,[_r(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(p,this,"internal-error"),p.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{h=!0,m()}}else{const m=e.addObserver(t);return()=>{h=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Jb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&pA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function jr(s){return mt(s)}class Bx{constructor(e){this.auth=e,this.observer=null,this.addObserver=tS(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qA(s){yd=s}function e1(s){return yd.loadJS(s)}function HA(){return yd.recaptchaEnterpriseScript}function FA(){return yd.gapiScript}function GA(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class $A{constructor(){this.enterprise=new KA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class KA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const QA="recaptcha-enterprise",t1="NO_RECAPTCHA";class YA{constructor(e){this.type=QA,this.auth=jr(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,p)=>{SA(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new NA(m);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,h(y.siteKey)}}).catch(m=>{p(m)})})}function o(l,h,p){const m=window.grecaptcha;Px(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(y=>{h(y)}).catch(()=>{h(t1)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $A().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{i(this.auth).then(p=>{if(!t&&Px(window.grecaptcha))o(p,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let m=HA();m.length!==0&&(m+=p),e1(m).then(()=>{o(p,l,h)}).catch(y=>{h(y)})}}).catch(p=>{h(p)})})}}async function qx(s,e,t,i=!1,o=!1){const l=new YA(s);let h;if(o)h=t1;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const p=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const m=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const m=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Wh(s,e,t,i,o){var l;if(!((l=s._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await qx(s,e,t,t==="getOobCode");return i(s,h)}else return i(s,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await qx(s,e,t,t==="getOobCode");return i(s,p)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(s,e){const t=gd(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(wa(l,e??{}))return o;ss(o,"already-initialized")}return t.initialize({options:e})}function XA(s,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(_r);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function ZA(s,e,t){const i=jr(s);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=n1(e),{host:h,port:p}=JA(e),m=p===null?"":`:${p}`,y={url:`${l}//${h}${m}/`},x=Object.freeze({host:h,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce(wa(y,i.config.emulator)&&wa(x,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=x,i.settings.appVerificationDisabledForTesting=!0,eR()}function n1(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function JA(s){const e=n1(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Hx(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Hx(h)}}}function Hx(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function eR(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xr("not implemented")}_getIdTokenResponse(e){return xr("not implemented")}_linkToIdToken(e,t){return xr("not implemented")}_getReauthenticationResolver(e){return xr("not implemented")}}async function tR(s,e){return Cr(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(s,e){return zc(s,"POST","/v1/accounts:signInWithPassword",Rr(s,e))}async function sR(s,e){return Cr(s,"POST","/v1/accounts:sendOobCode",Rr(s,e))}async function rR(s,e){return sR(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(s,e){return zc(s,"POST","/v1/accounts:signInWithEmailLink",Rr(s,e))}async function aR(s,e){return zc(s,"POST","/v1/accounts:signInWithEmailLink",Rr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends tg{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Nc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Nc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wh(e,t,"signInWithPassword",nR);case"emailLink":return iR(e,{email:this._email,oobCode:this._password});default:ss(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wh(e,i,"signUpPassword",tR);case"emailLink":return aR(e,{idToken:t,email:this._email,oobCode:this._password});default:ss(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(s,e){return zc(s,"POST","/v1/accounts:signInWithIdp",Rr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="http://localhost";class Ta extends tg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ta(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ss("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Yp(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new Ta(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Co(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Co(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Co(e,t)}buildRequest(){const e={requestUri:oR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Uc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cR(s){const e=uc(hc(s)).link,t=e?uc(hc(e)).deep_link_id:null,i=uc(hc(s)).deep_link_id;return(i?uc(hc(i)).link:null)||i||t||e||s}class ng{constructor(e){var t,i,o,l,h,p;const m=uc(hc(e)),y=(t=m.apiKey)!==null&&t!==void 0?t:null,x=(i=m.oobCode)!==null&&i!==void 0?i:null,w=lR((o=m.mode)!==null&&o!==void 0?o:null);Ce(y&&x&&w,"argument-error"),this.apiKey=y,this.operation=w,this.code=x,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=m.lang)!==null&&h!==void 0?h:null,this.tenantId=(p=m.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const t=cR(e);try{return new ng(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.providerId=qo.PROVIDER_ID}static credential(e,t){return Nc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=ng.parseLink(t);return Ce(i,"argument-error"),Nc._fromEmailAndCode(e,i.code,i.tenantId)}}qo.PROVIDER_ID="password";qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends sg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Bc{constructor(){super("facebook.com")}static credential(e){return Ta._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.FACEBOOK_SIGN_IN_METHOD="facebook.com";pi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Bc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ta._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ds.credential(t,i)}catch{return null}}}ds.GOOGLE_SIGN_IN_METHOD="google.com";ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Bc{constructor(){super("github.com")}static credential(e){return Ta._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch{return null}}}gi.GITHUB_SIGN_IN_METHOD="github.com";gi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Bc{constructor(){super("twitter.com")}static credential(e,t){return Ta._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return yi.credential(t,i)}catch{return null}}}yi.TWITTER_SIGN_IN_METHOD="twitter.com";yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(s,e){return zc(s,"POST","/v1/accounts:signUp",Rr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await fs._fromIdTokenResponse(e,i,o),h=Fx(i);return new Na({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Fx(i);return new Na({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Fx(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends Gs{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Xh.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Xh(e,t,i,o)}}function s1(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Xh._fromErrorAndOperation(s,l,e,i):l})}async function hR(s,e,t=!1){const i=await Tc(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Na._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(s,e,t=!1){const{auth:i}=s;if(Cn(i.app))return Promise.reject(wr(i));const o="reauthenticate";try{const l=await Tc(s,s1(i,o,e,s),t);Ce(l.idToken,i,"internal-error");const h=Jp(l.idToken);Ce(h,i,"internal-error");const{sub:p}=h;return Ce(s.uid===p,i,"user-mismatch"),Na._forOperation(s,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ss(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(s,e,t=!1){if(Cn(s.app))return Promise.reject(wr(s));const i="signIn",o=await s1(s,i,e),l=await Na._fromIdTokenResponse(s,i,o);return t||await s._updateCurrentUser(l.user),l}async function fR(s,e){return r1(jr(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i1(s){const e=jr(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function mR(s,e,t){const i=jr(s);await Wh(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",rR)}async function a1(s,e,t){if(Cn(s.app))return Promise.reject(wr(s));const i=jr(s),h=await Wh(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uR).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&i1(s),m}),p=await Na._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(p.user),p}function o1(s,e,t){return Cn(s.app)?Promise.reject(wr(s)):fR(mt(s),qo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&i1(s),i})}function pR(s,e,t,i){return mt(s).onIdTokenChanged(e,t,i)}function gR(s,e,t){return mt(s).beforeAuthStateChanged(e,t)}function yR(s,e,t,i){return mt(s).onAuthStateChanged(e,t,i)}function rg(s){return mt(s).signOut()}const Zh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zh,"1"),this.storage.removeItem(Zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=1e3,xR=10;class c1 extends l1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Zb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,p,m)=>{this.notifyListeners(h,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);PA()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,xR):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},vR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}c1.type="LOCAL";const _R=c1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1 extends l1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}u1.type="SESSION";const h1=u1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new vd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(h).map(async y=>y(t.origin,l)),m=await bR(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((p,m)=>{const y=ig("",20);o.port1.start();const x=setTimeout(()=>{m(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(w){const T=w;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(x),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(T.data.response);break;default:clearTimeout(x),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(){return window}function ER(s){Vs().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(){return typeof Vs().WorkerGlobalScope<"u"&&typeof Vs().importScripts=="function"}async function TR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NR(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function SR(){return d1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="firebaseLocalStorageDb",AR=1,Jh="firebaseLocalStorage",m1="fbase_key";class qc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function xd(s,e){return s.transaction([Jh],e?"readwrite":"readonly").objectStore(Jh)}function RR(){const s=indexedDB.deleteDatabase(f1);return new qc(s).toPromise()}function yp(){const s=indexedDB.open(f1,AR);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Jh,{keyPath:m1})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Jh)?e(i):(i.close(),await RR(),e(await yp()))})})}async function Gx(s,e,t){const i=xd(s,!0).put({[m1]:e,value:t});return new qc(i).toPromise()}async function CR(s,e){const t=xd(s,!1).get(e),i=await new qc(t).toPromise();return i===void 0?null:i.value}function $x(s,e){const t=xd(s,!0).delete(e);return new qc(t).toPromise()}const jR=800,IR=3;class p1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>IR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return d1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vd._getInstance(SR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await TR(),!this.activeServiceWorker)return;this.sender=new wR(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yp();return await Gx(e,Zh,"1"),await $x(e,Zh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Gx(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>CR(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$x(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=xd(o,!1).getAll();return new qc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}p1.type="LOCAL";const DR=p1;new Vc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(s,e){return e?_r(e):(Ce(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag extends tg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Co(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Co(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Co(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function MR(s){return r1(s.auth,new ag(s),s.bypassAuthState)}function OR(s){const{auth:e,user:t}=s;return Ce(t,e,"internal-error"),dR(t,new ag(s),s.bypassAuthState)}async function kR(s){const{auth:e,user:t}=s;return Ce(t,e,"internal-error"),hR(t,new ag(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:p}=e;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MR;case"linkViaPopup":case"linkViaRedirect":return kR;case"reauthViaPopup":case"reauthViaRedirect":return OR;default:ss(this.auth,"internal-error")}}resolve(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=new Vc(2e3,1e4);async function og(s,e,t){if(Cn(s.app))return Promise.reject(ms(s,"operation-not-supported-in-this-environment"));const i=jr(s);gA(s,e,sg);const o=g1(i,t);return new va(i,"signInViaPopup",e,o).executeNotNull()}class va extends y1{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,va.currentPopupAction&&va.currentPopupAction.cancel(),va.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Nr(this.filter.length===1,"Popup operations only handle one event");const e=ig();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ms(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ms(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,va.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ms(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PR.get())};e()}}va.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="pendingRedirect",kh=new Map;class UR extends y1{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=kh.get(this.auth._key());if(!e){try{const i=await VR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}kh.set(this.auth._key(),e)}return this.bypassAuthState||kh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VR(s,e){const t=qR(e),i=BR(s);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function zR(s,e){kh.set(s._key(),e)}function BR(s){return _r(s._redirectPersistence)}function qR(s){return Oh(LR,s.config.apiKey,s.name)}async function HR(s,e,t=!1){if(Cn(s.app))return Promise.reject(wr(s));const i=jr(s),o=g1(i,e),h=await new UR(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=10*60*1e3;class GR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$R(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!v1(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ms(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kx(e))}saveEventToCache(e){this.cachedEventUids.add(Kx(e)),this.lastProcessedEventTime=Date.now()}}function Kx(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function v1({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $R(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return v1(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(s,e={}){return Cr(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YR=/^https?/;async function WR(s){if(s.config.emulator)return;const{authorizedDomains:e}=await KR(s);for(const t of e)try{if(XR(t))return}catch{}ss(s,"unauthorized-domain")}function XR(s){const e=pp(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!YR.test(t))return!1;if(QR.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=new Vc(3e4,6e4);function Qx(){const s=Vs().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function JR(s){return new Promise((e,t)=>{var i,o,l;function h(){Qx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qx(),t(ms(s,"network-request-failed"))},timeout:ZR.get()})}if(!((o=(i=Vs().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Vs().gapi)===null||l===void 0)&&l.load)h();else{const p=GA("iframefcb");return Vs()[p]=()=>{gapi.load?h():t(ms(s,"network-request-failed"))},e1(`${FA()}?onload=${p}`).catch(m=>t(m))}}).catch(e=>{throw Ph=null,e})}let Ph=null;function e4(s){return Ph=Ph||JR(s),Ph}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=new Vc(5e3,15e3),n4="__/auth/iframe",s4="emulator/auth/iframe",r4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},i4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a4(s){const e=s.config;Ce(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Zp(e,s4):`https://${s.config.authDomain}/${n4}`,i={apiKey:e.apiKey,appName:s.name,v:Ca},o=i4.get(s.config.apiHost);o&&(i.eid=o);const l=s._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Uc(i).slice(1)}`}async function o4(s){const e=await e4(s),t=Vs().gapi;return Ce(t,s,"internal-error"),e.open({where:document.body,url:a4(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r4,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=ms(s,"network-request-failed"),p=Vs().setTimeout(()=>{l(h)},t4.get());function m(){Vs().clearTimeout(p),o(i)}i.ping(m).then(m,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},c4=500,u4=600,h4="_blank",d4="http://localhost";class Yx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function f4(s,e,t,i=c4,o=u4){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const m=Object.assign(Object.assign({},l4),{width:i.toString(),height:o.toString(),top:l,left:h}),y=gn().toLowerCase();t&&(p=Kb(y)?h4:t),Gb(y)&&(e=e||d4,m.scrollbars="yes");const x=Object.entries(m).reduce((T,[S,A])=>`${T}${S}=${A},`,"");if(kA(y)&&p!=="_self")return m4(e||"",p),new Yx(null);const w=window.open(e||"",p,x);Ce(w,s,"popup-blocked");try{w.focus()}catch{}return new Yx(w)}function m4(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4="__/auth/handler",g4="emulator/auth/handler",y4=encodeURIComponent("fac");async function Wx(s,e,t,i,o,l){Ce(s.config.authDomain,s,"auth-domain-config-required"),Ce(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:Ca,eventId:o};if(e instanceof sg){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",eS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,w]of Object.entries({}))h[x]=w}if(e instanceof Bc){const x=e.getScopes().filter(w=>w!=="");x.length>0&&(h.scopes=x.join(","))}s.tenantId&&(h.tid=s.tenantId);const p=h;for(const x of Object.keys(p))p[x]===void 0&&delete p[x];const m=await s._getAppCheckToken(),y=m?`#${y4}=${encodeURIComponent(m)}`:"";return`${v4(s)}?${Uc(p).slice(1)}${y}`}function v4({config:s}){return s.emulator?Zp(s,g4):`https://${s.authDomain}/${p4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="webStorageSupport";class x4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=h1,this._completeRedirectFn=HR,this._overrideRedirectResult=zR}async _openPopup(e,t,i,o){var l;Nr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await Wx(e,t,i,pp(),o);return f4(e,h,ig())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Wx(e,t,i,pp(),o);return ER(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Nr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await o4(e),i=new GR(e);return t.register("authEvent",o=>(Ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Jm,{type:Jm},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Jm];h!==void 0&&t(!!h),ss(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=WR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Zb()||$b()||eg()}}const _4=x4;var Xx="@firebase/auth",Zx="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function E4(s){Ea(new Ni("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;Ce(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:h,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jb(s)},y=new BA(i,o,l,m);return XA(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ea(new Ni("auth-internal",e=>{const t=jr(e.getProvider("auth").getImmediate());return(i=>new b4(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Us(Xx,Zx,w4(s)),Us(Xx,Zx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=5*60,N4=Ib("authIdTokenMaxAge")||T4;let Jx=null;const S4=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>N4)return;const o=t==null?void 0:t.token;Jx!==o&&(Jx=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function x1(s=Qp()){const e=gd(s,"auth");if(e.isInitialized())return e.getImmediate();const t=WA(s,{popupRedirectResolver:_4,persistence:[DR,_R,h1]}),i=Ib("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=S4(l.toString());gR(t,h,()=>h(t.currentUser)),pR(t,p=>h(p))}}const o=Rb("auth");return o&&ZA(t,`http://${o}`),t}function A4(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}qA({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const l=ms("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",A4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});E4("Browser");var e_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wi,_1;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,E){function R(){}R.prototype=E.prototype,L.D=E.prototype,L.prototype=new R,L.prototype.constructor=L,L.C=function(M,B,O){for(var D=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)D[Ee-2]=arguments[Ee];return E.prototype[B].apply(M,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(L,E,R){R||(R=0);var M=Array(16);if(typeof E=="string")for(var B=0;16>B;++B)M[B]=E.charCodeAt(R++)|E.charCodeAt(R++)<<8|E.charCodeAt(R++)<<16|E.charCodeAt(R++)<<24;else for(B=0;16>B;++B)M[B]=E[R++]|E[R++]<<8|E[R++]<<16|E[R++]<<24;E=L.g[0],R=L.g[1],B=L.g[2];var O=L.g[3],D=E+(O^R&(B^O))+M[0]+3614090360&4294967295;E=R+(D<<7&4294967295|D>>>25),D=O+(B^E&(R^B))+M[1]+3905402710&4294967295,O=E+(D<<12&4294967295|D>>>20),D=B+(R^O&(E^R))+M[2]+606105819&4294967295,B=O+(D<<17&4294967295|D>>>15),D=R+(E^B&(O^E))+M[3]+3250441966&4294967295,R=B+(D<<22&4294967295|D>>>10),D=E+(O^R&(B^O))+M[4]+4118548399&4294967295,E=R+(D<<7&4294967295|D>>>25),D=O+(B^E&(R^B))+M[5]+1200080426&4294967295,O=E+(D<<12&4294967295|D>>>20),D=B+(R^O&(E^R))+M[6]+2821735955&4294967295,B=O+(D<<17&4294967295|D>>>15),D=R+(E^B&(O^E))+M[7]+4249261313&4294967295,R=B+(D<<22&4294967295|D>>>10),D=E+(O^R&(B^O))+M[8]+1770035416&4294967295,E=R+(D<<7&4294967295|D>>>25),D=O+(B^E&(R^B))+M[9]+2336552879&4294967295,O=E+(D<<12&4294967295|D>>>20),D=B+(R^O&(E^R))+M[10]+4294925233&4294967295,B=O+(D<<17&4294967295|D>>>15),D=R+(E^B&(O^E))+M[11]+2304563134&4294967295,R=B+(D<<22&4294967295|D>>>10),D=E+(O^R&(B^O))+M[12]+1804603682&4294967295,E=R+(D<<7&4294967295|D>>>25),D=O+(B^E&(R^B))+M[13]+4254626195&4294967295,O=E+(D<<12&4294967295|D>>>20),D=B+(R^O&(E^R))+M[14]+2792965006&4294967295,B=O+(D<<17&4294967295|D>>>15),D=R+(E^B&(O^E))+M[15]+1236535329&4294967295,R=B+(D<<22&4294967295|D>>>10),D=E+(B^O&(R^B))+M[1]+4129170786&4294967295,E=R+(D<<5&4294967295|D>>>27),D=O+(R^B&(E^R))+M[6]+3225465664&4294967295,O=E+(D<<9&4294967295|D>>>23),D=B+(E^R&(O^E))+M[11]+643717713&4294967295,B=O+(D<<14&4294967295|D>>>18),D=R+(O^E&(B^O))+M[0]+3921069994&4294967295,R=B+(D<<20&4294967295|D>>>12),D=E+(B^O&(R^B))+M[5]+3593408605&4294967295,E=R+(D<<5&4294967295|D>>>27),D=O+(R^B&(E^R))+M[10]+38016083&4294967295,O=E+(D<<9&4294967295|D>>>23),D=B+(E^R&(O^E))+M[15]+3634488961&4294967295,B=O+(D<<14&4294967295|D>>>18),D=R+(O^E&(B^O))+M[4]+3889429448&4294967295,R=B+(D<<20&4294967295|D>>>12),D=E+(B^O&(R^B))+M[9]+568446438&4294967295,E=R+(D<<5&4294967295|D>>>27),D=O+(R^B&(E^R))+M[14]+3275163606&4294967295,O=E+(D<<9&4294967295|D>>>23),D=B+(E^R&(O^E))+M[3]+4107603335&4294967295,B=O+(D<<14&4294967295|D>>>18),D=R+(O^E&(B^O))+M[8]+1163531501&4294967295,R=B+(D<<20&4294967295|D>>>12),D=E+(B^O&(R^B))+M[13]+2850285829&4294967295,E=R+(D<<5&4294967295|D>>>27),D=O+(R^B&(E^R))+M[2]+4243563512&4294967295,O=E+(D<<9&4294967295|D>>>23),D=B+(E^R&(O^E))+M[7]+1735328473&4294967295,B=O+(D<<14&4294967295|D>>>18),D=R+(O^E&(B^O))+M[12]+2368359562&4294967295,R=B+(D<<20&4294967295|D>>>12),D=E+(R^B^O)+M[5]+4294588738&4294967295,E=R+(D<<4&4294967295|D>>>28),D=O+(E^R^B)+M[8]+2272392833&4294967295,O=E+(D<<11&4294967295|D>>>21),D=B+(O^E^R)+M[11]+1839030562&4294967295,B=O+(D<<16&4294967295|D>>>16),D=R+(B^O^E)+M[14]+4259657740&4294967295,R=B+(D<<23&4294967295|D>>>9),D=E+(R^B^O)+M[1]+2763975236&4294967295,E=R+(D<<4&4294967295|D>>>28),D=O+(E^R^B)+M[4]+1272893353&4294967295,O=E+(D<<11&4294967295|D>>>21),D=B+(O^E^R)+M[7]+4139469664&4294967295,B=O+(D<<16&4294967295|D>>>16),D=R+(B^O^E)+M[10]+3200236656&4294967295,R=B+(D<<23&4294967295|D>>>9),D=E+(R^B^O)+M[13]+681279174&4294967295,E=R+(D<<4&4294967295|D>>>28),D=O+(E^R^B)+M[0]+3936430074&4294967295,O=E+(D<<11&4294967295|D>>>21),D=B+(O^E^R)+M[3]+3572445317&4294967295,B=O+(D<<16&4294967295|D>>>16),D=R+(B^O^E)+M[6]+76029189&4294967295,R=B+(D<<23&4294967295|D>>>9),D=E+(R^B^O)+M[9]+3654602809&4294967295,E=R+(D<<4&4294967295|D>>>28),D=O+(E^R^B)+M[12]+3873151461&4294967295,O=E+(D<<11&4294967295|D>>>21),D=B+(O^E^R)+M[15]+530742520&4294967295,B=O+(D<<16&4294967295|D>>>16),D=R+(B^O^E)+M[2]+3299628645&4294967295,R=B+(D<<23&4294967295|D>>>9),D=E+(B^(R|~O))+M[0]+4096336452&4294967295,E=R+(D<<6&4294967295|D>>>26),D=O+(R^(E|~B))+M[7]+1126891415&4294967295,O=E+(D<<10&4294967295|D>>>22),D=B+(E^(O|~R))+M[14]+2878612391&4294967295,B=O+(D<<15&4294967295|D>>>17),D=R+(O^(B|~E))+M[5]+4237533241&4294967295,R=B+(D<<21&4294967295|D>>>11),D=E+(B^(R|~O))+M[12]+1700485571&4294967295,E=R+(D<<6&4294967295|D>>>26),D=O+(R^(E|~B))+M[3]+2399980690&4294967295,O=E+(D<<10&4294967295|D>>>22),D=B+(E^(O|~R))+M[10]+4293915773&4294967295,B=O+(D<<15&4294967295|D>>>17),D=R+(O^(B|~E))+M[1]+2240044497&4294967295,R=B+(D<<21&4294967295|D>>>11),D=E+(B^(R|~O))+M[8]+1873313359&4294967295,E=R+(D<<6&4294967295|D>>>26),D=O+(R^(E|~B))+M[15]+4264355552&4294967295,O=E+(D<<10&4294967295|D>>>22),D=B+(E^(O|~R))+M[6]+2734768916&4294967295,B=O+(D<<15&4294967295|D>>>17),D=R+(O^(B|~E))+M[13]+1309151649&4294967295,R=B+(D<<21&4294967295|D>>>11),D=E+(B^(R|~O))+M[4]+4149444226&4294967295,E=R+(D<<6&4294967295|D>>>26),D=O+(R^(E|~B))+M[11]+3174756917&4294967295,O=E+(D<<10&4294967295|D>>>22),D=B+(E^(O|~R))+M[2]+718787259&4294967295,B=O+(D<<15&4294967295|D>>>17),D=R+(O^(B|~E))+M[9]+3951481745&4294967295,L.g[0]=L.g[0]+E&4294967295,L.g[1]=L.g[1]+(B+(D<<21&4294967295|D>>>11))&4294967295,L.g[2]=L.g[2]+B&4294967295,L.g[3]=L.g[3]+O&4294967295}i.prototype.u=function(L,E){E===void 0&&(E=L.length);for(var R=E-this.blockSize,M=this.B,B=this.h,O=0;O<E;){if(B==0)for(;O<=R;)o(this,L,O),O+=this.blockSize;if(typeof L=="string"){for(;O<E;)if(M[B++]=L.charCodeAt(O++),B==this.blockSize){o(this,M),B=0;break}}else for(;O<E;)if(M[B++]=L[O++],B==this.blockSize){o(this,M),B=0;break}}this.h=B,this.o+=E},i.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var E=1;E<L.length-8;++E)L[E]=0;var R=8*this.o;for(E=L.length-8;E<L.length;++E)L[E]=R&255,R/=256;for(this.u(L),L=Array(16),E=R=0;4>E;++E)for(var M=0;32>M;M+=8)L[R++]=this.g[E]>>>M&255;return L};function l(L,E){var R=p;return Object.prototype.hasOwnProperty.call(R,L)?R[L]:R[L]=E(L)}function h(L,E){this.h=E;for(var R=[],M=!0,B=L.length-1;0<=B;B--){var O=L[B]|0;M&&O==E||(R[B]=O,M=!1)}this.g=R}var p={};function m(L){return-128<=L&&128>L?l(L,function(E){return new h([E|0],0>E?-1:0)}):new h([L|0],0>L?-1:0)}function y(L){if(isNaN(L)||!isFinite(L))return w;if(0>L)return N(y(-L));for(var E=[],R=1,M=0;L>=R;M++)E[M]=L/R|0,R*=4294967296;return new h(E,0)}function x(L,E){if(L.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(L.charAt(0)=="-")return N(x(L.substring(1),E));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(E,8)),M=w,B=0;B<L.length;B+=8){var O=Math.min(8,L.length-B),D=parseInt(L.substring(B,B+O),E);8>O?(O=y(Math.pow(E,O)),M=M.j(O).add(y(D))):(M=M.j(R),M=M.add(y(D)))}return M}var w=m(0),T=m(1),S=m(16777216);s=h.prototype,s.m=function(){if(q(this))return-N(this).m();for(var L=0,E=1,R=0;R<this.g.length;R++){var M=this.i(R);L+=(0<=M?M:4294967296+M)*E,E*=4294967296}return L},s.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(A(this))return"0";if(q(this))return"-"+N(this).toString(L);for(var E=y(Math.pow(L,6)),R=this,M="";;){var B=F(R,E).g;R=V(R,B.j(E));var O=((0<R.g.length?R.g[0]:R.h)>>>0).toString(L);if(R=B,A(R))return O+M;for(;6>O.length;)O="0"+O;M=O+M}},s.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function A(L){if(L.h!=0)return!1;for(var E=0;E<L.g.length;E++)if(L.g[E]!=0)return!1;return!0}function q(L){return L.h==-1}s.l=function(L){return L=V(this,L),q(L)?-1:A(L)?0:1};function N(L){for(var E=L.g.length,R=[],M=0;M<E;M++)R[M]=~L.g[M];return new h(R,~L.h).add(T)}s.abs=function(){return q(this)?N(this):this},s.add=function(L){for(var E=Math.max(this.g.length,L.g.length),R=[],M=0,B=0;B<=E;B++){var O=M+(this.i(B)&65535)+(L.i(B)&65535),D=(O>>>16)+(this.i(B)>>>16)+(L.i(B)>>>16);M=D>>>16,O&=65535,D&=65535,R[B]=D<<16|O}return new h(R,R[R.length-1]&-2147483648?-1:0)};function V(L,E){return L.add(N(E))}s.j=function(L){if(A(this)||A(L))return w;if(q(this))return q(L)?N(this).j(N(L)):N(N(this).j(L));if(q(L))return N(this.j(N(L)));if(0>this.l(S)&&0>L.l(S))return y(this.m()*L.m());for(var E=this.g.length+L.g.length,R=[],M=0;M<2*E;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(var B=0;B<L.g.length;B++){var O=this.i(M)>>>16,D=this.i(M)&65535,Ee=L.i(B)>>>16,be=L.i(B)&65535;R[2*M+2*B]+=D*be,P(R,2*M+2*B),R[2*M+2*B+1]+=O*be,P(R,2*M+2*B+1),R[2*M+2*B+1]+=D*Ee,P(R,2*M+2*B+1),R[2*M+2*B+2]+=O*Ee,P(R,2*M+2*B+2)}for(M=0;M<E;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=E;M<2*E;M++)R[M]=0;return new h(R,0)};function P(L,E){for(;(L[E]&65535)!=L[E];)L[E+1]+=L[E]>>>16,L[E]&=65535,E++}function k(L,E){this.g=L,this.h=E}function F(L,E){if(A(E))throw Error("division by zero");if(A(L))return new k(w,w);if(q(L))return E=F(N(L),E),new k(N(E.g),N(E.h));if(q(E))return E=F(L,N(E)),new k(N(E.g),E.h);if(30<L.g.length){if(q(L)||q(E))throw Error("slowDivide_ only works with positive integers.");for(var R=T,M=E;0>=M.l(L);)R=ee(R),M=ee(M);var B=re(R,1),O=re(M,1);for(M=re(M,2),R=re(R,2);!A(M);){var D=O.add(M);0>=D.l(L)&&(B=B.add(R),O=D),M=re(M,1),R=re(R,1)}return E=V(L,B.j(E)),new k(B,E)}for(B=w;0<=L.l(E);){for(R=Math.max(1,Math.floor(L.m()/E.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),O=y(R),D=O.j(E);q(D)||0<D.l(L);)R-=M,O=y(R),D=O.j(E);A(O)&&(O=T),B=B.add(O),L=V(L,D)}return new k(B,L)}s.A=function(L){return F(this,L).h},s.and=function(L){for(var E=Math.max(this.g.length,L.g.length),R=[],M=0;M<E;M++)R[M]=this.i(M)&L.i(M);return new h(R,this.h&L.h)},s.or=function(L){for(var E=Math.max(this.g.length,L.g.length),R=[],M=0;M<E;M++)R[M]=this.i(M)|L.i(M);return new h(R,this.h|L.h)},s.xor=function(L){for(var E=Math.max(this.g.length,L.g.length),R=[],M=0;M<E;M++)R[M]=this.i(M)^L.i(M);return new h(R,this.h^L.h)};function ee(L){for(var E=L.g.length+1,R=[],M=0;M<E;M++)R[M]=L.i(M)<<1|L.i(M-1)>>>31;return new h(R,L.h)}function re(L,E){var R=E>>5;E%=32;for(var M=L.g.length-R,B=[],O=0;O<M;O++)B[O]=0<E?L.i(O+R)>>>E|L.i(O+R+1)<<32-E:L.i(O+R);return new h(B,L.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,_1=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=x,wi=h}).apply(typeof e_<"u"?e_:typeof self<"u"?self:typeof window<"u"?window:{});var bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var b1,dc,w1,Lh,vp,E1,T1,N1;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,_){return d==Array.prototype||d==Object.prototype||(d[v]=_.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof bh=="object"&&bh];for(var v=0;v<d.length;++v){var _=d[v];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(d,v){if(v)e:{var _=i;d=d.split(".");for(var I=0;I<d.length-1;I++){var K=d[I];if(!(K in _))break e;_=_[K]}d=d[d.length-1],I=_[d],v=v(I),v!=I&&v!=null&&e(_,d,{configurable:!0,writable:!0,value:v})}}function l(d,v){d instanceof String&&(d+="");var _=0,I=!1,K={next:function(){if(!I&&_<d.length){var J=_++;return{value:v(J,d[J]),done:!1}}return I=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}o("Array.prototype.values",function(d){return d||function(){return l(this,function(v,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},p=this||self;function m(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function y(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function x(d,v,_){return d.call.apply(d.bind,arguments)}function w(d,v,_){if(!d)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,I),d.apply(v,K)}}return function(){return d.apply(v,arguments)}}function T(d,v,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:w,T.apply(null,arguments)}function S(d,v){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function A(d,v){function _(){}_.prototype=v.prototype,d.aa=v.prototype,d.prototype=new _,d.prototype.constructor=d,d.Qb=function(I,K,J){for(var de=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)de[Ge-2]=arguments[Ge];return v.prototype[K].apply(I,de)}}function q(d){const v=d.length;if(0<v){const _=Array(v);for(let I=0;I<v;I++)_[I]=d[I];return _}return[]}function N(d,v){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(m(I)){const K=d.length||0,J=I.length||0;d.length=K+J;for(let de=0;de<J;de++)d[K+de]=I[de]}else d.push(I)}}class V{constructor(v,_){this.i=v,this.j=_,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function P(d){return/^[\s\xa0]*$/.test(d)}function k(){var d=p.navigator;return d&&(d=d.userAgent)?d:""}function F(d){return F[" "](d),d}F[" "]=function(){};var ee=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function re(d,v,_){for(const I in d)v.call(_,d[I],I,d)}function L(d,v){for(const _ in d)v.call(void 0,d[_],_,d)}function E(d){const v={};for(const _ in d)v[_]=d[_];return v}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(d,v){let _,I;for(let K=1;K<arguments.length;K++){I=arguments[K];for(_ in I)d[_]=I[_];for(let J=0;J<R.length;J++)_=R[J],Object.prototype.hasOwnProperty.call(I,_)&&(d[_]=I[_])}}function B(d){var v=1;d=d.split(":");const _=[];for(;0<v&&d.length;)_.push(d.shift()),v--;return d.length&&_.push(d.join(":")),_}function O(d){p.setTimeout(()=>{throw d},0)}function D(){var d=ce;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class Ee{constructor(){this.h=this.g=null}add(v,_){const I=be.get();I.set(v,_),this.h?this.h.next=I:this.g=I,this.h=I}}var be=new V(()=>new X,d=>d.reset());class X{constructor(){this.next=this.g=this.h=null}set(v,_){this.h=v,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,ne=!1,ce=new Ee,U=()=>{const d=p.Promise.resolve(void 0);Y=()=>{d.then(ie)}};var ie=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(_){O(_)}var v=be;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}ne=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};p.addEventListener("test",_,v),p.removeEventListener("test",_,v)}catch{}return d}();function Ie(d,v){if(fe.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var _=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(ee){e:{try{F(v.nodeName);var K=!0;break e}catch{}K=!1}K||(v=null)}}else _=="mouseover"?v=d.fromElement:_=="mouseout"&&(v=d.toElement);this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:he[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ie.aa.h.call(this)}}A(Ie,fe);var he={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),Me=0;function ot(d,v,_,I,K){this.listener=d,this.proxy=null,this.src=v,this.type=_,this.capture=!!I,this.ha=K,this.key=++Me,this.da=this.fa=!1}function et(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Lt(d){this.src=d,this.g={},this.h=0}Lt.prototype.add=function(d,v,_,I,K){var J=d.toString();d=this.g[J],d||(d=this.g[J]=[],this.h++);var de=zn(d,v,I,K);return-1<de?(v=d[de],_||(v.fa=!1)):(v=new ot(v,this.src,J,!!I,K),v.fa=_,d.push(v)),v};function $s(d,v){var _=v.type;if(_ in d.g){var I=d.g[_],K=Array.prototype.indexOf.call(I,v,void 0),J;(J=0<=K)&&Array.prototype.splice.call(I,K,1),J&&(et(v),d.g[_].length==0&&(delete d.g[_],d.h--))}}function zn(d,v,_,I){for(var K=0;K<d.length;++K){var J=d[K];if(!J.da&&J.listener==v&&J.capture==!!_&&J.ha==I)return K}return-1}var Ir="closure_lm_"+(1e6*Math.random()|0),Dr={};function Ks(d,v,_,I,K){if(Array.isArray(v)){for(var J=0;J<v.length;J++)Ks(d,v[J],_,I,K);return null}return _=Zc(_),d&&d[Ae]?d.K(v,_,y(I)?!!I.capture:!1,K):Xo(d,v,_,!1,I,K)}function Xo(d,v,_,I,K,J){if(!v)throw Error("Invalid event type");var de=y(K)?!!K.capture:!!K,Ge=Zo(d);if(Ge||(d[Ir]=Ge=new Lt(d)),_=Ge.add(v,_,I,de,J),_.proxy)return _;if(I=Da(),_.proxy=I,I.src=d,I.listener=_,d.addEventListener)me||(K=de),K===void 0&&(K=!1),d.addEventListener(v.toString(),I,K);else if(d.attachEvent)d.attachEvent(Oa(v.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Da(){function d(_){return v.call(d.src,d.listener,_)}const v=zd;return d}function Ma(d,v,_,I,K){if(Array.isArray(v))for(var J=0;J<v.length;J++)Ma(d,v[J],_,I,K);else I=y(I)?!!I.capture:!!I,_=Zc(_),d&&d[Ae]?(d=d.i,v=String(v).toString(),v in d.g&&(J=d.g[v],_=zn(J,_,I,K),-1<_&&(et(J[_]),Array.prototype.splice.call(J,_,1),J.length==0&&(delete d.g[v],d.h--)))):d&&(d=Zo(d))&&(v=d.g[v.toString()],d=-1,v&&(d=zn(v,_,I,K)),(_=-1<d?v[d]:null)&&Vi(_))}function Vi(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[Ae])$s(v.i,d);else{var _=d.type,I=d.proxy;v.removeEventListener?v.removeEventListener(_,I,d.capture):v.detachEvent?v.detachEvent(Oa(_),I):v.addListener&&v.removeListener&&v.removeListener(I),(_=Zo(v))?($s(_,d),_.h==0&&(_.src=null,v[Ir]=null)):et(d)}}}function Oa(d){return d in Dr?Dr[d]:Dr[d]="on"+d}function zd(d,v){if(d.da)d=!0;else{v=new Ie(v,this);var _=d.listener,I=d.ha||d.src;d.fa&&Vi(d),d=_.call(I,v)}return d}function Zo(d){return d=d[Ir],d instanceof Lt?d:null}var Nn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zc(d){return typeof d=="function"?d:(d[Nn]||(d[Nn]=function(v){return d.handleEvent(v)}),d[Nn])}function Ut(){pe.call(this),this.i=new Lt(this),this.M=this,this.F=null}A(Ut,pe),Ut.prototype[Ae]=!0,Ut.prototype.removeEventListener=function(d,v,_,I){Ma(this,d,v,_,I)};function Kt(d,v){var _,I=d.F;if(I)for(_=[];I;I=I.F)_.push(I);if(d=d.M,I=v.type||v,typeof v=="string")v=new fe(v,d);else if(v instanceof fe)v.target=v.target||d;else{var K=v;v=new fe(I,d),M(v,K)}if(K=!0,_)for(var J=_.length-1;0<=J;J--){var de=v.g=_[J];K=Qs(de,I,!0,v)&&K}if(de=v.g=d,K=Qs(de,I,!0,v)&&K,K=Qs(de,I,!1,v)&&K,_)for(J=0;J<_.length;J++)de=v.g=_[J],K=Qs(de,I,!1,v)&&K}Ut.prototype.N=function(){if(Ut.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var _=d.g[v],I=0;I<_.length;I++)et(_[I]);delete d.g[v],d.h--}}this.F=null},Ut.prototype.K=function(d,v,_,I){return this.i.add(String(d),v,!1,_,I)},Ut.prototype.L=function(d,v,_,I){return this.i.add(String(d),v,!0,_,I)};function Qs(d,v,_,I){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var K=!0,J=0;J<v.length;++J){var de=v[J];if(de&&!de.da&&de.capture==_){var Ge=de.listener,zt=de.ha||de.src;de.fa&&$s(d.i,de),K=Ge.call(zt,I)!==!1&&K}}return K&&!I.defaultPrevented}function Jc(d,v,_){if(typeof d=="function")_&&(d=T(d,_));else if(d&&typeof d.handleEvent=="function")d=T(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:p.setTimeout(d,v||0)}function Jo(d){d.g=Jc(()=>{d.g=null,d.i&&(d.i=!1,Jo(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class Bd extends pe{constructor(v,_){super(),this.m=v,this.l=_,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Jo(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zi(d){pe.call(this),this.h=d,this.g={}}A(zi,pe);var Mr=[];function cn(d){re(d.g,function(v,_){this.g.hasOwnProperty(_)&&Vi(v)},d),d.g={}}zi.prototype.N=function(){zi.aa.N.call(this),cn(this)},zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var el=p.JSON.stringify,_s=p.JSON.parse,yn=class{stringify(d){return p.JSON.stringify(d,void 0)}parse(d){return p.JSON.parse(d,void 0)}};function tl(){}tl.prototype.h=null;function eu(d){return d.h||(d.h=d.i())}function tu(){}var bs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Or(){fe.call(this,"d")}A(Or,fe);function as(){fe.call(this,"c")}A(as,fe);var Bn={},kr=null;function ka(){return kr=kr||new Ut}Bn.La="serverreachability";function nl(d){fe.call(this,Bn.La,d)}A(nl,fe);function Pr(d){const v=ka();Kt(v,new nl(v))}Bn.STAT_EVENT="statevent";function Pa(d,v){fe.call(this,Bn.STAT_EVENT,d),this.stat=v}A(Pa,fe);function At(d){const v=ka();Kt(v,new Pa(v,d))}Bn.Ma="timingevent";function nu(d,v){fe.call(this,Bn.Ma,d),this.size=v}A(nu,fe);function Lr(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){d()},v)}function Ur(){this.g=!0}Ur.prototype.xa=function(){this.g=!1};function su(d,v,_,I,K,J){d.info(function(){if(d.g)if(J)for(var de="",Ge=J.split("&"),zt=0;zt<Ge.length;zt++){var $e=Ge[zt].split("=");if(1<$e.length){var Wt=$e[0];$e=$e[1];var Bt=Wt.split("_");de=2<=Bt.length&&Bt[1]=="type"?de+(Wt+"="+$e+"&"):de+(Wt+"=redacted&")}}else de=null;else de=J;return"XMLHTTP REQ ("+I+") [attempt "+K+"]: "+v+`
`+_+`
`+de})}function ru(d,v,_,I,K,J,de){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+K+"]: "+v+`
`+_+`
`+J+" "+de})}function Vr(d,v,_,I){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Qt(d,_)+(I?" "+I:"")})}function ws(d,v){d.info(function(){return"TIMEOUT: "+v})}Ur.prototype.info=function(){};function Qt(d,v){if(!d.g)return v;if(!v)return null;try{var _=JSON.parse(v);if(_){for(d=0;d<_.length;d++)if(Array.isArray(_[d])){var I=_[d];if(!(2>I.length)){var K=I[1];if(Array.isArray(K)&&!(1>K.length)){var J=K[0];if(J!="noop"&&J!="stop"&&J!="close")for(var de=1;de<K.length;de++)K[de]=""}}}}return el(_)}catch{return v}}var Vt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ys={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bi;function La(){}A(La,tl),La.prototype.g=function(){return new XMLHttpRequest},La.prototype.i=function(){return{}},Bi=new La;function Es(d,v,_,I){this.j=d,this.i=v,this.l=_,this.R=I||1,this.U=new zi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sl}function sl(){this.i=null,this.g="",this.h=!1}var zr={},qi={};function os(d,v,_){d.L=1,d.v=Gi(bt(v)),d.m=_,d.P=!0,Ws(d,null)}function Ws(d,v){d.F=Date.now(),yt(d),d.A=bt(d.v);var _=d.A,I=d.R;Array.isArray(I)||(I=[String(I)]),Js(_.i,"t",I),d.C=0,_=d.j.J,d.h=new sl,d.g=vu(d.j,_?v:null,!d.m),0<d.O&&(d.M=new Bd(T(d.Y,d,d.g),d.O)),v=d.U,_=d.g,I=d.ca;var K="readystatechange";Array.isArray(K)||(K&&(Mr[0]=K.toString()),K=Mr);for(var J=0;J<K.length;J++){var de=Ks(_,K[J],I||v.handleEvent,!1,v.h||v);if(!de)break;v.g[de.key]=de}v=d.H?E(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),Pr(),su(d.i,d.u,d.A,d.l,d.R,d.m)}Es.prototype.ca=function(d){d=d.target;const v=this.M;v&&$n(d)==3?v.j():this.Y(d)},Es.prototype.Y=function(d){try{if(d==this.g)e:{const Bt=$n(this.g);var v=this.g.Ba();const sr=this.g.Z();if(!(3>Bt)&&(Bt!=3||this.g&&(this.h.h||this.g.oa()||uu(this.g)))){this.J||Bt!=4||v==7||(v==8||0>=sr?Pr(3):Pr(2)),Ua(this);var _=this.g.Z();this.X=_;t:if(Br(this)){var I=uu(this.g);d="";var K=I.length,J=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sn(this),In(this);var de="";break t}this.h.i=new p.TextDecoder}for(v=0;v<K;v++)this.h.h=!0,d+=this.h.i.decode(I[v],{stream:!(J&&v==K-1)});I.length=0,this.h.g+=d,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=_==200,ru(this.i,this.u,this.A,this.l,this.R,Bt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,zt=this.g;if((Ge=zt.g?zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Ge)){var $e=Ge;break t}}$e=null}if(_=$e)Vr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dn(this,_);else{this.o=!1,this.s=3,At(12),Sn(this),In(this);break e}}if(this.P){_=!0;let tn;for(;!this.J&&this.C<de.length;)if(tn=qr(this,de),tn==qi){Bt==4&&(this.s=4,At(14),_=!1),Vr(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==zr){this.s=4,At(15),Vr(this.i,this.l,de,"[Invalid Chunk]"),_=!1;break}else Vr(this.i,this.l,tn,null),Dn(this,tn);if(Br(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bt!=4||de.length!=0||this.h.h||(this.s=1,At(16),_=!1),this.o=this.o&&_,!_)Vr(this.i,this.l,de,"[Invalid Chunked Response]"),Sn(this),In(this);else if(0<de.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Zi(Wt),Wt.M=!0,At(11))}}else Vr(this.i,this.l,de,null),Dn(this,de);Bt==4&&Sn(this),this.o&&!this.J&&(Bt==4?pu(this.j,this):(this.o=!1,yt(this)))}else Kd(this.g),_==400&&0<de.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),Sn(this),In(this)}}}catch{}finally{}};function Br(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function qr(d,v){var _=d.C,I=v.indexOf(`
`,_);return I==-1?qi:(_=Number(v.substring(_,I)),isNaN(_)?zr:(I+=1,I+_>v.length?qi:(v=v.slice(I,I+_),d.C=I+_,v)))}Es.prototype.cancel=function(){this.J=!0,Sn(this)};function yt(d){d.S=Date.now()+d.I,rl(d,d.I)}function rl(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Lr(T(d.ba,d),v)}function Ua(d){d.B&&(p.clearTimeout(d.B),d.B=null)}Es.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(ws(this.i,this.A),this.L!=2&&(Pr(),At(17)),Sn(this),this.s=2,In(this)):rl(this,this.S-d)};function In(d){d.j.G==0||d.J||pu(d.j,d)}function Sn(d){Ua(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,cn(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function Dn(d,v){try{var _=d.j;if(_.G!=0&&(_.g==d||Hr(_.h,d))){if(!d.K&&Hr(_.h,d)&&_.G==3){try{var I=_.Da.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var K=I;if(K[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<d.F)Qa(_),$a(_);else break e;pl(_),At(18)}}else _.za=K[1],0<_.za-_.T&&37500>K[2]&&_.F&&_.v==0&&!_.C&&(_.C=Lr(T(_.Za,_),6e3));if(1>=iu(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else nr(_,11)}else if((d.K||_.g==d)&&Qa(_),!P(v))for(K=_.Da.g.parse(v),v=0;v<K.length;v++){let $e=K[v];if(_.T=$e[0],$e=$e[1],_.G==2)if($e[0]=="c"){_.K=$e[1],_.ia=$e[2];const Wt=$e[3];Wt!=null&&(_.la=Wt,_.j.info("VER="+_.la));const Bt=$e[4];Bt!=null&&(_.Aa=Bt,_.j.info("SVER="+_.Aa));const sr=$e[5];sr!=null&&typeof sr=="number"&&0<sr&&(I=1.5*sr,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const tn=d.g;if(tn){const js=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(js){var J=I.h;J.g||js.indexOf("spdy")==-1&&js.indexOf("quic")==-1&&js.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Fr(J,J.h),J.h=null))}if(I.D){const yl=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;yl&&(I.ya=yl,Xe(I.I,I.D,yl))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-d.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var de=d;if(I.qa=yu(I,I.J?I.ia:null,I.W),de.K){qn(I.h,de);var Ge=de,zt=I.L;zt&&(Ge.I=zt),Ge.B&&(Ua(Ge),yt(Ge)),I.g=de}else fu(I);0<_.i.length&&Ka(_)}else $e[0]!="stop"&&$e[0]!="close"||nr(_,7);else _.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?nr(_,7):fl(_):$e[0]!="noop"&&_.l&&_.l.ta($e),_.v=0)}}Pr(4)}catch{}}var qd=class{constructor(d,v){this.g=d,this.map=v}};function il(d){this.l=d||10,p.PerformanceNavigationTiming?(d=p.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function al(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function iu(d){return d.h?1:d.g?d.g.size:0}function Hr(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function Fr(d,v){d.g?d.g.add(v):d.h=v}function qn(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}il.prototype.cancel=function(){if(this.i=vn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function vn(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const _ of d.g.values())v=v.concat(_.D);return v}return q(d.i)}function au(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(m(d)){for(var v=[],_=d.length,I=0;I<_;I++)v.push(d[I]);return v}v=[],_=0;for(I in d)v[_++]=d[I];return v}function Hd(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(m(d)||typeof d=="string"){var v=[];d=d.length;for(var _=0;_<d;_++)v.push(_);return v}v=[],_=0;for(const I in d)v[_++]=I;return v}}}function Hi(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(m(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var _=Hd(d),I=au(d),K=I.length,J=0;J<K;J++)v.call(void 0,I[J],_&&_[J],d)}var ol=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Va(d,v){if(d){d=d.split("&");for(var _=0;_<d.length;_++){var I=d[_].indexOf("="),K=null;if(0<=I){var J=d[_].substring(0,I);K=d[_].substring(I+1)}else J=d[_];v(J,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Xs(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Xs){this.h=d.h,Gr(this,d.j),this.o=d.o,this.g=d.g,Fi(this,d.s),this.l=d.l;var v=d.i,_=new Ts;_.i=v.i,v.g&&(_.g=new Map(v.g),_.h=v.h),za(this,_),this.m=d.m}else d&&(v=String(d).match(ol))?(this.h=!1,Gr(this,v[1]||"",!0),this.o=$r(v[2]||""),this.g=$r(v[3]||"",!0),Fi(this,v[4]),this.l=$r(v[5]||"",!0),za(this,v[6]||"",!0),this.m=$r(v[7]||"")):(this.h=!1,this.i=new Ts(null,this.h))}Xs.prototype.toString=function(){var d=[],v=this.j;v&&d.push(Hn(v,ll,!0),":");var _=this.g;return(_||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Hn(v,ll,!0),"@"),d.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&d.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(Hn(_,_.charAt(0)=="/"?cl:ou,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",Hn(_,$d)),d.join("")};function bt(d){return new Xs(d)}function Gr(d,v,_){d.j=_?$r(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Fi(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function za(d,v,_){v instanceof Ts?(d.i=v,ul(d.i,d.h)):(_||(v=Hn(v,Gd)),d.i=new Ts(v,d.h))}function Xe(d,v,_){d.i.set(v,_)}function Gi(d){return Xe(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function $r(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Hn(d,v,_){return typeof d=="string"?(d=encodeURI(d).replace(v,Fd),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Fd(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var ll=/[#\/\?@]/g,ou=/[#\?:]/g,cl=/[#\?]/g,Gd=/[#\?@]/g,$d=/#/g;function Ts(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Fn(d){d.g||(d.g=new Map,d.h=0,d.i&&Va(d.i,function(v,_){d.add(decodeURIComponent(v.replace(/\+/g," ")),_)}))}s=Ts.prototype,s.add=function(d,v){Fn(this),this.i=null,d=er(this,d);var _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(v),this.h+=1,this};function Ba(d,v){Fn(d),v=er(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Zs(d,v){return Fn(d),v=er(d,v),d.g.has(v)}s.forEach=function(d,v){Fn(this),this.g.forEach(function(_,I){_.forEach(function(K){d.call(v,K,I,this)},this)},this)},s.na=function(){Fn(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),_=[];for(let I=0;I<v.length;I++){const K=d[I];for(let J=0;J<K.length;J++)_.push(v[I])}return _},s.V=function(d){Fn(this);let v=[];if(typeof d=="string")Zs(this,d)&&(v=v.concat(this.g.get(er(this,d))));else{d=Array.from(this.g.values());for(let _=0;_<d.length;_++)v=v.concat(d[_])}return v},s.set=function(d,v){return Fn(this),this.i=null,d=er(this,d),Zs(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},s.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function Js(d,v,_){Ba(d,v),0<_.length&&(d.i=null,d.g.set(er(d,v),q(_)),d.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var _=0;_<v.length;_++){var I=v[_];const J=encodeURIComponent(String(I)),de=this.V(I);for(I=0;I<de.length;I++){var K=J;de[I]!==""&&(K+="="+encodeURIComponent(String(de[I]))),d.push(K)}}return this.i=d.join("&")};function er(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function ul(d,v){v&&!d.j&&(Fn(d),d.i=null,d.g.forEach(function(_,I){var K=I.toLowerCase();I!=K&&(Ba(this,I),Js(this,K,_))},d)),d.j=v}function lu(d,v){const _=new Ur;if(p.Image){const I=new Image;I.onload=S(Gn,_,"TestLoadImage: loaded",!0,v,I),I.onerror=S(Gn,_,"TestLoadImage: error",!1,v,I),I.onabort=S(Gn,_,"TestLoadImage: abort",!1,v,I),I.ontimeout=S(Gn,_,"TestLoadImage: timeout",!1,v,I),p.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else v(!1)}function $i(d,v){const _=new Ur,I=new AbortController,K=setTimeout(()=>{I.abort(),Gn(_,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:I.signal}).then(J=>{clearTimeout(K),J.ok?Gn(_,"TestPingServer: ok",!0,v):Gn(_,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(K),Gn(_,"TestPingServer: error",!1,v)})}function Gn(d,v,_,I,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),I(_)}catch{}}function Ki(){this.g=new yn}function Ns(d,v,_){const I=_||"";try{Hi(d,function(K,J){let de=K;y(K)&&(de=el(K)),v.push(I+J+"="+encodeURIComponent(de))})}catch(K){throw v.push(I+"type="+encodeURIComponent("_badmap")),K}}function Kr(d){this.l=d.Ub||null,this.j=d.eb||!1}A(Kr,tl),Kr.prototype.g=function(){return new tr(this.l,this.j)},Kr.prototype.i=function(d){return function(){return d}}({});function tr(d,v){Ut.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(tr,Ut),s=tr.prototype,s.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,As(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||p).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ss(this)),this.readyState=0},s.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,As(this)),this.g&&(this.readyState=3,As(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hl(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function hl(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}s.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Ss(this):As(this),this.readyState==3&&hl(this)}},s.Ra=function(d){this.g&&(this.response=this.responseText=d,Ss(this))},s.Qa=function(d){this.g&&(this.response=d,Ss(this))},s.ga=function(){this.g&&Ss(this)};function Ss(d){d.readyState=4,d.l=null,d.j=null,d.v=null,As(d)}s.setRequestHeader=function(d,v){this.u.append(d,v)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var _=v.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=v.next();return d.join(`\r
`)};function As(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function dl(d){let v="";return re(d,function(_,I){v+=I,v+=":",v+=_,v+=`\r
`}),v}function Yt(d,v,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=dl(_),typeof d=="string"?_!=null&&encodeURIComponent(String(_)):Xe(d,v,_))}function nt(d){Ut.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(nt,Ut);var qa=/^https?$/i,Qi=["POST","PUT"];s=nt.prototype,s.Ha=function(d){this.J=d},s.ea=function(d,v,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bi.g(),this.v=this.o?eu(this.o):eu(Bi),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(J){cu(this,J);return}if(d=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var K in I)_.set(K,I[K]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const J of I.keys())_.set(J,I.get(J));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(J=>J.toLowerCase()=="content-type"),K=p.FormData&&d instanceof p.FormData,!(0<=Array.prototype.indexOf.call(Qi,v,void 0))||I||K||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,de]of _)this.g.setRequestHeader(J,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yi(this),this.u=!0,this.g.send(d),this.u=!1}catch(J){cu(this,J)}};function cu(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,Ha(d),Rs(d)}function Ha(d){d.A||(d.A=!0,Kt(d,"complete"),Kt(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Kt(this,"complete"),Kt(this,"abort"),Rs(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rs(this,!0)),nt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Fa(this):this.bb())},s.bb=function(){Fa(this)};function Fa(d){if(d.h&&typeof h<"u"&&(!d.v[1]||$n(d)!=4||d.Z()!=2)){if(d.u&&$n(d)==4)Jc(d.Ea,0,d);else if(Kt(d,"readystatechange"),$n(d)==4){d.h=!1;try{const de=d.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var _;if(!(_=v)){var I;if(I=de===0){var K=String(d.D).match(ol)[1]||null;!K&&p.self&&p.self.location&&(K=p.self.location.protocol.slice(0,-1)),I=!qa.test(K?K.toLowerCase():"")}_=I}if(_)Kt(d,"complete"),Kt(d,"success");else{d.m=6;try{var J=2<$n(d)?d.g.statusText:""}catch{J=""}d.l=J+" ["+d.Z()+"]",Ha(d)}}finally{Rs(d)}}}}function Rs(d,v){if(d.g){Yi(d);const _=d.g,I=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||Kt(d,"ready");try{_.onreadystatechange=I}catch{}}}function Yi(d){d.I&&(p.clearTimeout(d.I),d.I=null)}s.isActive=function(){return!!this.g};function $n(d){return d.g?d.g.readyState:0}s.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),_s(v)}};function uu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Kd(d){const v={};d=(d.g&&2<=$n(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(P(d[I]))continue;var _=B(d[I]);const K=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const J=v[K]||[];v[K]=J,J.push(_)}L(v,function(I){return I.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wi(d,v,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||v}function Ga(d){this.Aa=0,this.i=[],this.j=new Ur,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wi("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wi("baseRetryDelayMs",5e3,d),this.cb=Wi("retryDelaySeedMs",1e4,d),this.Wa=Wi("forwardChannelMaxRetries",2,d),this.wa=Wi("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new il(d&&d.concurrentRequestLimit),this.Da=new Ki,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Ga.prototype,s.la=8,s.G=1,s.connect=function(d,v,_,I){At(0),this.W=d,this.H=v||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=yu(this,null,this.W),Ka(this)};function fl(d){if(hu(d),d.G==3){var v=d.U++,_=bt(d.I);if(Xe(_,"SID",d.K),Xe(_,"RID",v),Xe(_,"TYPE","terminate"),Xi(d,_),v=new Es(d,d.j,v),v.L=2,v.v=Gi(bt(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(v.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=v.v,_=!0),_||(v.g=vu(v.j,null),v.g.ea(v.v)),v.F=Date.now(),yt(v)}gu(d)}function $a(d){d.g&&(Zi(d),d.g.cancel(),d.g=null)}function hu(d){$a(d),d.u&&(p.clearTimeout(d.u),d.u=null),Qa(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&p.clearTimeout(d.s),d.s=null)}function Ka(d){if(!al(d.h)&&!d.s){d.s=!0;var v=d.Ga;Y||U(),ne||(Y(),ne=!0),ce.add(v,d),d.B=0}}function Qd(d,v){return iu(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Lr(T(d.Ga,d,v),gl(d,d.B)),d.B++,!0)}s.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const K=new Es(this,this.j,d);let J=this.o;if(this.S&&(J?(J=E(J),M(J,this.S)):J=this.S),this.m!==null||this.O||(K.H=J,J=null),this.P)e:{for(var v=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,4096<v){v=_;break e}if(v===4096||_===this.i.length-1){v=_+1;break e}}v=1e3}else v=1e3;v=du(this,K,v),_=bt(this.I),Xe(_,"RID",d),Xe(_,"CVER",22),this.D&&Xe(_,"X-HTTP-Session-Id",this.D),Xi(this,_),J&&(this.O?v="headers="+encodeURIComponent(String(dl(J)))+"&"+v:this.m&&Yt(_,this.m,J)),Fr(this.h,K),this.Ua&&Xe(_,"TYPE","init"),this.P?(Xe(_,"$req",v),Xe(_,"SID","null"),K.T=!0,os(K,_,null)):os(K,_,v),this.G=2}}else this.G==3&&(d?ml(this,d):this.i.length==0||al(this.h)||ml(this))};function ml(d,v){var _;v?_=v.l:_=d.U++;const I=bt(d.I);Xe(I,"SID",d.K),Xe(I,"RID",_),Xe(I,"AID",d.T),Xi(d,I),d.m&&d.o&&Yt(I,d.m,d.o),_=new Es(d,d.j,_,d.B+1),d.m===null&&(_.H=d.o),v&&(d.i=v.D.concat(d.i)),v=du(d,_,1e3),_.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Fr(d.h,_),os(_,I,v)}function Xi(d,v){d.H&&re(d.H,function(_,I){Xe(v,I,_)}),d.l&&Hi({},function(_,I){Xe(v,I,_)})}function du(d,v,_){_=Math.min(d.i.length,_);var I=d.l?T(d.l.Na,d.l,d):null;e:{var K=d.i;let J=-1;for(;;){const de=["count="+_];J==-1?0<_?(J=K[0].g,de.push("ofs="+J)):J=0:de.push("ofs="+J);let Ge=!0;for(let zt=0;zt<_;zt++){let $e=K[zt].g;const Wt=K[zt].map;if($e-=J,0>$e)J=Math.max(0,K[zt].g-100),Ge=!1;else try{Ns(Wt,de,"req"+$e+"_")}catch{I&&I(Wt)}}if(Ge){I=de.join("&");break e}}}return d=d.i.splice(0,_),v.D=d,I}function fu(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;Y||U(),ne||(Y(),ne=!0),ce.add(v,d),d.v=0}}function pl(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Lr(T(d.Fa,d),gl(d,d.v)),d.v++,!0)}s.Fa=function(){if(this.u=null,mu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Lr(T(this.ab,this),d)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),$a(this),mu(this))};function Zi(d){d.A!=null&&(p.clearTimeout(d.A),d.A=null)}function mu(d){d.g=new Es(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=bt(d.qa);Xe(v,"RID","rpc"),Xe(v,"SID",d.K),Xe(v,"AID",d.T),Xe(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&Xe(v,"TO",d.ja),Xe(v,"TYPE","xmlhttp"),Xi(d,v),d.m&&d.o&&Yt(v,d.m,d.o),d.L&&(d.g.I=d.L);var _=d.g;d=d.ia,_.L=1,_.v=Gi(bt(v)),_.m=null,_.P=!0,Ws(_,d)}s.Za=function(){this.C!=null&&(this.C=null,$a(this),pl(this),At(19))};function Qa(d){d.C!=null&&(p.clearTimeout(d.C),d.C=null)}function pu(d,v){var _=null;if(d.g==v){Qa(d),Zi(d),d.g=null;var I=2}else if(Hr(d.h,v))_=v.D,qn(d.h,v),I=1;else return;if(d.G!=0){if(v.o)if(I==1){_=v.m?v.m.length:0,v=Date.now()-v.F;var K=d.B;I=ka(),Kt(I,new nu(I,_)),Ka(d)}else fu(d);else if(K=v.s,K==3||K==0&&0<v.X||!(I==1&&Qd(d,v)||I==2&&pl(d)))switch(_&&0<_.length&&(v=d.h,v.i=v.i.concat(_)),K){case 1:nr(d,5);break;case 4:nr(d,10);break;case 3:nr(d,6);break;default:nr(d,2)}}}function gl(d,v){let _=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(_*=2),_*v}function nr(d,v){if(d.j.info("Error code "+v),v==2){var _=T(d.fb,d),I=d.Xa;const K=!I;I=new Xs(I||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Gr(I,"https"),Gi(I),K?lu(I.toString(),_):$i(I.toString(),_)}else At(2);d.G=0,d.l&&d.l.sa(v),gu(d),hu(d)}s.fb=function(d){d?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function gu(d){if(d.G=0,d.ka=[],d.l){const v=vn(d.h);(v.length!=0||d.i.length!=0)&&(N(d.ka,v),N(d.ka,d.i),d.h.i.length=0,q(d.i),d.i.length=0),d.l.ra()}}function yu(d,v,_){var I=_ instanceof Xs?bt(_):new Xs(_);if(I.g!="")v&&(I.g=v+"."+I.g),Fi(I,I.s);else{var K=p.location;I=K.protocol,v=v?v+"."+K.hostname:K.hostname,K=+K.port;var J=new Xs(null);I&&Gr(J,I),v&&(J.g=v),K&&Fi(J,K),_&&(J.l=_),I=J}return _=d.D,v=d.ya,_&&v&&Xe(I,_,v),Xe(I,"VER",d.la),Xi(d,I),I}function vu(d,v,_){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new nt(new Kr({eb:_})):new nt(d.pa),v.Ha(d.J),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function xu(){}s=xu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Ya(){}Ya.prototype.g=function(d,v){return new xn(d,v)};function xn(d,v){Ut.call(this),this.g=new Ga(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!P(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!P(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Cs(this)}A(xn,Ut),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){fl(this.g)},xn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.u&&(_={},_.__data__=el(d),d=_);v.i.push(new qd(v.Ya++,d)),v.G==3&&Ka(v)},xn.prototype.N=function(){this.g.l=null,delete this.j,fl(this.g),delete this.g,xn.aa.N.call(this)};function _u(d){Or.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const _ in v){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}A(_u,Or);function bu(){as.call(this),this.status=1}A(bu,as);function Cs(d){this.g=d}A(Cs,xu),Cs.prototype.ua=function(){Kt(this.g,"a")},Cs.prototype.ta=function(d){Kt(this.g,new _u(d))},Cs.prototype.sa=function(d){Kt(this.g,new bu)},Cs.prototype.ra=function(){Kt(this.g,"b")},Ya.prototype.createWebChannel=Ya.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,N1=function(){return new Ya},T1=function(){return ka()},E1=Bn,vp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vt.NO_ERROR=0,Vt.TIMEOUT=8,Vt.HTTP_ERROR=6,Lh=Vt,Ys.COMPLETE="complete",w1=Ys,tu.EventType=bs,bs.OPEN="a",bs.CLOSE="b",bs.ERROR="c",bs.MESSAGE="d",Ut.prototype.listen=Ut.prototype.K,dc=tu,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,b1=nt}).apply(typeof bh<"u"?bh:typeof self<"u"?self:typeof window<"u"?window:{});const t_="@firebase/firestore",n_="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=new $p("@firebase/firestore");function Eo(){return Sa.logLevel}function ve(s,...e){if(Sa.logLevel<=qe.DEBUG){const t=e.map(lg);Sa.debug(`Firestore (${Ho}): ${s}`,...t)}}function Sr(s,...e){if(Sa.logLevel<=qe.ERROR){const t=e.map(lg);Sa.error(`Firestore (${Ho}): ${s}`,...t)}}function Io(s,...e){if(Sa.logLevel<=qe.WARN){const t=e.map(lg);Sa.warn(`Firestore (${Ho}): ${s}`,...t)}}function lg(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,S1(s,i,t)}function S1(s,e,t){let i=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Sr(i),new Error(i)}function rt(s,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,s||S1(e,o,i)}function ke(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Gs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class R4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fn.UNAUTHENTICATED))}shutdown(){}}class C4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class j4{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){rt(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Er,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await o(this.currentUser)})},p=m=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(m=>p(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?p(m):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Er)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(rt(typeof i.accessToken=="string",31837,{l:i}),new A1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class I4{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class D4{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new I4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class M4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){rt(this.o===void 0,3512);const i=l=>{l.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ve("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new s_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new s_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=O4(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Ue(s,e){return s<e?-1:s>e?1:0}function xp(s,e){let t=0;for(;t<s.length&&t<e.length;){const i=s.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Ue(i,o);{const l=R1(),h=k4(l.encode(r_(s,t)),l.encode(r_(e,t)));return h!==0?h:Ue(i,o)}}t+=i>65535?2:1}return Ue(s.length,e.length)}function r_(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function k4(s,e){for(let t=0;t<s.length&&t<e.length;++t)if(s[t]!==e[t])return Ue(s[t],e[t]);return Ue(s.length,e.length)}function Do(s,e,t){return s.length===e.length&&s.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=-62135596800,a_=1e6;class Gt{static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*a_);return new Gt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<i_)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/a_}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-i_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new Gt(0,0))}static max(){return new De(new Gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="__name__";class Ps{constructor(e,t,i){t===void 0?t=0:t>e.length&&je(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&je(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ps.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ps?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Ps.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ue(e.length,t.length)}static compareSegments(e,t){const i=Ps.isNumericId(e),o=Ps.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Ps.extractNumericId(e).compare(Ps.extractNumericId(t)):xp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wi.fromString(e.substring(4,e.length-2))}}class dt extends Ps{construct(e,t,i){return new dt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ye(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new dt(t)}static emptyPath(){return new dt([])}}const P4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends Ps{construct(e,t,i){return new on(e,t,i)}static isValidIdentifier(e){return P4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===o_}static keyField(){return new on([o_])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ye(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ye(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ye(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(i+=p,o++):(l(),o++)}if(l(),h)throw new ye(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(t)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(dt.fromString(e))}static fromName(e){return new Se(dt.fromString(e).popFirst(5))}static empty(){return new Se(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new dt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=-1;function L4(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=De.fromTimestamp(i===1e9?new Gt(t+1,0):new Gt(t,i));return new Si(o,Se.empty(),e)}function U4(s){return new Si(s.readTime,s.key,Sc)}class Si{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Si(De.min(),Se.empty(),Sc)}static max(){return new Si(De.max(),Se.empty(),Sc)}}function V4(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(s.documentKey,e.documentKey),t!==0?t:Ue(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class B4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(s){if(s.code!==ae.FAILED_PRECONDITION||s.message!==z4)throw s;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,i)=>{t(e)})}static reject(e){return new le((t,i)=>{i(e)})}static waitFor(e){return new le((t,i)=>{let o=0,l=0,h=!1;e.forEach(p=>{++o,p.next(()=>{++l,h&&l===o&&t()},m=>i(m))}),h=!0,l===o&&t()})}static or(e){let t=le.resolve(!1);for(const i of e)t=t.next(o=>o?le.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new le((i,o)=>{const l=e.length,h=new Array(l);let p=0;for(let m=0;m<l;m++){const y=m;t(e[y]).next(x=>{h[y]=x,++p,p===l&&i(h)},x=>o(x))}})}static doWhile(e,t){return new le((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function q4(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Go(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>t.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}_d.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg=-1;function bd(s){return s==null}function ed(s){return s===0&&1/s==-1/0}function H4(s){return typeof s=="number"&&Number.isInteger(s)&&!ed(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="";function F4(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=l_(e)),e=G4(s.get(t),e);return l_(e)}function G4(s,e){let t=e;const i=s.length;for(let o=0;o<i;o++){const l=s.charAt(o);switch(l){case"\0":t+="";break;case j1:t+="";break;default:t+=l}}return t}function l_(s){return s+j1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Oi(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function I1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,t){this.comparator=e,this.root=t||an.EMPTY}insert(e,t){return new _t(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wh(this.root,e,this.comparator,!0)}}class wh{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??an.RED,this.left=o??an.EMPTY,this.right=l??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new an(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return an.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new an(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new u_(this.data.getIterator())}getIteratorFrom(e){return new u_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $t(this.comparator);return t.data=e,t}}class u_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new Un([])}unionWith(e){let t=new $t(on.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Un(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Do(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new D1("Invalid base64 string: "+l):l}}(e);return new ln(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const $4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ai(s){if(rt(!!s,39018),typeof s=="string"){let e=0;const t=$4.exec(s);if(rt(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ct(s.seconds),nanos:Ct(s.nanos)}}function Ct(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ri(s){return typeof s=="string"?ln.fromBase64String(s):ln.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="server_timestamp",O1="__type__",k1="__previous_value__",P1="__local_write_time__";function ug(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[O1])===null||t===void 0?void 0:t.stringValue)===M1}function wd(s){const e=s.mapValue.fields[k1];return ug(e)?wd(e):e}function Ac(s){const e=Ai(s.mapValue.fields[P1].timestampValue);return new Gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e,t,i,o,l,h,p,m,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=m,this.useFetchStreams=y}}const td="(default)";class Rc{constructor(e,t){this.projectId=e,this.database=t||td}static empty(){return new Rc("","")}get isDefaultDatabase(){return this.database===td}isEqual(e){return e instanceof Rc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="__type__",Q4="__max__",Eh={mapValue:{}},U1="__vector__",nd="value";function Ci(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?ug(s)?4:W4(s)?9007199254740991:Y4(s)?10:11:je(28295,{value:s})}function qs(s,e){if(s===e)return!0;const t=Ci(s);if(t!==Ci(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Ac(s).isEqual(Ac(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ai(o.timestampValue),p=Ai(l.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,l){return Ri(o.bytesValue).isEqual(Ri(l.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,l){return Ct(o.geoPointValue.latitude)===Ct(l.geoPointValue.latitude)&&Ct(o.geoPointValue.longitude)===Ct(l.geoPointValue.longitude)}(s,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return Ct(o.integerValue)===Ct(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=Ct(o.doubleValue),p=Ct(l.doubleValue);return h===p?ed(h)===ed(p):isNaN(h)&&isNaN(p)}return!1}(s,e);case 9:return Do(s.arrayValue.values||[],e.arrayValue.values||[],qs);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},p=l.mapValue.fields||{};if(c_(h)!==c_(p))return!1;for(const m in h)if(h.hasOwnProperty(m)&&(p[m]===void 0||!qs(h[m],p[m])))return!1;return!0}(s,e);default:return je(52216,{left:s})}}function Cc(s,e){return(s.values||[]).find(t=>qs(t,e))!==void 0}function Mo(s,e){if(s===e)return 0;const t=Ci(s),i=Ci(e);if(t!==i)return Ue(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(s.booleanValue,e.booleanValue);case 2:return function(l,h){const p=Ct(l.integerValue||l.doubleValue),m=Ct(h.integerValue||h.doubleValue);return p<m?-1:p>m?1:p===m?0:isNaN(p)?isNaN(m)?0:-1:1}(s,e);case 3:return h_(s.timestampValue,e.timestampValue);case 4:return h_(Ac(s),Ac(e));case 5:return xp(s.stringValue,e.stringValue);case 6:return function(l,h){const p=Ri(l),m=Ri(h);return p.compareTo(m)}(s.bytesValue,e.bytesValue);case 7:return function(l,h){const p=l.split("/"),m=h.split("/");for(let y=0;y<p.length&&y<m.length;y++){const x=Ue(p[y],m[y]);if(x!==0)return x}return Ue(p.length,m.length)}(s.referenceValue,e.referenceValue);case 8:return function(l,h){const p=Ue(Ct(l.latitude),Ct(h.latitude));return p!==0?p:Ue(Ct(l.longitude),Ct(h.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return d_(s.arrayValue,e.arrayValue);case 10:return function(l,h){var p,m,y,x;const w=l.fields||{},T=h.fields||{},S=(p=w[nd])===null||p===void 0?void 0:p.arrayValue,A=(m=T[nd])===null||m===void 0?void 0:m.arrayValue,q=Ue(((y=S==null?void 0:S.values)===null||y===void 0?void 0:y.length)||0,((x=A==null?void 0:A.values)===null||x===void 0?void 0:x.length)||0);return q!==0?q:d_(S,A)}(s.mapValue,e.mapValue);case 11:return function(l,h){if(l===Eh.mapValue&&h===Eh.mapValue)return 0;if(l===Eh.mapValue)return 1;if(h===Eh.mapValue)return-1;const p=l.fields||{},m=Object.keys(p),y=h.fields||{},x=Object.keys(y);m.sort(),x.sort();for(let w=0;w<m.length&&w<x.length;++w){const T=xp(m[w],x[w]);if(T!==0)return T;const S=Mo(p[m[w]],y[x[w]]);if(S!==0)return S}return Ue(m.length,x.length)}(s.mapValue,e.mapValue);default:throw je(23264,{Pe:t})}}function h_(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ue(s,e);const t=Ai(s),i=Ai(e),o=Ue(t.seconds,i.seconds);return o!==0?o:Ue(t.nanos,i.nanos)}function d_(s,e){const t=s.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Mo(t[o],i[o]);if(l)return l}return Ue(t.length,i.length)}function Oo(s){return _p(s)}function _p(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const i=Ai(t);return`time(${i.seconds},${i.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return Ri(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return Se.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=_p(l);return i+"]"}(s.arrayValue):"mapValue"in s?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${_p(t.fields[h])}`;return o+"}"}(s.mapValue):je(61005,{value:s})}function Uh(s){switch(Ci(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wd(s);return e?16+Uh(e):16;case 5:return 2*s.stringValue.length;case 6:return Ri(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+Uh(l),0)}(s.arrayValue);case 10:case 11:return function(i){let o=0;return Oi(i.fields,(l,h)=>{o+=l.length+Uh(h)}),o}(s.mapValue);default:throw je(13486,{value:s})}}function f_(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function bp(s){return!!s&&"integerValue"in s}function hg(s){return!!s&&"arrayValue"in s}function m_(s){return!!s&&"nullValue"in s}function p_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Vh(s){return!!s&&"mapValue"in s}function Y4(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[L1])===null||t===void 0?void 0:t.stringValue)===U1}function yc(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Oi(s.mapValue.fields,(t,i)=>e.mapValue.fields[t]=yc(i)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yc(s.arrayValue.values[t]);return e}return Object.assign({},s)}function W4(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Q4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Vh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yc(t)}setAll(e){let t=on.emptyPath(),i={},o=[];e.forEach((h,p)=>{if(!t.isImmediateParentOf(p)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=p.popLast()}h?i[p.lastSegment()]=yc(h):o.push(p.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Vh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Vh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Oi(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new jn(yc(this.value))}}function V1(s){const e=[];return Oi(s.fields,(t,i)=>{const o=new on([t]);if(Vh(i)){const l=V1(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new Un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,t,i,o,l,h,p){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=p}static newInvalidDocument(e){return new mn(e,0,De.min(),De.min(),De.min(),jn.empty(),0)}static newFoundDocument(e,t,i,o){return new mn(e,1,t,De.min(),i,o,0)}static newNoDocument(e,t){return new mn(e,2,t,De.min(),De.min(),jn.empty(),0)}static newUnknownDocument(e,t){return new mn(e,3,t,De.min(),De.min(),jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t){this.position=e,this.inclusive=t}}function g_(s,e,t){let i=0;for(let o=0;o<s.position.length;o++){const l=e[o],h=s.position[o];if(l.field.isKeyField()?i=Se.comparator(Se.fromName(h.referenceValue),t.key):i=Mo(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function y_(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!qs(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t="asc"){this.field=e,this.dir=t}}function X4(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{}class Pt extends z1{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new J4(e,t,i):t==="array-contains"?new nC(e,i):t==="in"?new sC(e,i):t==="not-in"?new rC(e,i):t==="array-contains-any"?new iC(e,i):new Pt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new eC(e,i):new tC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Mo(t,this.value)):t!==null&&Ci(this.value)===Ci(t)&&this.matchesComparison(Mo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gs extends z1{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new gs(e,t)}matches(e){return B1(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function B1(s){return s.op==="and"}function q1(s){return Z4(s)&&B1(s)}function Z4(s){for(const e of s.filters)if(e instanceof gs)return!1;return!0}function wp(s){if(s instanceof Pt)return s.field.canonicalString()+s.op.toString()+Oo(s.value);if(q1(s))return s.filters.map(e=>wp(e)).join(",");{const e=s.filters.map(t=>wp(t)).join(",");return`${s.op}(${e})`}}function H1(s,e){return s instanceof Pt?function(i,o){return o instanceof Pt&&i.op===o.op&&i.field.isEqual(o.field)&&qs(i.value,o.value)}(s,e):s instanceof gs?function(i,o){return o instanceof gs&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,h,p)=>l&&H1(h,o.filters[p]),!0):!1}(s,e):void je(19439)}function F1(s){return s instanceof Pt?function(t){return`${t.field.canonicalString()} ${t.op} ${Oo(t.value)}`}(s):s instanceof gs?function(t){return t.op.toString()+" {"+t.getFilters().map(F1).join(" ,")+"}"}(s):"Filter"}class J4 extends Pt{constructor(e,t,i){super(e,t,i),this.key=Se.fromName(i.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class eC extends Pt{constructor(e,t){super(e,"in",t),this.keys=G1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class tC extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=G1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function G1(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Se.fromName(i.referenceValue))}class nC extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hg(t)&&Cc(t.arrayValue,this.value)}}class sC extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cc(this.value.arrayValue,t)}}class rC extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Cc(this.value.arrayValue,t)}}class iC extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Cc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,t=null,i=[],o=[],l=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=p,this.Ie=null}}function v_(s,e=null,t=[],i=[],o=null,l=null,h=null){return new aC(s,e,t,i,o,l,h)}function dg(s){const e=ke(s);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>wp(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),bd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Oo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Oo(i)).join(",")),e.Ie=t}return e.Ie}function fg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!X4(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!H1(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!y_(s.startAt,e.startAt)&&y_(s.endAt,e.endAt)}function Ep(s){return Se.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,t=null,i=[],o=[],l=null,h="F",p=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=p,this.endAt=m,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function oC(s,e,t,i,o,l,h,p){return new $o(s,e,t,i,o,l,h,p)}function Ed(s){return new $o(s)}function x_(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function $1(s){return s.collectionGroup!==null}function vc(s){const e=ke(s);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new $t(on.comparator);return h.filters.forEach(m=>{m.getFlattenedFilters().forEach(y=>{y.isInequality()&&(p=p.add(y.field))})}),p})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new jc(l,i))}),t.has(on.keyField().canonicalString())||e.Ee.push(new jc(on.keyField(),i))}return e.Ee}function zs(s){const e=ke(s);return e.de||(e.de=lC(e,vc(s))),e.de}function lC(s,e){if(s.limitType==="F")return v_(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new jc(o.field,l)});const t=s.endAt?new sd(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new sd(s.startAt.position,s.startAt.inclusive):null;return v_(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function Tp(s,e){const t=s.filters.concat([e]);return new $o(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Np(s,e,t){return new $o(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Td(s,e){return fg(zs(s),zs(e))&&s.limitType===e.limitType}function K1(s){return`${dg(zs(s))}|lt:${s.limitType}`}function To(s){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>F1(o)).join(", ")}]`),bd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>Oo(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>Oo(o)).join(",")),`Target(${i})`}(zs(s))}; limitType=${s.limitType})`}function Nd(s,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Se.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(s,e)&&function(i,o){for(const l of vc(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(s,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(s,e)&&function(i,o){return!(i.startAt&&!function(h,p,m){const y=g_(h,p,m);return h.inclusive?y<=0:y<0}(i.startAt,vc(i),o)||i.endAt&&!function(h,p,m){const y=g_(h,p,m);return h.inclusive?y>=0:y>0}(i.endAt,vc(i),o))}(s,e)}function cC(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Q1(s){return(e,t)=>{let i=!1;for(const o of vc(s)){const l=uC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function uC(s,e,t){const i=s.field.isKeyField()?Se.comparator(e.key,t.key):function(l,h,p){const m=h.data.field(l),y=p.data.field(l);return m!==null&&y!==null?Mo(m,y):je(42886)}(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return je(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Oi(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return I1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=new _t(Se.comparator);function Ar(){return hC}const Y1=new _t(Se.comparator);function fc(...s){let e=Y1;for(const t of s)e=e.insert(t.key,t);return e}function W1(s){let e=Y1;return s.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function xa(){return xc()}function X1(){return xc()}function xc(){return new ja(s=>s.toString(),(s,e)=>s.isEqual(e))}const dC=new _t(Se.comparator),fC=new $t(Se.comparator);function He(...s){let e=fC;for(const t of s)e=e.add(t);return e}const mC=new $t(Ue);function pC(){return mC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ed(e)?"-0":e}}function Z1(s){return{integerValue:""+s}}function gC(s,e){return H4(e)?Z1(e):mg(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(){this._=void 0}}function yC(s,e,t){return s instanceof Ic?function(o,l){const h={fields:{[O1]:{stringValue:M1},[P1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&ug(l)&&(l=wd(l)),l&&(h.fields[k1]=l),{mapValue:h}}(t,e):s instanceof Dc?ew(s,e):s instanceof Mc?tw(s,e):function(o,l){const h=J1(o,l),p=__(h)+__(o.Re);return bp(h)&&bp(o.Re)?Z1(p):mg(o.serializer,p)}(s,e)}function vC(s,e,t){return s instanceof Dc?ew(s,e):s instanceof Mc?tw(s,e):t}function J1(s,e){return s instanceof rd?function(i){return bp(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class Ic extends Sd{}class Dc extends Sd{constructor(e){super(),this.elements=e}}function ew(s,e){const t=nw(e);for(const i of s.elements)t.some(o=>qs(o,i))||t.push(i);return{arrayValue:{values:t}}}class Mc extends Sd{constructor(e){super(),this.elements=e}}function tw(s,e){let t=nw(e);for(const i of s.elements)t=t.filter(o=>!qs(o,i));return{arrayValue:{values:t}}}class rd extends Sd{constructor(e,t){super(),this.serializer=e,this.Re=t}}function __(s){return Ct(s.integerValue||s.doubleValue)}function nw(s){return hg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,t){this.field=e,this.transform=t}}function _C(s,e){return s.field.isEqual(e.field)&&function(i,o){return i instanceof Dc&&o instanceof Dc||i instanceof Mc&&o instanceof Mc?Do(i.elements,o.elements,qs):i instanceof rd&&o instanceof rd?qs(i.Re,o.Re):i instanceof Ic&&o instanceof Ic}(s.transform,e.transform)}class bC{constructor(e,t){this.version=e,this.transformResults=t}}class En{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Ad{}function sw(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Rd(s.key,En.none()):new Hc(s.key,s.data,En.none());{const t=s.data,i=jn.empty();let o=new $t(on.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new ki(s.key,i,new Un(o.toArray()),En.none())}}function wC(s,e,t){s instanceof Hc?function(o,l,h){const p=o.value.clone(),m=w_(o.fieldTransforms,l,h.transformResults);p.setAll(m),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(s,e,t):s instanceof ki?function(o,l,h){if(!zh(o.precondition,l))return void l.convertToUnknownDocument(h.version);const p=w_(o.fieldTransforms,l,h.transformResults),m=l.data;m.setAll(rw(o)),m.setAll(p),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(s,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function _c(s,e,t,i){return s instanceof Hc?function(l,h,p,m){if(!zh(l.precondition,h))return p;const y=l.value.clone(),x=E_(l.fieldTransforms,m,h);return y.setAll(x),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(s,e,t,i):s instanceof ki?function(l,h,p,m){if(!zh(l.precondition,h))return p;const y=E_(l.fieldTransforms,m,h),x=h.data;return x.setAll(rw(l)),x.setAll(y),h.convertToFoundDocument(h.version,x).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(w=>w.field))}(s,e,t,i):function(l,h,p){return zh(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p}(s,e,t)}function EC(s,e){let t=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),l=J1(i.transform,o||null);l!=null&&(t===null&&(t=jn.empty()),t.set(i.field,l))}return t||null}function b_(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Do(i,o,(l,h)=>_C(l,h))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Hc extends Ad{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ki extends Ad{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function rw(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}}),e}function w_(s,e,t){const i=new Map;rt(s.length===t.length,32656,{Ve:t.length,me:s.length});for(let o=0;o<t.length;o++){const l=s[o],h=l.transform,p=e.data.field(l.field);i.set(l.field,vC(h,p,t[o]))}return i}function E_(s,e,t){const i=new Map;for(const o of s){const l=o.transform,h=t.data.field(o.field);i.set(o.field,yC(l,h,e))}return i}class Rd extends Ad{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TC extends Ad{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&wC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=_c(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=_c(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=X1();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let p=this.applyToLocalView(h,l.mutatedFields);p=t.has(o.key)?null:p;const m=sw(h,p);m!==null&&i.set(o.key,m),h.isValidDocument()||h.convertToNoDocument(De.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),He())}isEqual(e){return this.batchId===e.batchId&&Do(this.mutations,e.mutations,(t,i)=>b_(t,i))&&Do(this.baseMutations,e.baseMutations,(t,i)=>b_(t,i))}}class pg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){rt(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let o=function(){return dC}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new pg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Qe;function RC(s){switch(s){case ae.OK:return je(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return je(15467,{code:s})}}function iw(s){if(s===void 0)return Sr("GRPC error has no .code"),ae.UNKNOWN;switch(s){case kt.OK:return ae.OK;case kt.CANCELLED:return ae.CANCELLED;case kt.UNKNOWN:return ae.UNKNOWN;case kt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case kt.INTERNAL:return ae.INTERNAL;case kt.UNAVAILABLE:return ae.UNAVAILABLE;case kt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case kt.NOT_FOUND:return ae.NOT_FOUND;case kt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case kt.ABORTED:return ae.ABORTED;case kt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case kt.DATA_LOSS:return ae.DATA_LOSS;default:return je(39323,{code:s})}}(Qe=kt||(kt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=new wi([4294967295,4294967295],0);function T_(s){const e=R1().encode(s),t=new _1;return t.update(e),new Uint8Array(t.digest())}function N_(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new wi([t,i],0),new wi([o,l],0)]}class gg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new mc(`Invalid padding: ${t}`);if(i<0)throw new mc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new mc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new mc(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=wi.fromNumber(this.pe)}we(e,t,i){let o=e.add(t.multiply(wi.fromNumber(i)));return o.compare(CC)===1&&(o=new wi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=T_(e),[i,o]=N_(t);for(let l=0;l<this.hashCount;l++){const h=this.we(i,o,l);if(!this.be(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new gg(l,o,t);return i.forEach(p=>h.insert(p)),h}insert(e){if(this.pe===0)return;const t=T_(e),[i,o]=N_(t);for(let l=0;l<this.hashCount;l++){const h=this.we(i,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class mc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Fc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Cd(De.min(),o,new _t(Ue),Ar(),He())}}class Fc{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Fc(i,t,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,t,i,o){this.De=e,this.removedTargetIds=t,this.key=i,this.ve=o}}class aw{constructor(e,t){this.targetId=e,this.Ce=t}}class ow{constructor(e,t,i=ln.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class S_{constructor(){this.Fe=0,this.Me=A_(),this.xe=ln.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=He(),t=He(),i=He();return this.Me.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:je(38017,{changeType:l})}}),new Fc(this.xe,this.Oe,e,t,i)}Qe(){this.Ne=!1,this.Me=A_()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,rt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class jC{constructor(e){this.ze=e,this.je=new Map,this.He=Ar(),this.Je=Th(),this.Ye=Th(),this.Ze=new _t(Ue)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const i=this.rt(t);switch(e.state){case 0:this.it(t)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(t);break;case 3:this.it(t)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),i.ke(e.resumeToken));break;default:je(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((i,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,i=e.Ce.count,o=this._t(t);if(o){const l=o.target;if(Ep(l))if(i===0){const h=new Se(l.path);this.tt(t,h,mn.newNoDocument(h,De.min()))}else rt(i===1,20013,{expectedCount:i});else{const h=this.ut(t);if(h!==i){const p=this.ct(e),m=p?this.lt(p,e,h):1;if(m!==0){this.st(t);const y=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,p;try{h=Ri(i).toUint8Array()}catch(m){if(m instanceof D1)return Io("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{p=new gg(h,o,l)}catch(m){return Io(m instanceof mc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return p.pe===0?null:p}lt(e,t,i){return t.Ce.count===i-this.Tt(e,t.targetId)?0:2}Tt(e,t){const i=this.ze.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const h=this.ze.Pt(),p=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.tt(t,l,null),o++)}),o}It(e){const t=new Map;this.je.forEach((l,h)=>{const p=this._t(h);if(p){if(l.current&&Ep(p.target)){const m=new Se(p.target.path);this.Et(m).has(h)||this.dt(h,m)||this.tt(h,m,mn.newNoDocument(m,e))}l.Le&&(t.set(h,l.qe()),l.Qe())}});let i=He();this.Ye.forEach((l,h)=>{let p=!0;h.forEachWhile(m=>{const y=this._t(m);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)}),p&&(i=i.add(l))}),this.He.forEach((l,h)=>h.setReadTime(e));const o=new Cd(e,t,this.Ze,this.He,i);return this.He=Ar(),this.Je=Th(),this.Ye=Th(),this.Ze=new _t(Ue),o}et(e,t){if(!this.it(e))return;const i=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,i),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,i){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),i&&(this.He=this.He.insert(t,i))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new S_,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new $t(Ue),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new $t(Ue),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new S_),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Th(){return new _t(Se.comparator)}function A_(){return new _t(Se.comparator)}const IC={asc:"ASCENDING",desc:"DESCENDING"},DC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MC={and:"AND",or:"OR"};class OC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Sp(s,e){return s.useProto3Json||bd(e)?e:{value:e}}function id(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lw(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function kC(s,e){return id(s,e.toTimestamp())}function Bs(s){return rt(!!s,49232),De.fromTimestamp(function(t){const i=Ai(t);return new Gt(i.seconds,i.nanos)}(s))}function yg(s,e){return Ap(s,e).canonicalString()}function Ap(s,e){const t=function(o){return new dt(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?t:t.child(e)}function cw(s){const e=dt.fromString(s);return rt(mw(e),10190,{key:e.toString()}),e}function Rp(s,e){return yg(s.databaseId,e.path)}function ep(s,e){const t=cw(e);if(t.get(1)!==s.databaseId.projectId)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Se(hw(t))}function uw(s,e){return yg(s.databaseId,e)}function PC(s){const e=cw(s);return e.length===4?dt.emptyPath():hw(e)}function Cp(s){return new dt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function hw(s){return rt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function R_(s,e,t){return{name:Rp(s,e),fields:t.value.mapValue.fields}}function LC(s,e){let t;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:je(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(y,x){return y.useProto3Json?(rt(x===void 0||typeof x=="string",58123),ln.fromBase64String(x||"")):(rt(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),ln.fromUint8Array(x||new Uint8Array))}(s,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&function(y){const x=y.code===void 0?ae.UNKNOWN:iw(y.code);return new ye(x,y.message||"")}(h);t=new ow(i,o,l,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=ep(s,i.document.name),l=Bs(i.document.updateTime),h=i.document.createTime?Bs(i.document.createTime):De.min(),p=new jn({mapValue:{fields:i.document.fields}}),m=mn.newFoundDocument(o,l,h,p),y=i.targetIds||[],x=i.removedTargetIds||[];t=new Bh(y,x,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=ep(s,i.document),l=i.readTime?Bs(i.readTime):De.min(),h=mn.newNoDocument(o,l),p=i.removedTargetIds||[];t=new Bh([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=ep(s,i.document),l=i.removedTargetIds||[];t=new Bh([],l,o,null)}else{if(!("filter"in e))return je(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new AC(o,l),p=i.targetId;t=new aw(p,h)}}return t}function UC(s,e){let t;if(e instanceof Hc)t={update:R_(s,e.key,e.value)};else if(e instanceof Rd)t={delete:Rp(s,e.key)};else if(e instanceof ki)t={update:R_(s,e.key,e.data),updateMask:KC(e.fieldMask)};else{if(!(e instanceof TC))return je(16599,{ft:e.type});t={verify:Rp(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,h){const p=h.transform;if(p instanceof Ic)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Dc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Mc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof rd)return{fieldPath:h.field.canonicalString(),increment:p.Re};throw je(20930,{transform:h.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:kC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:je(27497)}(s,e.precondition)),t}function VC(s,e){return s&&s.length>0?(rt(e!==void 0,14353),s.map(t=>function(o,l){let h=o.updateTime?Bs(o.updateTime):Bs(l);return h.isEqual(De.min())&&(h=Bs(l)),new bC(h,o.transformResults||[])}(t,e))):[]}function zC(s,e){return{documents:[uw(s,e.path)]}}function BC(s,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=uw(s,o);const l=function(y){if(y.length!==0)return fw(gs.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(y){if(y.length!==0)return y.map(x=>function(T){return{field:No(T.field),direction:FC(T.dir)}}(x))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const p=Sp(s,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:t,parent:o}}function qC(s){let e=PC(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){rt(i===1,65062);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=function(w){const T=dw(w);return T instanceof gs&&q1(T)?T.getFilters():[T]}(t.where));let h=[];t.orderBy&&(h=function(w){return w.map(T=>function(A){return new jc(So(A.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(T))}(t.orderBy));let p=null;t.limit&&(p=function(w){let T;return T=typeof w=="object"?w.value:w,bd(T)?null:T}(t.limit));let m=null;t.startAt&&(m=function(w){const T=!!w.before,S=w.values||[];return new sd(S,T)}(t.startAt));let y=null;return t.endAt&&(y=function(w){const T=!w.before,S=w.values||[];return new sd(S,T)}(t.endAt)),oC(e,o,h,l,p,"F",m,y)}function HC(s,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function dw(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=So(t.unaryFilter.field);return Pt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=So(t.unaryFilter.field);return Pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=So(t.unaryFilter.field);return Pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=So(t.unaryFilter.field);return Pt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}}(s):s.fieldFilter!==void 0?function(t){return Pt.create(So(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return gs.create(t.compositeFilter.filters.map(i=>dw(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return je(1026)}}(t.compositeFilter.op))}(s):je(30097,{filter:s})}function FC(s){return IC[s]}function GC(s){return DC[s]}function $C(s){return MC[s]}function No(s){return{fieldPath:s.canonicalString()}}function So(s){return on.fromServerFormat(s.fieldPath)}function fw(s){return s instanceof Pt?function(t){if(t.op==="=="){if(p_(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NAN"}};if(m_(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(p_(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NAN"}};if(m_(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(t.field),op:GC(t.op),value:t.value}}}(s):s instanceof gs?function(t){const i=t.getFilters().map(o=>fw(o));return i.length===1?i[0]:{compositeFilter:{op:$C(t.op),filters:i}}}(s):je(54877,{filter:s})}function KC(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mw(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t,i,o,l=De.min(),h=De.min(),p=ln.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=m}withSequenceNumber(e){return new xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.wt=e}}function YC(s){const e=qC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Np(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.yn=new XC}addToCollectionParentIndex(e,t){return this.yn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Si.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Si.min())}updateCollectionGroup(e,t,i){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class XC{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new $t(dt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new $t(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pw=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(pw,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new ko(0)}static ir(){return new ko(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="LruGarbageCollector",ZC=1048576;function I_([s,e],[t,i]){const o=Ue(s,t);return o===0?Ue(e,i):o}class JC{constructor(e){this.cr=e,this.buffer=new $t(I_),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();I_(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ej{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){ve(j_,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Go(t)?ve(j_,"Ignoring IndexedDB error during garbage collection: ",t):await Fo(t)}await this.Ir(3e5)})}}class tj{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return le.resolve(_d.le);const i=new JC(t);return this.Er.forEachTarget(e,o=>i.Pr(o.sequenceNumber)).next(()=>this.Er.Ar(e,o=>i.Pr(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Er.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(C_)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),C_):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let i,o,l,h,p,m,y;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,h=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(i=w,p=Date.now(),this.removeTargets(e,i,t))).next(w=>(l=w,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(w=>(y=Date.now(),Eo()<=qe.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-x}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${l} targets in `+(m-p)+`ms
	Removed ${w} documents in `+(y-m)+`ms
Total Duration: ${y-x}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:w})))}}function nj(s,e){return new tj(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(){this.changes=new ja(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?le.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&_c(i.mutation,o,Un.empty(),Gt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,He()).next(()=>i))}getLocalViewOfDocuments(e,t,i=He()){const o=xa();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let h=fc();return l.forEach((p,m)=>{h=h.insert(p,m.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const i=xa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,He()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,p)=>{t.set(h,p)})})}computeViews(e,t,i,o){let l=Ar();const h=xc(),p=function(){return xc()}();return t.forEach((m,y)=>{const x=i.get(y.key);o.has(y.key)&&(x===void 0||x.mutation instanceof ki)?l=l.insert(y.key,y):x!==void 0?(h.set(y.key,x.mutation.getFieldMask()),_c(x.mutation,y,x.mutation.getFieldMask(),Gt.now())):h.set(y.key,Un.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((y,x)=>h.set(y,x)),t.forEach((y,x)=>{var w;return p.set(y,new rj(x,(w=h.get(y))!==null&&w!==void 0?w:null))}),p))}recalculateAndSaveOverlays(e,t){const i=xc();let o=new _t((h,p)=>h-p),l=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const p of h)p.keys().forEach(m=>{const y=t.get(m);if(y===null)return;let x=i.get(m)||Un.empty();x=p.applyToLocalView(y,x),i.set(m,x);const w=(o.get(p.batchId)||He()).add(m);o=o.insert(p.batchId,w)})}).next(()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const m=p.getNext(),y=m.key,x=m.value,w=X1();x.forEach(T=>{if(!l.has(T)){const S=sw(t.get(T),i.get(T));S!==null&&w.set(T,S),l=l.add(T)}}),h.push(this.documentOverlayCache.saveOverlays(e,y,w))}return le.waitFor(h)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(h){return Se.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):le.resolve(xa());let p=Sc,m=l;return h.next(y=>le.forEach(y,(x,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),l.get(x)?le.resolve():this.remoteDocumentCache.getEntry(e,x).next(T=>{m=m.insert(x,T)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,m,y,He())).next(x=>({batchId:p,changes:W1(x)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next(i=>{let o=fc();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=fc();return this.indexManager.getCollectionParents(e,l).next(p=>le.forEach(p,m=>{const y=function(w,T){return new $o(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next(x=>{x.forEach((w,T)=>{h=h.insert(w,T)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(h=>{l.forEach((m,y)=>{const x=y.getKey();h.get(x)===null&&(h=h.insert(x,mn.newInvalidDocument(x)))});let p=fc();return h.forEach((m,y)=>{const x=l.get(m);x!==void 0&&_c(x.mutation,y,Un.empty(),Gt.now()),Nd(t,y)&&(p=p.insert(m,y))}),p})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return le.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Bs(o.createTime)}}(t)),le.resolve()}getNamedQuery(e,t){return le.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(o){return{name:o.name,query:YC(o.bundledQuery),readTime:Bs(o.readTime)}}(t)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(){this.overlays=new _t(Se.comparator),this.Or=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const i=xa();return le.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.St(e,t,l)}),le.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Or.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Or.delete(i)),le.resolve()}getOverlaysForCollection(e,t,i){const o=xa(),l=t.length+1,h=new Se(t.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const m=p.getNext().value,y=m.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&m.largestBatchId>i&&o.set(m.getKey(),m)}return le.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new _t((y,x)=>y-x);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let x=l.get(y.largestBatchId);x===null&&(x=xa(),l=l.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const p=xa(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((y,x)=>p.set(y,x)),!(p.size()>=o)););return le.resolve(p)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Or.get(o.largestBatchId).delete(i.key);this.Or.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new SC(t,i));let l=this.Or.get(t);l===void 0&&(l=He(),this.Or.set(t,l)),this.Or.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(){this.Nr=new $t(en.Br),this.Lr=new $t(en.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const i=new en(e,t);this.Nr=this.Nr.add(i),this.Lr=this.Lr.add(i)}qr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Qr(new en(e,t))}$r(e,t){e.forEach(i=>this.removeReference(i,t))}Ur(e){const t=new Se(new dt([])),i=new en(t,e),o=new en(t,e+1),l=[];return this.Lr.forEachInRange([i,o],h=>{this.Qr(h),l.push(h.key)}),l}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Se(new dt([])),i=new en(t,e),o=new en(t,e+1);let l=He();return this.Lr.forEachInRange([i,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new en(e,0),i=this.Nr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class en{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Se.comparator(e.key,t.key)||Ue(e.Gr,t.Gr)}static kr(e,t){return Ue(e.Gr,t.Gr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new $t(en.Br)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new NC(l,t,i,o);this.mutationQueue.push(h);for(const p of o)this.zr=this.zr.add(new en(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return le.resolve(h)}lookupMutationBatch(e,t){return le.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Hr(i),l=o<0?0:o;return le.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?cg:this.Jn-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new en(t,0),o=new en(t,Number.POSITIVE_INFINITY),l=[];return this.zr.forEachInRange([i,o],h=>{const p=this.jr(h.Gr);l.push(p)}),le.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new $t(Ue);return t.forEach(o=>{const l=new en(o,0),h=new en(o,Number.POSITIVE_INFINITY);this.zr.forEachInRange([l,h],p=>{i=i.add(p.Gr)})}),le.resolve(this.Jr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Se.isDocumentKey(l)||(l=l.child(""));const h=new en(new Se(l),0);let p=new $t(Ue);return this.zr.forEachWhile(m=>{const y=m.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(p=p.add(m.Gr)),!0)},h),le.resolve(this.Jr(p))}Jr(e){const t=[];return e.forEach(i=>{const o=this.jr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){rt(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.zr;return le.forEach(t.mutations,o=>{const l=new en(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.zr=i})}Xn(e){}containsKey(e,t){const i=new en(t,0),o=this.zr.firstAfterOrEqual(i);return le.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.Zr=e,this.docs=function(){return new _t(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.Zr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return le.resolve(i?i.document.mutableCopy():mn.newInvalidDocument(t))}getEntries(e,t){let i=Ar();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():mn.newInvalidDocument(o))}),le.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Ar();const h=t.path,p=new Se(h.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(p);for(;m.hasNext();){const{key:y,value:{document:x}}=m.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||V4(U4(x),i)<=0||(o.has(x.key)||Nd(t,x))&&(l=l.insert(x.key,x.mutableCopy()))}return le.resolve(l)}getAllFromCollectionGroup(e,t,i,o){je(9500)}Xr(e,t){return le.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new hj(this)}getSize(e){return le.resolve(this.size)}}class hj extends sj{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.vr.addEntry(e,o)):this.vr.removeEntry(i)}),le.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.persistence=e,this.ei=new ja(t=>dg(t),fg),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.ti=0,this.ni=new vg,this.targetCount=0,this.ri=ko.rr()}forEachTarget(e,t){return this.ei.forEach((i,o)=>t(o)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ti&&(this.ti=t),le.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new ko(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.ar(t),le.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ei.forEach((h,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ei.delete(h),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),le.waitFor(l).next(()=>o)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const i=this.ei.get(t)||null;return le.resolve(i)}addMatchingKeys(e,t,i){return this.ni.qr(t,i),le.resolve()}removeMatchingKeys(e,t,i){this.ni.$r(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),le.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),le.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ni.Wr(t);return le.resolve(i)}containsKey(e,t){return le.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,t){this.ii={},this.overlays={},this.si=new _d(0),this.oi=!1,this.oi=!0,this._i=new lj,this.referenceDelegate=e(this),this.ai=new dj(this),this.indexManager=new WC,this.remoteDocumentCache=function(o){return new uj(o)}(i=>this.referenceDelegate.ui(i)),this.serializer=new QC(t),this.ci=new aj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ii[e.toKey()];return i||(i=new cj(t,this.referenceDelegate),this.ii[e.toKey()]=i),i}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,i){ve("MemoryPersistence","Starting transaction:",e);const o=new fj(this.si.next());return this.referenceDelegate.li(),i(o).next(l=>this.referenceDelegate.hi(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Pi(e,t){return le.or(Object.values(this.ii).map(i=>()=>i.containsKey(e,t)))}}class fj extends B4{constructor(e){super(),this.currentSequenceNumber=e}}class xg{constructor(e){this.persistence=e,this.Ti=new vg,this.Ii=null}static Ei(e){return new xg(e)}get di(){if(this.Ii)return this.Ii;throw je(60996)}addReference(e,t,i){return this.Ti.addReference(i,t),this.di.delete(i.toString()),le.resolve()}removeReference(e,t,i){return this.Ti.removeReference(i,t),this.di.add(i.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),le.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(o=>this.di.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.di.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.di,i=>{const o=Se.fromPath(i);return this.Ai(e,o).next(l=>{l||t.removeEntry(o,De.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return le.or([()=>le.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class ad{constructor(e,t){this.persistence=e,this.Ri=new ja(i=>F4(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=nj(this,t)}static Ei(e,t){return new ad(e,t)}li(){}hi(e){return le.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}Vr(e){let t=0;return this.Ar(e,i=>{t++}).next(()=>t)}Ar(e,t){return le.forEach(this.Ri,(i,o)=>this.gr(e,i,o).next(l=>l?le.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Xr(e,h=>this.gr(e,h,t).next(p=>{p||(i++,l.removeEntry(h,De.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),le.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.Ri.set(i,e.currentSequenceNumber),le.resolve()}removeReference(e,t,i){return this.Ri.set(i,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),le.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Uh(e.data.value)),t}gr(e,t,i){return le.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.Ri.get(t);return le.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.ls=i,this.hs=o}static Ps(e,t){let i=He(),o=He();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new _g(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return QN()?8:q4(gn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Rs(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.Vs(e,t,o,i).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new mj;return this.fs(e,t,h).next(p=>{if(l.result=p,this.Is)return this.gs(e,t,h,p.size)})}).next(()=>l.result)}gs(e,t,i,o){return i.documentReadCount<this.Es?(Eo()<=qe.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",To(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),le.resolve()):(Eo()<=qe.DEBUG&&ve("QueryEngine","Query:",To(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ds*o?(Eo()<=qe.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",To(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zs(t))):le.resolve())}Rs(e,t){if(x_(t))return le.resolve(null);let i=zs(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Np(t,null,"F"),i=zs(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const h=He(...l);return this.As.getDocuments(e,h).next(p=>this.indexManager.getMinOffset(e,i).next(m=>{const y=this.ps(t,p);return this.ys(t,y,h,m.readTime)?this.Rs(e,Np(t,null,"F")):this.ws(e,y,t,m)}))})))}Vs(e,t,i,o){return x_(t)||o.isEqual(De.min())?le.resolve(null):this.As.getDocuments(e,i).next(l=>{const h=this.ps(t,l);return this.ys(t,h,i,o)?le.resolve(null):(Eo()<=qe.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),To(t)),this.ws(e,h,t,L4(o,Sc)).next(p=>p))})}ps(e,t){let i=new $t(Q1(e));return t.forEach((o,l)=>{Nd(e,l)&&(i=i.add(l))}),i}ys(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}fs(e,t,i){return Eo()<=qe.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",To(t)),this.As.getDocumentsMatchingQuery(e,t,Si.min(),i)}ws(e,t,i,o){return this.As.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="LocalStore",gj=3e8;class yj{constructor(e,t,i,o){this.persistence=e,this.bs=t,this.serializer=o,this.Ss=new _t(Ue),this.Ds=new ja(l=>dg(l),fg),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(i)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ij(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function vj(s,e,t,i){return new yj(s,e,t,i)}async function yw(s,e){const t=ke(s);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.Fs(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const h=[],p=[];let m=He();for(const y of o){h.push(y.batchId);for(const x of y.mutations)m=m.add(x.key)}for(const y of l){p.push(y.batchId);for(const x of y.mutations)m=m.add(x.key)}return t.localDocuments.getDocuments(i,m).next(y=>({Ms:y,removedBatchIds:h,addedBatchIds:p}))})})}function xj(s,e){const t=ke(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.Cs.newChangeBuffer({trackRemovals:!0});return function(p,m,y,x){const w=y.batch,T=w.keys();let S=le.resolve();return T.forEach(A=>{S=S.next(()=>x.getEntry(m,A)).next(q=>{const N=y.docVersions.get(A);rt(N!==null,48541),q.version.compareTo(N)<0&&(w.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),x.addEntry(q)))})}),S.next(()=>p.mutationQueue.removeMutationBatch(m,w))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(p){let m=He();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(m=m.add(p.batch.mutations[y].key));return m}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function vw(s){const e=ke(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function _j(s,e){const t=ke(s),i=e.snapshotVersion;let o=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.Cs.newChangeBuffer({trackRemovals:!0});o=t.Ss;const p=[];e.targetChanges.forEach((x,w)=>{const T=o.get(w);if(!T)return;p.push(t.ai.removeMatchingKeys(l,x.removedDocuments,w).next(()=>t.ai.addMatchingKeys(l,x.addedDocuments,w)));let S=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?S=S.withResumeToken(ln.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):x.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(x.resumeToken,i)),o=o.insert(w,S),function(q,N,V){return q.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=gj?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(T,S,x)&&p.push(t.ai.updateTargetData(l,S))});let m=Ar(),y=He();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,x))}),p.push(bj(l,h,e.documentUpdates).next(x=>{m=x.xs,y=x.Os})),!i.isEqual(De.min())){const x=t.ai.getLastRemoteSnapshotVersion(l).next(w=>t.ai.setTargetsMetadata(l,l.currentSequenceNumber,i));p.push(x)}return le.waitFor(p).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,y)).next(()=>m)}).then(l=>(t.Ss=o,l))}function bj(s,e,t){let i=He(),o=He();return t.forEach(l=>i=i.add(l)),e.getEntries(s,i).next(l=>{let h=Ar();return t.forEach((p,m)=>{const y=l.get(p);m.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),m.isNoDocument()&&m.version.isEqual(De.min())?(e.removeEntry(p,m.readTime),h=h.insert(p,m)):!y.isValidDocument()||m.version.compareTo(y.version)>0||m.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(m),h=h.insert(p,m)):ve(bg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",m.version)}),{xs:h,Os:o}})}function wj(s,e){const t=ke(s);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=cg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Ej(s,e){const t=ke(s);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.ai.getTargetData(i,e).next(l=>l?(o=l,le.resolve(o)):t.ai.allocateTargetId(i).next(h=>(o=new xi(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.ai.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.Ss.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(i.targetId,i),t.Ds.set(e,i.targetId)),i})}async function jp(s,e,t){const i=ke(s),o=i.Ss.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,h=>i.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Go(h))throw h;ve(bg,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ss=i.Ss.remove(e),i.Ds.delete(o.target)}function D_(s,e,t){const i=ke(s);let o=De.min(),l=He();return i.persistence.runTransaction("Execute query","readwrite",h=>function(m,y,x){const w=ke(m),T=w.Ds.get(x);return T!==void 0?le.resolve(w.Ss.get(T)):w.ai.getTargetData(y,x)}(i,h,zs(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.ai.getMatchingKeysForTargetId(h,p.targetId).next(m=>{l=m})}).next(()=>i.bs.getDocumentsMatchingQuery(h,e,t?o:De.min(),t?l:He())).next(p=>(Tj(i,cC(e),p),{documents:p,Ns:l})))}function Tj(s,e,t){let i=s.vs.get(e)||De.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),s.vs.set(e,i)}class M_{constructor(){this.activeTargetIds=pC()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nj{constructor(){this.So=new M_,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,i){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new M_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="ConnectivityMonitor";class k_{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){ve(O_,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){ve(O_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh=null;function Ip(){return Nh===null?Nh=function(){return 268435456+Math.round(2147483648*Math.random())}():Nh++,"0x"+Nh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="RestConnection",Aj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Rj{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${i}/databases/${o}`,this.qo=this.databaseId.database===td?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Qo(e,t,i,o,l){const h=Ip(),p=this.$o(e,t.toUriEncodedString());ve(tp,`Sending RPC '${e}' ${h}:`,p,i);const m={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(m,o,l),this.Ko(e,p,m,i).then(y=>(ve(tp,`Received RPC '${e}' ${h}: `,y),y),y=>{throw Io(tp,`RPC '${e}' ${h} failed with error: `,y,"url: ",p,"request:",i),y})}Wo(e,t,i,o,l,h){return this.Qo(e,t,i,o,l)}Uo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ho}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),i&&i.headers.forEach((o,l)=>e[l]=o)}$o(e,t){const i=Aj[e];return`${this.Lo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class jj extends Rj{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,i,o){const l=Ip();return new Promise((h,p)=>{const m=new b1;m.setWithCredentials(!0),m.listenOnce(w1.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Lh.NO_ERROR:const x=m.getResponseJson();ve(dn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(x)),h(x);break;case Lh.TIMEOUT:ve(dn,`RPC '${e}' ${l} timed out`),p(new ye(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Lh.HTTP_ERROR:const w=m.getStatus();if(ve(dn,`RPC '${e}' ${l} failed with status:`,w,"response text:",m.getResponseText()),w>0){let T=m.getResponseJson();Array.isArray(T)&&(T=T[0]);const S=T==null?void 0:T.error;if(S&&S.status&&S.message){const A=function(N){const V=N.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(V)>=0?V:ae.UNKNOWN}(S.status);p(new ye(A,S.message))}else p(new ye(ae.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new ye(ae.UNAVAILABLE,"Connection failed."));break;default:je(9055,{s_:e,streamId:l,o_:m.getLastErrorCode(),__:m.getLastError()})}}finally{ve(dn,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(o);ve(dn,`RPC '${e}' ${l} sending request:`,o),m.send(t,"POST",y,i,15)})}a_(e,t,i){const o=Ip(),l=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=N1(),p=T1(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(m.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Uo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const x=l.join("");ve(dn,`Creating RPC '${e}' stream ${o}: ${x}`,m);const w=h.createWebChannel(x,m);let T=!1,S=!1;const A=new Cj({Go:N=>{S?ve(dn,`Not sending because RPC '${e}' stream ${o} is closed:`,N):(T||(ve(dn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),T=!0),ve(dn,`RPC '${e}' stream ${o} sending:`,N),w.send(N))},zo:()=>w.close()}),q=(N,V,P)=>{N.listen(V,k=>{try{P(k)}catch(F){setTimeout(()=>{throw F},0)}})};return q(w,dc.EventType.OPEN,()=>{S||(ve(dn,`RPC '${e}' stream ${o} transport opened.`),A.t_())}),q(w,dc.EventType.CLOSE,()=>{S||(S=!0,ve(dn,`RPC '${e}' stream ${o} transport closed`),A.r_())}),q(w,dc.EventType.ERROR,N=>{S||(S=!0,Io(dn,`RPC '${e}' stream ${o} transport errored. Name:`,N.name,"Message:",N.message),A.r_(new ye(ae.UNAVAILABLE,"The operation could not be completed")))}),q(w,dc.EventType.MESSAGE,N=>{var V;if(!S){const P=N.data[0];rt(!!P,16349);const k=P,F=(k==null?void 0:k.error)||((V=k[0])===null||V===void 0?void 0:V.error);if(F){ve(dn,`RPC '${e}' stream ${o} received error:`,F);const ee=F.status;let re=function(R){const M=kt[R];if(M!==void 0)return iw(M)}(ee),L=F.message;re===void 0&&(re=ae.INTERNAL,L="Unknown error status: "+ee+" with message "+F.message),S=!0,A.r_(new ye(re,L)),w.close()}else ve(dn,`RPC '${e}' stream ${o} received:`,P),A.i_(P)}}),q(p,E1.STAT_EVENT,N=>{N.stat===vp.PROXY?ve(dn,`RPC '${e}' stream ${o} detected buffering proxy`):N.stat===vp.NOPROXY&&ve(dn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{A.n_()},0),A}}function np(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(s){return new OC(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,t,i=1e3,o=1.5,l=6e4){this.bi=e,this.timerId=t,this.u_=i,this.c_=o,this.l_=l,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),i=Math.max(0,Date.now()-this.T_),o=Math.max(0,t-i);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,o,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="PersistentStream";class _w{constructor(e,t,i,o,l,h,p,m){this.bi=e,this.R_=i,this.V_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=m,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new xw(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Sr(t.toString()),Sr("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.m_===t&&this.B_(i,o)},i=>{e(()=>{const o=new ye(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.L_(o)})})}B_(e,t){const i=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{i(()=>this.listener.jo())}),this.stream.Jo(()=>{i(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(o=>{i(()=>this.L_(o))}),this.stream.onMessage(o=>{i(()=>++this.p_==1?this.q_(o):this.onNext(o))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return ve(P_,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(ve(P_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ij extends _w{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=LC(this.serializer,e),i=function(l){if(!("targetChange"in l))return De.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?De.min():h.readTime?Bs(h.readTime):De.min()}(e);return this.listener.Q_(t,i)}U_(e){const t={};t.database=Cp(this.serializer),t.addTarget=function(l,h){let p;const m=h.target;if(p=Ep(m)?{documents:zC(l,m)}:{query:BC(l,m).gt},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=lw(l,h.resumeToken);const y=Sp(l,h.expectedCount);y!==null&&(p.expectedCount=y)}else if(h.snapshotVersion.compareTo(De.min())>0){p.readTime=id(l,h.snapshotVersion.toTimestamp());const y=Sp(l,h.expectedCount);y!==null&&(p.expectedCount=y)}return p}(this.serializer,e);const i=HC(this.serializer,e);i&&(t.labels=i),this.F_(t)}K_(e){const t={};t.database=Cp(this.serializer),t.removeTarget=e,this.F_(t)}}class Dj extends _w{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=VC(e.writeResults,e.commitTime),i=Bs(e.commitTime);return this.listener.j_(i,t)}H_(){const e={};e.database=Cp(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>UC(this.serializer,i))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{}class Oj extends Mj{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.J_=!1}Y_(){if(this.J_)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,i,o){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Qo(e,Ap(t,i),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(ae.UNKNOWN,l.toString())})}Wo(e,t,i,o,l){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,p])=>this.connection.Wo(e,Ap(t,i),o,h,p,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ye(ae.UNKNOWN,h.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class kj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Sr(t),this.ea=!1):ve("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="RemoteStore";class Pj{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=l,this.ca.vo(h=>{i.enqueueAndForget(async()=>{Ia(this)&&(ve(Aa,"Restarting streams for network reachability change."),await async function(m){const y=ke(m);y.aa.add(4),await Gc(y),y.la.set("Unknown"),y.aa.delete(4),await Id(y)}(this))})}),this.la=new kj(i,o)}}async function Id(s){if(Ia(s))for(const e of s.ua)await e(!0)}async function Gc(s){for(const e of s.ua)await e(!1)}function bw(s,e){const t=ke(s);t._a.has(e.targetId)||(t._a.set(e.targetId,e),Ng(t)?Tg(t):Ko(t).b_()&&Eg(t,e))}function wg(s,e){const t=ke(s),i=Ko(t);t._a.delete(e),i.b_()&&ww(t,e),t._a.size===0&&(i.b_()?i.v_():Ia(t)&&t.la.set("Unknown"))}function Eg(s,e){if(s.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ko(s).U_(e)}function ww(s,e){s.ha.Ke(e),Ko(s).K_(e)}function Tg(s){s.ha=new jC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>s._a.get(e)||null,Pt:()=>s.datastore.serializer.databaseId}),Ko(s).start(),s.la.ta()}function Ng(s){return Ia(s)&&!Ko(s).w_()&&s._a.size>0}function Ia(s){return ke(s).aa.size===0}function Ew(s){s.ha=void 0}async function Lj(s){s.la.set("Online")}async function Uj(s){s._a.forEach((e,t)=>{Eg(s,e)})}async function Vj(s,e){Ew(s),Ng(s)?(s.la.ia(e),Tg(s)):s.la.set("Unknown")}async function zj(s,e,t){if(s.la.set("Online"),e instanceof ow&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const p of l.targetIds)o._a.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o._a.delete(p),o.ha.removeTarget(p))}(s,e)}catch(i){ve(Aa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await od(s,i)}else if(e instanceof Bh?s.ha.Xe(e):e instanceof aw?s.ha.ot(e):s.ha.nt(e),!t.isEqual(De.min()))try{const i=await vw(s.localStore);t.compareTo(i)>=0&&await function(l,h){const p=l.ha.It(h);return p.targetChanges.forEach((m,y)=>{if(m.resumeToken.approximateByteSize()>0){const x=l._a.get(y);x&&l._a.set(y,x.withResumeToken(m.resumeToken,h))}}),p.targetMismatches.forEach((m,y)=>{const x=l._a.get(m);if(!x)return;l._a.set(m,x.withResumeToken(ln.EMPTY_BYTE_STRING,x.snapshotVersion)),ww(l,m);const w=new xi(x.target,m,y,x.sequenceNumber);Eg(l,w)}),l.remoteSyncer.applyRemoteEvent(p)}(s,t)}catch(i){ve(Aa,"Failed to raise snapshot:",i),await od(s,i)}}async function od(s,e,t){if(!Go(e))throw e;s.aa.add(1),await Gc(s),s.la.set("Offline"),t||(t=()=>vw(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{ve(Aa,"Retrying IndexedDB access"),await t(),s.aa.delete(1),await Id(s)})}function Tw(s,e){return e().catch(t=>od(s,t,e))}async function Dd(s){const e=ke(s),t=ji(e);let i=e.oa.length>0?e.oa[e.oa.length-1].batchId:cg;for(;Bj(e);)try{const o=await wj(e.localStore,i);if(o===null){e.oa.length===0&&t.v_();break}i=o.batchId,qj(e,o)}catch(o){await od(e,o)}Nw(e)&&Sw(e)}function Bj(s){return Ia(s)&&s.oa.length<10}function qj(s,e){s.oa.push(e);const t=ji(s);t.b_()&&t.W_&&t.G_(e.mutations)}function Nw(s){return Ia(s)&&!ji(s).w_()&&s.oa.length>0}function Sw(s){ji(s).start()}async function Hj(s){ji(s).H_()}async function Fj(s){const e=ji(s);for(const t of s.oa)e.G_(t.mutations)}async function Gj(s,e,t){const i=s.oa.shift(),o=pg.from(i,e,t);await Tw(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await Dd(s)}async function $j(s,e){e&&ji(s).W_&&await async function(i,o){if(function(h){return RC(h)&&h!==ae.ABORTED}(o.code)){const l=i.oa.shift();ji(i).D_(),await Tw(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Dd(i)}}(s,e),Nw(s)&&Sw(s)}async function L_(s,e){const t=ke(s);t.asyncQueue.verifyOperationInProgress(),ve(Aa,"RemoteStore received new credentials");const i=Ia(t);t.aa.add(3),await Gc(t),i&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await Id(t)}async function Kj(s,e){const t=ke(s);e?(t.aa.delete(2),await Id(t)):e||(t.aa.add(2),await Gc(t),t.la.set("Unknown"))}function Ko(s){return s.Pa||(s.Pa=function(t,i,o){const l=ke(t);return l.Y_(),new Ij(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(s.datastore,s.asyncQueue,{jo:Lj.bind(null,s),Jo:Uj.bind(null,s),Zo:Vj.bind(null,s),Q_:zj.bind(null,s)}),s.ua.push(async e=>{e?(s.Pa.D_(),Ng(s)?Tg(s):s.la.set("Unknown")):(await s.Pa.stop(),Ew(s))})),s.Pa}function ji(s){return s.Ta||(s.Ta=function(t,i,o){const l=ke(t);return l.Y_(),new Dj(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(s.datastore,s.asyncQueue,{jo:()=>Promise.resolve(),Jo:Hj.bind(null,s),Zo:$j.bind(null,s),z_:Fj.bind(null,s),j_:Gj.bind(null,s)}),s.ua.push(async e=>{e?(s.Ta.D_(),await Dd(s)):(await s.Ta.stop(),s.oa.length>0&&(ve(Aa,`Stopping write stream with ${s.oa.length} pending writes`),s.oa=[]))})),s.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,p=new Sg(e,t,h,o,l);return p.start(i),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ag(s,e){if(Sr("AsyncQueue",`${e}: ${s}`),Go(s))return new ye(ae.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{static emptySet(e){return new jo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Se.comparator(t.key,i.key):(t,i)=>Se.comparator(t.key,i.key),this.keyedMap=fc(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new jo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(){this.Ia=new _t(Se.comparator)}track(e){const t=e.doc.key,i=this.Ia.get(t);i?e.type!==0&&i.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&i.type!==1?this.Ia=this.Ia.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Ia=this.Ia.remove(t):e.type===1&&i.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):je(63341,{Vt:e,Ea:i}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,i)=>{e.push(i)}),e}}class Po{constructor(e,t,i,o,l,h,p,m,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=m,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach(p=>{h.push({type:0,doc:p})}),new Po(e,t,jo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Td(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class Yj{constructor(){this.queries=V_(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,i){const o=ke(t),l=o.queries;o.queries=V_(),l.forEach((h,p)=>{for(const m of p.Ra)m.onError(i)})})(this,new ye(ae.ABORTED,"Firestore shutting down"))}}function V_(){return new ja(s=>K1(s),Td)}async function Rg(s,e){const t=ke(s);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Va()&&e.ma()&&(i=2):(l=new Qj,i=e.ma()?0:1);try{switch(i){case 0:l.Aa=await t.onListen(o,!0);break;case 1:l.Aa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const p=Ag(h,`Initialization of query '${To(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.Ra.push(e),e.ga(t.onlineState),l.Aa&&e.pa(l.Aa)&&jg(t)}async function Cg(s,e){const t=ke(s),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.Ra.indexOf(e);h>=0&&(l.Ra.splice(h,1),l.Ra.length===0?o=e.ma()?0:1:!l.Va()&&e.ma()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Wj(s,e){const t=ke(s);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const p of h.Ra)p.pa(o)&&(i=!0);h.Aa=o}}i&&jg(t)}function Xj(s,e,t){const i=ke(s),o=i.queries.get(e);if(o)for(const l of o.Ra)l.onError(t);i.queries.delete(e)}function jg(s){s.fa.forEach(e=>{e.next()})}var Dp,z_;(z_=Dp||(Dp={})).ya="default",z_.Cache="cache";class Ig{constructor(e,t,i){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=i||{}}pa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Po(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const i=t!=="Offline";return(!this.options.Fa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Dp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e){this.key=e}}class Rw{constructor(e){this.key=e}}class Zj{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=He(),this.mutatedKeys=He(),this.Ua=Q1(e),this.Ka=new jo(this.Ua)}get Wa(){return this.qa}Ga(e,t){const i=t?t.za:new U_,o=t?t.Ka:this.Ka;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,p=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,w)=>{const T=o.get(x),S=Nd(this.query,w)?w:null,A=!!T&&this.mutatedKeys.has(T.key),q=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let N=!1;T&&S?T.data.isEqual(S.data)?A!==q&&(i.track({type:3,doc:S}),N=!0):this.ja(T,S)||(i.track({type:2,doc:S}),N=!0,(m&&this.Ua(S,m)>0||y&&this.Ua(S,y)<0)&&(p=!0)):!T&&S?(i.track({type:0,doc:S}),N=!0):T&&!S&&(i.track({type:1,doc:T}),N=!0,(m||y)&&(p=!0)),N&&(S?(h=h.add(S),l=q?l.add(x):l.delete(x)):(h=h.delete(x),l=l.delete(x)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const x=this.query.limitType==="F"?h.last():h.first();h=h.delete(x.key),l=l.delete(x.key),i.track({type:1,doc:x})}return{Ka:h,za:i,ys:p,mutatedKeys:l}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const h=e.za.da();h.sort((x,w)=>function(S,A){const q=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{Vt:N})}};return q(S)-q(A)}(x.type,w.type)||this.Ua(x.doc,w.doc)),this.Ha(i),o=o!=null&&o;const p=t&&!o?this.Ja():[],m=this.$a.size===0&&this.current&&!o?1:0,y=m!==this.Qa;return this.Qa=m,h.length!==0||y?{snapshot:new Po(this.query,e.Ka,l,h,e.mutatedKeys,m===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ya:p}:{Ya:p}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new U_,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=He(),this.Ka.forEach(i=>{this.Za(i.key)&&(this.$a=this.$a.add(i.key))});const t=[];return e.forEach(i=>{this.$a.has(i)||t.push(new Rw(i))}),this.$a.forEach(i=>{e.has(i)||t.push(new Aw(i))}),t}Xa(e){this.qa=e.Ns,this.$a=He();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Po.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Dg="SyncEngine";class Jj{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class eI{constructor(e){this.key=e,this.tu=!1}}class tI{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.nu={},this.ru=new ja(p=>K1(p),Td),this.iu=new Map,this.su=new Set,this.ou=new _t(Se.comparator),this._u=new Map,this.au=new vg,this.uu={},this.cu=new Map,this.lu=ko.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function nI(s,e,t=!0){const i=Ow(s);let o;const l=i.ru.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.eu()):o=await Cw(i,e,t,!0),o}async function sI(s,e){const t=Ow(s);await Cw(t,e,!0,!1)}async function Cw(s,e,t,i){const o=await Ej(s.localStore,zs(e)),l=o.targetId,h=s.sharedClientState.addLocalQueryTarget(l,t);let p;return i&&(p=await rI(s,e,l,h==="current",o.resumeToken)),s.isPrimaryClient&&t&&bw(s.remoteStore,o),p}async function rI(s,e,t,i,o){s.Pu=(w,T,S)=>async function(q,N,V,P){let k=N.view.Ga(V);k.ys&&(k=await D_(q.localStore,N.query,!1).then(({documents:L})=>N.view.Ga(L,k)));const F=P&&P.targetChanges.get(N.targetId),ee=P&&P.targetMismatches.get(N.targetId)!=null,re=N.view.applyChanges(k,q.isPrimaryClient,F,ee);return q_(q,N.targetId,re.Ya),re.snapshot}(s,w,T,S);const l=await D_(s.localStore,e,!0),h=new Zj(e,l.Ns),p=h.Ga(l.documents),m=Fc.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",o),y=h.applyChanges(p,s.isPrimaryClient,m);q_(s,t,y.Ya);const x=new Jj(e,t,h);return s.ru.set(e,x),s.iu.has(t)?s.iu.get(t).push(e):s.iu.set(t,[e]),y.snapshot}async function iI(s,e,t){const i=ke(s),o=i.ru.get(e),l=i.iu.get(o.targetId);if(l.length>1)return i.iu.set(o.targetId,l.filter(h=>!Td(h,e))),void i.ru.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await jp(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&wg(i.remoteStore,o.targetId),Mp(i,o.targetId)}).catch(Fo)):(Mp(i,o.targetId),await jp(i.localStore,o.targetId,!0))}async function aI(s,e){const t=ke(s),i=t.ru.get(e),o=t.iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),wg(t.remoteStore,i.targetId))}async function oI(s,e,t){const i=mI(s);try{const o=await function(h,p){const m=ke(h),y=Gt.now(),x=p.reduce((S,A)=>S.add(A.key),He());let w,T;return m.persistence.runTransaction("Locally write mutations","readwrite",S=>{let A=Ar(),q=He();return m.Cs.getEntries(S,x).next(N=>{A=N,A.forEach((V,P)=>{P.isValidDocument()||(q=q.add(V))})}).next(()=>m.localDocuments.getOverlayedDocuments(S,A)).next(N=>{w=N;const V=[];for(const P of p){const k=EC(P,w.get(P.key).overlayedDocument);k!=null&&V.push(new ki(P.key,k,V1(k.value.mapValue),En.exists(!0)))}return m.mutationQueue.addMutationBatch(S,y,V,p)}).next(N=>{T=N;const V=N.applyToLocalDocumentSet(w,q);return m.documentOverlayCache.saveOverlays(S,N.batchId,V)})}).then(()=>({batchId:T.batchId,changes:W1(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(h,p,m){let y=h.uu[h.currentUser.toKey()];y||(y=new _t(Ue)),y=y.insert(p,m),h.uu[h.currentUser.toKey()]=y}(i,o.batchId,t),await $c(i,o.changes),await Dd(i.remoteStore)}catch(o){const l=Ag(o,"Failed to persist write");t.reject(l)}}async function jw(s,e){const t=ke(s);try{const i=await _j(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t._u.get(l);h&&(rt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.tu=!0:o.modifiedDocuments.size>0?rt(h.tu,14607):o.removedDocuments.size>0&&(rt(h.tu,42227),h.tu=!1))}),await $c(t,i,e)}catch(i){await Fo(i)}}function B_(s,e,t){const i=ke(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.ru.forEach((l,h)=>{const p=h.view.ga(e);p.snapshot&&o.push(p.snapshot)}),function(h,p){const m=ke(h);m.onlineState=p;let y=!1;m.queries.forEach((x,w)=>{for(const T of w.Ra)T.ga(p)&&(y=!0)}),y&&jg(m)}(i.eventManager,e),o.length&&i.nu.Q_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function lI(s,e,t){const i=ke(s);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i._u.get(e),l=o&&o.key;if(l){let h=new _t(Se.comparator);h=h.insert(l,mn.newNoDocument(l,De.min()));const p=He().add(l),m=new Cd(De.min(),new Map,new _t(Ue),h,p);await jw(i,m),i.ou=i.ou.remove(l),i._u.delete(e),Mg(i)}else await jp(i.localStore,e,!1).then(()=>Mp(i,e,t)).catch(Fo)}async function cI(s,e){const t=ke(s),i=e.batch.batchId;try{const o=await xj(t.localStore,e);Dw(t,i,null),Iw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await $c(t,o)}catch(o){await Fo(o)}}async function uI(s,e,t){const i=ke(s);try{const o=await function(h,p){const m=ke(h);return m.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let x;return m.mutationQueue.lookupMutationBatch(y,p).next(w=>(rt(w!==null,37113),x=w.keys(),m.mutationQueue.removeMutationBatch(y,w))).next(()=>m.mutationQueue.performConsistencyCheck(y)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(y,x,p)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x)).next(()=>m.localDocuments.getDocuments(y,x))})}(i.localStore,e);Dw(i,e,t),Iw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await $c(i,o)}catch(o){await Fo(o)}}function Iw(s,e){(s.cu.get(e)||[]).forEach(t=>{t.resolve()}),s.cu.delete(e)}function Dw(s,e,t){const i=ke(s);let o=i.uu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.uu[i.currentUser.toKey()]=o}}function Mp(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.iu.get(e))s.ru.delete(i),t&&s.nu.Tu(i,t);s.iu.delete(e),s.isPrimaryClient&&s.au.Ur(e).forEach(i=>{s.au.containsKey(i)||Mw(s,i)})}function Mw(s,e){s.su.delete(e.path.canonicalString());const t=s.ou.get(e);t!==null&&(wg(s.remoteStore,t),s.ou=s.ou.remove(e),s._u.delete(t),Mg(s))}function q_(s,e,t){for(const i of t)i instanceof Aw?(s.au.addReference(i.key,e),hI(s,i)):i instanceof Rw?(ve(Dg,"Document no longer in limbo: "+i.key),s.au.removeReference(i.key,e),s.au.containsKey(i.key)||Mw(s,i.key)):je(19791,{Iu:i})}function hI(s,e){const t=e.key,i=t.path.canonicalString();s.ou.get(t)||s.su.has(i)||(ve(Dg,"New document in limbo: "+t),s.su.add(i),Mg(s))}function Mg(s){for(;s.su.size>0&&s.ou.size<s.maxConcurrentLimboResolutions;){const e=s.su.values().next().value;s.su.delete(e);const t=new Se(dt.fromString(e)),i=s.lu.next();s._u.set(i,new eI(t)),s.ou=s.ou.insert(t,i),bw(s.remoteStore,new xi(zs(Ed(t.path)),i,"TargetPurposeLimboResolution",_d.le))}}async function $c(s,e,t){const i=ke(s),o=[],l=[],h=[];i.ru.isEmpty()||(i.ru.forEach((p,m)=>{h.push(i.Pu(m,e,t).then(y=>{var x;if((y||t)&&i.isPrimaryClient){const w=y?!y.fromCache:(x=t==null?void 0:t.targetChanges.get(m.targetId))===null||x===void 0?void 0:x.current;i.sharedClientState.updateQueryState(m.targetId,w?"current":"not-current")}if(y){o.push(y);const w=_g.Ps(m.targetId,y);l.push(w)}}))}),await Promise.all(h),i.nu.Q_(o),await async function(m,y){const x=ke(m);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>le.forEach(y,T=>le.forEach(T.ls,S=>x.persistence.referenceDelegate.addReference(w,T.targetId,S)).next(()=>le.forEach(T.hs,S=>x.persistence.referenceDelegate.removeReference(w,T.targetId,S)))))}catch(w){if(!Go(w))throw w;ve(bg,"Failed to update sequence numbers: "+w)}for(const w of y){const T=w.targetId;if(!w.fromCache){const S=x.Ss.get(T),A=S.snapshotVersion,q=S.withLastLimboFreeSnapshotVersion(A);x.Ss=x.Ss.insert(T,q)}}}(i.localStore,l))}async function dI(s,e){const t=ke(s);if(!t.currentUser.isEqual(e)){ve(Dg,"User change. New user:",e.toKey());const i=await yw(t.localStore,e);t.currentUser=e,function(l,h){l.cu.forEach(p=>{p.forEach(m=>{m.reject(new ye(ae.CANCELLED,h))})}),l.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await $c(t,i.Ms)}}function fI(s,e){const t=ke(s),i=t._u.get(e);if(i&&i.tu)return He().add(i.key);{let o=He();const l=t.iu.get(e);if(!l)return o;for(const h of l){const p=t.ru.get(h);o=o.unionWith(p.view.Wa)}return o}}function Ow(s){const e=ke(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=jw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lI.bind(null,e),e.nu.Q_=Wj.bind(null,e.eventManager),e.nu.Tu=Xj.bind(null,e.eventManager),e}function mI(s){const e=ke(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uI.bind(null,e),e}class ld{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jd(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return vj(this.persistence,new pj,e.initialUser,this.serializer)}Ru(e){return new gw(xg.Ei,this.serializer)}Au(e){return new Nj}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ld.provider={build:()=>new ld};class pI extends ld{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){rt(this.persistence.referenceDelegate instanceof ad,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new ej(i,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new gw(i=>ad.Ei(i,t),this.serializer)}}class Op{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>B_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dI.bind(null,this.syncEngine),await Kj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Yj}()}createDatastore(e){const t=jd(e.databaseInfo.databaseId),i=function(l){return new jj(l)}(e.databaseInfo);return function(l,h,p,m){return new Oj(l,h,p,m)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,h,p){return new Pj(i,o,l,h,p)}(this.localStore,this.datastore,e.asyncQueue,t=>B_(this.syncEngine,t,0),function(){return k_.C()?new k_:new Sj}())}createSyncEngine(e,t){return function(o,l,h,p,m,y,x){const w=new tI(o,l,h,p,m,y);return x&&(w.hu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=ke(o);ve(Aa,"RemoteStore shutting down."),l.aa.add(5),await Gc(l),l.ca.shutdown(),l.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Op.provider={build:()=>new Op};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Sr("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="FirestoreClient";class gI{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=fn.UNAUTHENTICATED,this.clientId=C1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async h=>{ve(Ii,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(i,h=>(ve(Ii,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Ag(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function sp(s,e){s.asyncQueue.verifyOperationInProgress(),ve(Ii,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener(async o=>{i.isEqual(o)||(await yw(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function H_(s,e){s.asyncQueue.verifyOperationInProgress();const t=await yI(s);ve(Ii,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(i=>L_(e.remoteStore,i)),s.setAppCheckTokenChangeListener((i,o)=>L_(e.remoteStore,o)),s._onlineComponents=e}async function yI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ve(Ii,"Using user provided OfflineComponentProvider");try{await sp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===ae.FAILED_PRECONDITION||o.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Io("Error using user provided cache. Falling back to memory cache: "+t),await sp(s,new ld)}}else ve(Ii,"Using default OfflineComponentProvider"),await sp(s,new pI(void 0));return s._offlineComponents}async function kw(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ve(Ii,"Using user provided OnlineComponentProvider"),await H_(s,s._uninitializedComponentsProvider._online)):(ve(Ii,"Using default OnlineComponentProvider"),await H_(s,new Op))),s._onlineComponents}function vI(s){return kw(s).then(e=>e.syncEngine)}async function cd(s){const e=await kw(s),t=e.eventManager;return t.onListen=nI.bind(null,e.syncEngine),t.onUnlisten=iI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aI.bind(null,e.syncEngine),t}function xI(s,e,t={}){const i=new Er;return s.asyncQueue.enqueueAndForget(async()=>function(l,h,p,m,y){const x=new Og({next:T=>{x.yu(),h.enqueueAndForget(()=>Cg(l,w));const S=T.docs.has(p);!S&&T.fromCache?y.reject(new ye(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&T.fromCache&&m&&m.source==="server"?y.reject(new ye(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),w=new Ig(Ed(p.path),x,{includeMetadataChanges:!0,Fa:!0});return Rg(l,w)}(await cd(s),s.asyncQueue,e,t,i)),i.promise}function _I(s,e,t={}){const i=new Er;return s.asyncQueue.enqueueAndForget(async()=>function(l,h,p,m,y){const x=new Og({next:T=>{x.yu(),h.enqueueAndForget(()=>Cg(l,w)),T.fromCache&&m.source==="server"?y.reject(new ye(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),w=new Ig(p,x,{includeMetadataChanges:!0,Fa:!0});return Rg(l,w)}(await cd(s),s.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(s,e,t){if(!t)throw new ye(ae.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function bI(s,e,t,i){if(e===!0&&i===!0)throw new ye(ae.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function G_(s){if(!Se.isDocumentKey(s))throw new ye(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function $_(s){if(Se.isDocumentKey(s))throw new ye(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Md(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":je(12329,{type:typeof s})}function Tn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ye(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Md(s);throw new ye(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="firestore.googleapis.com",K_=!0;class Q_{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Uw,this.ssl=K_}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:K_;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZC)throw new ye(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Od{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Q_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Q_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new R4;switch(i.type){case"firstParty":return new D4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=F_.get(t);i&&(ve("ComponentProvider","Removing Datastore"),F_.delete(t),i.terminate())}(this),Promise.resolve()}}function wI(s,e,t,i={}){var o;const l=(s=Tn(s,Od))._getSettings(),h=Object.assign(Object.assign({},l),{emulatorOptions:s._getEmulatorOptions()}),p=`${e}:${t}`;l.host!==Uw&&l.host!==p&&Io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},l),{host:p,ssl:!1,emulatorOptions:i});if(!wa(m,h)&&(s._setSettings(m),i.mockUserToken)){let y,x;if(typeof i.mockUserToken=="string")y=i.mockUserToken,x=fn.MOCK_USER;else{y=Db(i.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new ye(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new fn(w)}s._authCredentials=new C4(new A1(y,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Pi(this.firestore,e,this._query)}}class pn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}}class Ei extends Pi{constructor(e,t,i){super(e,t,Ed(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new Se(e))}withConverter(e){return new Ei(this.firestore,e,this._path)}}function xe(s,e,...t){if(s=mt(s),Lw("collection","path",e),s instanceof Od){const i=dt.fromString(e,...t);return $_(i),new Ei(s,null,i)}{if(!(s instanceof pn||s instanceof Ei))throw new ye(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(dt.fromString(e,...t));return $_(i),new Ei(s.firestore,null,i)}}function ge(s,e,...t){if(s=mt(s),arguments.length===1&&(e=C1.newId()),Lw("doc","path",e),s instanceof Od){const i=dt.fromString(e,...t);return G_(i),new pn(s,null,new Se(i))}{if(!(s instanceof pn||s instanceof Ei))throw new ye(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(dt.fromString(e,...t));return G_(i),new pn(s.firestore,s instanceof Ei?s.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="AsyncQueue";class W_{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new xw(this,"async_queue_retry"),this.ju=()=>{const i=np();i&&ve(Y_,"Visibility state changed to "+i.visibilityState),this.y_.A_()},this.Hu=e;const t=np();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=np();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new Er;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Go(e))throw e;ve(Y_,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(i=>{throw this.Ku=i,this.Wu=!1,Sr("INTERNAL UNHANDLED ERROR: ",X_(i)),i}).then(i=>(this.Wu=!1,i))));return this.Hu=t,t}enqueueAfterDelay(e,t,i){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const o=Sg.createAndSchedule(this,e,t,i,l=>this.Xu(l));return this.Uu.push(o),o}Ju(){this.Ku&&je(47125,{ec:X_(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function X_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(s){return function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1}(s,["next","error","complete"])}class Hs extends Od{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new W_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new W_(e),this._firestoreClient=void 0,await e}}}function EI(s,e){const t=typeof s=="object"?s:Qp(),i=typeof s=="string"?s:td,o=gd(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=Cb("firestore");l&&wI(o,...l)}return o}function Kc(s){if(s._terminated)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||TI(s),s._firestoreClient}function TI(s){var e,t,i;const o=s._freezeSettings(),l=function(p,m,y,x){return new K4(p,m,y,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,Pw(x.experimentalLongPollingOptions),x.useFetchStreams)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new gI(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(p){const m=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(m),_online:m}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lo(ln.fromBase64String(e))}catch(t){throw new ye(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Lo(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=/^__.*__$/;class SI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ki(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hc(e,this.data,t,this.fieldTransforms)}}class Vw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ki(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zw(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{oc:s})}}class Lg{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this._c(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new Lg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ac({path:i,cc:!1});return o.lc(e),o}hc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ac({path:i,cc:!1});return o._c(),o}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return ud(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(zw(this.oc)&&NI.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class AI{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||jd(e)}dc(e,t,i,o=!1){return new Lg({oc:e,methodName:t,Ec:i,path:on.emptyPath(),cc:!1,Ic:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yc(s){const e=s._freezeSettings(),t=jd(s._databaseId);return new AI(s._databaseId,!!e.ignoreUndefinedProperties,t)}function Ug(s,e,t,i,o,l={}){const h=s.dc(l.merge||l.mergeFields?2:0,e,t,o);zg("Data must be an object, but it was:",h,i);const p=Hw(i,h);let m,y;if(l.merge)m=new Un(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const x=[];for(const w of l.mergeFields){const T=kp(e,w,t);if(!h.contains(T))throw new ye(ae.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Gw(x,T)||x.push(T)}m=new Un(x),y=h.fieldTransforms.filter(w=>m.covers(w.field))}else m=null,y=h.fieldTransforms;return new SI(new jn(p),m,y)}class Pd extends kd{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pd}}class Vg extends kd{_toFieldTransform(e){return new xC(e.path,new Ic)}isEqual(e){return e instanceof Vg}}function Bw(s,e,t,i){const o=s.dc(1,e,t);zg("Data must be an object, but it was:",o,i);const l=[],h=jn.empty();Oi(i,(m,y)=>{const x=Bg(e,m,t);y=mt(y);const w=o.hc(x);if(y instanceof Pd)l.push(x);else{const T=Wc(y,w);T!=null&&(l.push(x),h.set(x,T))}});const p=new Un(l);return new Vw(h,p,o.fieldTransforms)}function qw(s,e,t,i,o,l){const h=s.dc(1,e,t),p=[kp(e,i,t)],m=[o];if(l.length%2!=0)throw new ye(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)p.push(kp(e,l[T])),m.push(l[T+1]);const y=[],x=jn.empty();for(let T=p.length-1;T>=0;--T)if(!Gw(y,p[T])){const S=p[T];let A=m[T];A=mt(A);const q=h.hc(S);if(A instanceof Pd)y.push(S);else{const N=Wc(A,q);N!=null&&(y.push(S),x.set(S,N))}}const w=new Un(y);return new Vw(x,w,h.fieldTransforms)}function RI(s,e,t,i=!1){return Wc(t,s.dc(i?4:3,e))}function Wc(s,e){if(Fw(s=mt(s)))return zg("Unsupported field value:",e,s),Hw(s,e);if(s instanceof kd)return function(i,o){if(!zw(o.oc))throw o.Tc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Tc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(i,o){const l=[];let h=0;for(const p of i){let m=Wc(p,o.Pc(h));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),h++}return{arrayValue:{values:l}}}(s,e)}return function(i,o){if((i=mt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return gC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Gt.fromDate(i);return{timestampValue:id(o.serializer,l)}}if(i instanceof Gt){const l=new Gt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:id(o.serializer,l)}}if(i instanceof kg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Lo)return{bytesValue:lw(o.serializer,i._byteString)};if(i instanceof pn){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Tc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:yg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Pg)return function(h,p){return{mapValue:{fields:{[L1]:{stringValue:U1},[nd]:{arrayValue:{values:h.toArray().map(y=>{if(typeof y!="number")throw p.Tc("VectorValues must only contain numeric values.");return mg(p.serializer,y)})}}}}}}(i,o);throw o.Tc(`Unsupported field value: ${Md(i)}`)}(s,e)}function Hw(s,e){const t={};return I1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oi(s,(i,o)=>{const l=Wc(o,e.uc(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function Fw(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Gt||s instanceof kg||s instanceof Lo||s instanceof pn||s instanceof kd||s instanceof Pg)}function zg(s,e,t){if(!Fw(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=Md(t);throw i==="an object"?e.Tc(s+" a custom object"):e.Tc(s+" "+i)}}function kp(s,e,t){if((e=mt(e))instanceof Qc)return e._internalPath;if(typeof e=="string")return Bg(s,e);throw ud("Field path arguments must be of type string or ",s,!1,void 0,t)}const CI=new RegExp("[~\\*/\\[\\]]");function Bg(s,e,t){if(e.search(CI)>=0)throw ud(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Qc(...e.split("."))._internalPath}catch{throw ud(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function ud(s,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let m="";return(l||h)&&(m+=" (found",l&&(m+=` in field ${i}`),h&&(m+=` in document ${o}`),m+=")"),new ye(ae.INVALID_ARGUMENT,p+s+m)}function Gw(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ld("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class jI extends $w{data(){return super.data()}}function Ld(s,e){return typeof e=="string"?Bg(s,e):e instanceof Qc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ye(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qg{}class Qw extends qg{}function Ve(s,e,...t){let i=[];e instanceof qg&&i.push(e),i=i.concat(t),function(l){const h=l.filter(m=>m instanceof Hg).length,p=l.filter(m=>m instanceof Ud).length;if(h>1||h>0&&p>0)throw new ye(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)s=o._apply(s);return s}class Ud extends Qw{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Ud(e,t,i)}_apply(e){const t=this._parse(e);return Yw(e._query,t),new Pi(e.firestore,e.converter,Tp(e._query,t))}_parse(e){const t=Yc(e.firestore);return function(l,h,p,m,y,x,w){let T;if(y.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new ye(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){eb(w,x);const A=[];for(const q of w)A.push(J_(m,l,q));T={arrayValue:{values:A}}}else T=J_(m,l,w)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||eb(w,x),T=RI(p,h,w,x==="in"||x==="not-in");return Pt.create(y,x,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ye(s,e,t){const i=e,o=Ld("where",s);return Ud._create(o,i,t)}class Hg extends qg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hg(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:gs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let h=o;const p=l.getFlattenedFilters();for(const m of p)Yw(h,m),h=Tp(h,m)}(e._query,t),new Pi(e.firestore,e.converter,Tp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fg extends Qw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Fg(e,t)}_apply(e){const t=function(o,l,h){if(o.startAt!==null)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new jc(l,h)}(e._query,this._field,this._direction);return new Pi(e.firestore,e.converter,function(o,l){const h=o.explicitOrderBy.concat([l]);return new $o(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function Uo(s,e="asc"){const t=e,i=Ld("orderBy",s);return Fg._create(i,t)}function J_(s,e,t){if(typeof(t=mt(t))=="string"){if(t==="")throw new ye(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$1(e)&&t.indexOf("/")!==-1)throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(dt.fromString(t));if(!Se.isDocumentKey(i))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return f_(s,new Se(i))}if(t instanceof pn)return f_(s,t._key);throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Md(t)}.`)}function eb(s,e){if(!Array.isArray(s)||s.length===0)throw new ye(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Yw(s,e){const t=function(o,l){for(const h of o)for(const p of h.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ye(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class II{convertValue(e,t="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Oi(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[nd].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(h=>Ct(h.doubleValue));return new Pg(l)}convertGeoPoint(e){return new kg(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=wd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ac(e));default:return null}}convertTimestamp(e){const t=Ai(e);return new Gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=dt.fromString(e);rt(mw(i),9688,{name:e});const o=new Rc(i.get(1),i.get(3)),l=new Se(i.popFirst(5));return o.isEqual(t)||Sr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(s,e,t){let i;return i=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ww extends $w{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Ld("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class qh extends Ww{data(e={}){return super.data(e)}}class Xw{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new pc(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new qh(this._firestore,this._userDataWriter,i.key,i,new pc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(p=>{const m=new qh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new pc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:m,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(p=>l||p.type!==3).map(p=>{const m=new qh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new pc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,x=-1;return p.type!==0&&(y=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),x=h.indexOf(p.doc.key)),{type:DI(p.type),doc:m,oldIndex:y,newIndex:x}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function DI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(s){s=Tn(s,pn);const e=Tn(s.firestore,Hs);return xI(Kc(e),s._key).then(t=>Zw(e,s,t))}class $g extends II{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}}function tt(s){s=Tn(s,Pi);const e=Tn(s.firestore,Hs),t=Kc(e),i=new $g(e);return Kw(s._query),_I(t,s._query).then(o=>new Xw(e,i,s,o))}function Kg(s,e,t){s=Tn(s,pn);const i=Tn(s.firestore,Hs),o=Gg(s.converter,e,t);return Xc(i,[Ug(Yc(i),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,En.none())])}function ft(s,e,t,...i){s=Tn(s,pn);const o=Tn(s.firestore,Hs),l=Yc(o);let h;return h=typeof(e=mt(e))=="string"||e instanceof Qc?qw(l,"updateDoc",s._key,e,t,i):Bw(l,"updateDoc",s._key,e),Xc(o,[h.toMutation(s._key,En.exists(!0))])}function rs(s){return Xc(Tn(s.firestore,Hs),[new Rd(s._key,En.none())])}function Fs(s,e){const t=Tn(s.firestore,Hs),i=ge(s),o=Gg(s.converter,e);return Xc(t,[Ug(Yc(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,En.exists(!1))]).then(()=>i)}function pt(s,...e){var t,i,o;s=mt(s);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||Z_(e[h])||(l=e[h],h++);const p={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Z_(e[h])){const w=e[h];e[h]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[h+1]=(i=w.error)===null||i===void 0?void 0:i.bind(w),e[h+2]=(o=w.complete)===null||o===void 0?void 0:o.bind(w)}let m,y,x;if(s instanceof pn)y=Tn(s.firestore,Hs),x=Ed(s._key.path),m={next:w=>{e[h]&&e[h](Zw(y,s,w))},error:e[h+1],complete:e[h+2]};else{const w=Tn(s,Pi);y=Tn(w.firestore,Hs),x=w._query;const T=new $g(y);m={next:S=>{e[h]&&e[h](new Xw(y,T,w,S))},error:e[h+1],complete:e[h+2]},Kw(s._query)}return function(T,S,A,q){const N=new Og(q),V=new Ig(S,N,A);return T.asyncQueue.enqueueAndForget(async()=>Rg(await cd(T),V)),()=>{N.yu(),T.asyncQueue.enqueueAndForget(async()=>Cg(await cd(T),V))}}(Kc(y),x,p,m)}function Xc(s,e){return function(i,o){const l=new Er;return i.asyncQueue.enqueueAndForget(async()=>oI(await vI(i),o,l)),l.promise}(Kc(s),e)}function Zw(s,e,t){const i=t.docs.get(e._key),o=new $g(s);return new Ww(s,o,e._key,i,new pc(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yc(e)}set(e,t,i){this._verifyNotCommitted();const o=rp(e,this._firestore),l=Gg(o.converter,t,i),h=Ug(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,i);return this._mutations.push(h.toMutation(o._key,En.none())),this}update(e,t,i,...o){this._verifyNotCommitted();const l=rp(e,this._firestore);let h;return h=typeof(t=mt(t))=="string"||t instanceof Qc?qw(this._dataReader,"WriteBatch.update",l._key,t,i,o):Bw(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,En.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=rp(e,this._firestore);return this._mutations=this._mutations.concat(new Rd(t._key,En.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ye(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rp(s,e){if((s=mt(s)).firestore!==e)throw new ye(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function is(){return new Vg("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(s){return Kc(s=Tn(s,Hs)),new MI(s,e=>Xc(s,e))}(function(e,t=!0){(function(o){Ho=o})(Ca),Ea(new Ni("firestore",(i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),p=new Hs(new j4(i.getProvider("auth-internal")),new M4(h,i.getProvider("app-check-internal")),function(y,x){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ye(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rc(y.options.projectId,x)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),p._setSettings(l),p},"PUBLIC").setMultipleInstances(!0)),Us(t_,n_,e),Us(t_,n_,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="firebasestorage.googleapis.com",e2="storageBucket",OI=2*60*1e3,kI=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St extends Gs{constructor(e,t,i=0){super(ip(e),`Firebase Storage: ${t} (${ip(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,St.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ip(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Nt;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Nt||(Nt={}));function ip(s){return"storage/"+s}function Qg(){const s="An unknown error occurred, please check the error payload for server response.";return new St(Nt.UNKNOWN,s)}function PI(s){return new St(Nt.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function LI(s){return new St(Nt.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function UI(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new St(Nt.UNAUTHENTICATED,s)}function VI(){return new St(Nt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function zI(s){return new St(Nt.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function BI(){return new St(Nt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qI(){return new St(Nt.CANCELED,"User canceled the upload/download.")}function HI(s){return new St(Nt.INVALID_URL,"Invalid URL '"+s+"'.")}function FI(s){return new St(Nt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function GI(){return new St(Nt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+e2+"' property when initializing the app?")}function $I(){return new St(Nt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function KI(){return new St(Nt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function QI(s){return new St(Nt.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Pp(s){return new St(Nt.INVALID_ARGUMENT,s)}function t2(){return new St(Nt.APP_DELETED,"The Firebase app was deleted.")}function YI(s){return new St(Nt.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bc(s,e){return new St(Nt.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function ac(s){throw new St(Nt.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Vn.makeFromUrl(e,t)}catch{return new Vn(e,"")}if(i.path==="")return i;throw FI(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function l(F){F.path.charAt(F.path.length-1)==="/"&&(F.path_=F.path_.slice(0,-1))}const h="(/(.*))?$",p=new RegExp("^gs://"+o+h,"i"),m={bucket:1,path:3};function y(F){F.path_=decodeURIComponent(F.path)}const x="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",S=new RegExp(`^https?://${w}/${x}/b/${o}/o${T}`,"i"),A={bucket:1,path:3},q=t===Jw?"(?:storage.googleapis.com|storage.cloud.google.com)":t,N="([^?#]*)",V=new RegExp(`^https?://${q}/${o}/${N}`,"i"),k=[{regex:p,indices:m,postModify:l},{regex:S,indices:A,postModify:y},{regex:V,indices:{bucket:1,path:2},postModify:y}];for(let F=0;F<k.length;F++){const ee=k[F],re=ee.regex.exec(e);if(re){const L=re[ee.indices.bucket];let E=re[ee.indices.path];E||(E=""),i=new Vn(L,E),ee.postModify(i);break}}if(i==null)throw HI(e);return i}}class WI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(s,e,t){let i=1,o=null,l=null,h=!1,p=0;function m(){return p===2}let y=!1;function x(...N){y||(y=!0,e.apply(null,N))}function w(N){o=setTimeout(()=>{o=null,s(S,m())},N)}function T(){l&&clearTimeout(l)}function S(N,...V){if(y){T();return}if(N){T(),x.call(null,N,...V);return}if(m()||h){T(),x.call(null,N,...V);return}i<64&&(i*=2);let k;p===1?(p=2,k=0):k=(i+Math.random())*1e3,w(k)}let A=!1;function q(N){A||(A=!0,T(),!y&&(o!==null?(N||(p=2),clearTimeout(o),w(0)):N||(p=1)))}return w(0),l=setTimeout(()=>{h=!0,q(!0)},t),q}function ZI(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(s){return s!==void 0}function eD(s){return typeof s=="object"&&!Array.isArray(s)}function Yg(s){return typeof s=="string"||s instanceof String}function tb(s){return Wg()&&s instanceof Blob}function Wg(){return typeof Blob<"u"}function nb(s,e,t,i){if(i<e)throw Pp(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>t)throw Pp(`Invalid value for '${s}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(s,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${s}`}function n2(s){const e=encodeURIComponent;let t="?";for(const i in s)if(s.hasOwnProperty(i)){const o=e(i)+"="+e(s[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var ba;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(ba||(ba={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(s,e){const t=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,l=e.indexOf(s)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,t,i,o,l,h,p,m,y,x,w,T=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=p,this.errorCallback_=m,this.timeout_=y,this.progressCallback_=x,this.connectionFactory_=w,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,A)=>{this.resolve_=S,this.reject_=A,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Sh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const h=p=>{const m=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,y)};this.progressCallback_!==null&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const p=l.getErrorCode()===ba.NO_ERROR,m=l.getStatus();if(!p||tD(m,this.additionalRetryCodes_)&&this.retry){const x=l.getErrorCode()===ba.ABORT;i(!1,new Sh(!1,null,x));return}const y=this.successCodes_.indexOf(m)!==-1;i(!0,new Sh(y,l))})},t=(i,o)=>{const l=this.resolve_,h=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const m=this.callback_(p,p.getResponse());JI(m)?l(m):l()}catch(m){h(m)}else if(p!==null){const m=Qg();m.serverResponse=p.getErrorText(),this.errorCallback_?h(this.errorCallback_(p,m)):h(m)}else if(o.canceled){const m=this.appDelete_?t2():qI();h(m)}else{const m=BI();h(m)}};this.canceled_?t(!1,new Sh(!1,null,!0)):this.backoffId_=XI(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ZI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Sh{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function sD(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function rD(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function iD(s,e){e&&(s["X-Firebase-GMPID"]=e)}function aD(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function oD(s,e,t,i,o,l,h=!0){const p=n2(s.urlParams),m=s.url+p,y=Object.assign({},s.headers);return iD(y,e),sD(y,t),rD(y,l),aD(y,i),new nD(m,s.method,y,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function cD(...s){const e=lD();if(e!==void 0){const t=new e;for(let i=0;i<s.length;i++)t.append(s[i]);return t.getBlob()}else{if(Wg())return new Blob(s);throw new St(Nt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function uD(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(s){if(typeof atob>"u")throw QI("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ap{constructor(e,t){this.data=e,this.contentType=t||null}}function dD(s,e){switch(s){case Ls.RAW:return new ap(s2(e));case Ls.BASE64:case Ls.BASE64URL:return new ap(r2(s,e));case Ls.DATA_URL:return new ap(mD(e),pD(e))}throw Qg()}function s2(s){const e=[];for(let t=0;t<s.length;t++){let i=s.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=i,h=s.charCodeAt(++t);i=65536|(l&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function fD(s){let e;try{e=decodeURIComponent(s)}catch{throw bc(Ls.DATA_URL,"Malformed data URL.")}return s2(e)}function r2(s,e){switch(s){case Ls.BASE64:{const o=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(o||l)throw bc(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ls.BASE64URL:{const o=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(o||l)throw bc(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=hD(e)}catch(o){throw o.message.includes("polyfill")?o:bc(s,"Invalid character found")}const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}class i2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw bc(Ls.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=gD(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function mD(s){const e=new i2(s);return e.base64?r2(Ls.BASE64,e.rest):fD(e.rest)}function pD(s){return new i2(s).contentType}function gD(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,t){let i=0,o="";tb(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(tb(this.data_)){const i=this.data_,o=uD(i,e,t);return o===null?null:new vi(o)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new vi(i,!0)}}static getBlob(...e){if(Wg()){const t=e.map(i=>i instanceof vi?i.data_:i);return new vi(cD.apply(null,t))}else{const t=e.map(h=>Yg(h)?dD(Ls.RAW,h).data:h.data_);let i=0;t.forEach(h=>{i+=h.byteLength});const o=new Uint8Array(i);let l=0;return t.forEach(h=>{for(let p=0;p<h.length;p++)o[l++]=h[p]}),new vi(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(s){let e;try{e=JSON.parse(s)}catch{return null}return eD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function vD(s,e){const t=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?t:s+"/"+t}function o2(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(s,e){return e}class wn{constructor(e,t,i,o){this.server=e,this.local=t||e,this.writable=!!i,this.xform=o||xD}}let Ah=null;function _D(s){return!Yg(s)||s.length<2?s:o2(s)}function l2(){if(Ah)return Ah;const s=[];s.push(new wn("bucket")),s.push(new wn("generation")),s.push(new wn("metageneration")),s.push(new wn("name","fullPath",!0));function e(l,h){return _D(h)}const t=new wn("name");t.xform=e,s.push(t);function i(l,h){return h!==void 0?Number(h):h}const o=new wn("size");return o.xform=i,s.push(o),s.push(new wn("timeCreated")),s.push(new wn("updated")),s.push(new wn("md5Hash",null,!0)),s.push(new wn("cacheControl",null,!0)),s.push(new wn("contentDisposition",null,!0)),s.push(new wn("contentEncoding",null,!0)),s.push(new wn("contentLanguage",null,!0)),s.push(new wn("contentType",null,!0)),s.push(new wn("metadata","customMetadata",!0)),Ah=s,Ah}function bD(s,e){function t(){const i=s.bucket,o=s.fullPath,l=new Vn(i,o);return e._makeStorageReference(l)}Object.defineProperty(s,"ref",{get:t})}function wD(s,e,t){const i={};i.type="file";const o=t.length;for(let l=0;l<o;l++){const h=t[l];i[h.local]=h.xform(i,e[h.server])}return bD(i,s),i}function c2(s,e,t){const i=a2(e);return i===null?null:wD(s,i,t)}function ED(s,e,t,i){const o=a2(e);if(o===null||!Yg(o.downloadTokens))return null;const l=o.downloadTokens;if(l.length===0)return null;const h=encodeURIComponent;return l.split(",").map(y=>{const x=s.bucket,w=s.fullPath,T="/b/"+h(x)+"/o/"+h(w),S=Xg(T,t,i),A=n2({alt:"media",token:y});return S+A})[0]}function TD(s,e){const t={},i=e.length;for(let o=0;o<i;o++){const l=e[o];l.writable&&(t[l.server]=s[l.local])}return JSON.stringify(t)}class u2{constructor(e,t,i,o){this.url=e,this.method=t,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(s){if(!s)throw Qg()}function ND(s,e){function t(i,o){const l=c2(s,o,e);return h2(l!==null),l}return t}function SD(s,e){function t(i,o){const l=c2(s,o,e);return h2(l!==null),ED(l,o,s.host,s._protocol)}return t}function d2(s){function e(t,i){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=VI():o=UI():t.getStatus()===402?o=LI(s.bucket):t.getStatus()===403?o=zI(s.path):o=i,o.status=t.getStatus(),o.serverResponse=i.serverResponse,o}return e}function AD(s){const e=d2(s);function t(i,o){let l=e(i,o);return i.getStatus()===404&&(l=PI(s.path)),l.serverResponse=o.serverResponse,l}return t}function RD(s,e,t){const i=e.fullServerUrl(),o=Xg(i,s.host,s._protocol),l="GET",h=s.maxOperationRetryTime,p=new u2(o,l,SD(s,t),h);return p.errorHandler=AD(e),p}function CD(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function jD(s,e,t){const i=Object.assign({},t);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=CD(null,e)),i}function ID(s,e,t,i,o){const l=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function p(){let k="";for(let F=0;F<2;F++)k=k+Math.random().toString().slice(2);return k}const m=p();h["Content-Type"]="multipart/related; boundary="+m;const y=jD(e,i,o),x=TD(y,t),w="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+x+`\r
--`+m+`\r
Content-Type: `+y.contentType+`\r
\r
`,T=`\r
--`+m+"--",S=vi.getBlob(w,i,T);if(S===null)throw $I();const A={name:y.fullPath},q=Xg(l,s.host,s._protocol),N="POST",V=s.maxUploadRetryTime,P=new u2(q,N,ND(s,t),V);return P.urlParams=A,P.headers=h,P.body=S.uploadData(),P.errorHandler=d2(e),P}class DD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ba.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ba.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ba.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,o){if(this.sent_)throw ac("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ac("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ac("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ac("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ac("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class MD extends DD{initXhr(){this.xhr_.responseType="text"}}function f2(){return new MD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,t){this._service=e,t instanceof Vn?this._location=t:this._location=Vn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ra(e,t)}get root(){const e=new Vn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return o2(this._location.path)}get storage(){return this._service}get parent(){const e=yD(this._location.path);if(e===null)return null;const t=new Vn(this._location.bucket,e);return new Ra(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw YI(e)}}function OD(s,e,t){s._throwIfRoot("uploadBytes");const i=ID(s.storage,s._location,l2(),new vi(e,!0),t);return s.storage.makeRequestWithTokens(i,f2).then(o=>({metadata:o,ref:s}))}function kD(s){s._throwIfRoot("getDownloadURL");const e=RD(s.storage,s._location,l2());return s.storage.makeRequestWithTokens(e,f2).then(t=>{if(t===null)throw KI();return t})}function PD(s,e){const t=vD(s._location.path,e),i=new Vn(s._location.bucket,t);return new Ra(s.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(s){return/^[A-Za-z]+:\/\//.test(s)}function UD(s,e){return new Ra(s,e)}function m2(s,e){if(s instanceof Zg){const t=s;if(t._bucket==null)throw GI();const i=new Ra(t,t._bucket);return e!=null?m2(i,e):i}else return e!==void 0?PD(s,e):s}function VD(s,e){if(e&&LD(e)){if(s instanceof Zg)return UD(s,e);throw Pp("To use ref(service, url), the first argument must be a Storage instance.")}else return m2(s,e)}function sb(s,e){const t=e==null?void 0:e[e2];return t==null?null:Vn.makeFromBucketSpec(t,s)}function zD(s,e,t,i={}){s.host=`${e}:${t}`,s._protocol="http";const{mockUserToken:o}=i;o&&(s._overrideAuthToken=typeof o=="string"?o:Db(o,s.app.options.projectId))}class Zg{constructor(e,t,i,o,l){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=l,this._bucket=null,this._host=Jw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=OI,this._maxUploadRetryTime=kI,this._requests=new Set,o!=null?this._bucket=Vn.makeFromBucketSpec(o,this._host):this._bucket=sb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vn.makeFromBucketSpec(this._url,e):this._bucket=sb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){nb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){nb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ra(this,e)}_makeRequest(e,t,i,o,l=!0){if(this._deleted)return new WI(t2());{const h=oD(e,this._appId,i,o,t,this._firebaseVersion,l);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const rb="@firebase/storage",ib="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="storage";function BD(s,e,t){return s=mt(s),OD(s,e,t)}function qD(s){return s=mt(s),kD(s)}function HD(s,e){return s=mt(s),VD(s,e)}function FD(s=Qp(),e){s=mt(s);const i=gd(s,p2).getImmediate({identifier:e}),o=Cb("storage");return o&&GD(i,...o),i}function GD(s,e,t,i={}){zD(s,e,t,i)}function $D(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new Zg(t,i,o,e,Ca)}function KD(){Ea(new Ni(p2,$D,"PUBLIC").setMultipleInstances(!0)),Us(rb,ib,""),Us(rb,ib,"esm2017")}KD();const QD={apiKey:"AIzaSyC67yvOnj-8ltRpFVfSJaOBjxDjS3Du-Rc",authDomain:"mariantbi-monitoring.firebaseapp.com",projectId:"mariantbi-monitoring",storageBucket:"mariantbi-monitoring.appspot.com",messagingSenderId:"200018396961",appId:"1:200018396961:web:0986c4699ced3d79562060",measurementId:"G-4YGFR43WZ2"},Jg=kb(QD),we=x1(Jg),Z=EI(Jg),YD=FD(Jg);function ys({text:s,className:e}){return u.jsx("button",{className:`p-2 pl-9 pr-9 rounded-sm text-xs shadow-lg font-semibold tracking-wide ${e}`,children:s})}const Li="/MarianTrack/assets/MarianLogoWtext-B02ksZU7.png";var g2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ab=_a.createContext&&_a.createContext(g2),WD=["attr","size","title"];function XD(s,e){if(s==null)return{};var t=ZD(s,e),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);for(o=0;o<l.length;o++)i=l[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(s,i)&&(t[i]=s[i])}return t}function ZD(s,e){if(s==null)return{};var t={};for(var i in s)if(Object.prototype.hasOwnProperty.call(s,i)){if(e.indexOf(i)>=0)continue;t[i]=s[i]}return t}function hd(){return hd=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},hd.apply(this,arguments)}function ob(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),t.push.apply(t,i)}return t}function dd(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ob(Object(t),!0).forEach(function(i){JD(s,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):ob(Object(t)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(t,i))})}return s}function JD(s,e,t){return e=e3(e),e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function e3(s){var e=t3(s,"string");return typeof e=="symbol"?e:e+""}function t3(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var i=t.call(s,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function y2(s){return s&&s.map((e,t)=>_a.createElement(e.tag,dd({key:t},e.attr),y2(e.child)))}function We(s){return e=>_a.createElement(n3,hd({attr:dd({},s.attr)},e),y2(s.child))}function n3(s){var e=t=>{var{attr:i,size:o,title:l}=s,h=XD(s,WD),p=o||t.size||"1em",m;return t.className&&(m=t.className),s.className&&(m=(m?m+" ":"")+s.className),_a.createElement("svg",hd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,h,{className:m,style:dd(dd({color:s.color||t.color},t.style),s.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),l&&_a.createElement("title",null,l),s.children)};return ab!==void 0?_a.createElement(ab.Consumer,null,t=>e(t)):e(g2)}function Vd(s){return We({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(s)}function s3(){const s=jt();C.useEffect(()=>{document.title="MarianTBI | Home"},[]);const e=async()=>{const t=new ds;try{const o=(await og(we,t)).user,l=await ht(ge(Z,"users",o.uid));l.exists()?l.data().status==="approved"?s("/incubatee-dashboard"):alert("Your account is pending approval."):alert("User not found. Please contact admin.")}catch{alert("Google Sign-In failed. Try again.")}};return u.jsxs("div",{className:"flex flex-row-reverse h-screen",children:[u.jsxs("div",{className:"flex flex-col w-1/2 gap-6 items-center justify-center p-10",children:[u.jsx("img",{src:Li,alt:"MarianTBI-logo",className:"w-28 p-2"}),u.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[u.jsx(Ft,{to:"/employee-login",children:u.jsx(ys,{text:"Login as Employee",className:"bg-primary-color text-text-color hover:bg-white hover:text-primary-color transition-all w-full"})}),u.jsx(Ft,{to:"/incubatee-login",children:u.jsx(ys,{text:"Login as Incubatee",className:"bg-secondary-color text-text-color hover:bg-white hover:text-secondary-color transition-all w-full"})}),u.jsx(r3,{}),u.jsxs("button",{onClick:e,className:"flex items-center justify-center gap-2 w-full bg-white p-3 border-2 rounded cursor-pointer transition hover:scale-105",children:[u.jsx(Vd,{className:"w-6 h-6"}),u.jsx("span",{className:"text-gray-600 text-xs",children:"Login with Google"})]})]}),u.jsx(Ft,{to:"/create-account",className:"text-blue-600 hover:underline text-xs",children:"Create Account"})]}),u.jsxs("div",{className:"relative w-1/2 flex flex-col justify-center gap-5 p-10 text-text-color bg-banner-img bg-cover bg-center bg-no-repeat",children:[u.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("h1",{className:"text-lg font-semibold",children:"University of the Immaculate Conception"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-7xl font-bold",children:"MARIAN"}),u.jsx("h2",{className:"text-4xl font-bold",children:"Technology"}),u.jsx("h2",{className:"text-4xl font-bold",children:"Business"}),u.jsx("h2",{className:"text-4xl font-bold",children:"Incubator"})]}),u.jsx("p",{className:"text-sm leading-relaxed",children:'"Empowering startups through innovation, collaboration, and cutting-edge technology. Marian TBI provides mentorship, resources, and a thriving ecosystem for aspiring entrepreneurs to turn ideas into reality."'})]})]})]})}function r3(){return u.jsxs("div",{className:"flex items-center w-full",children:[u.jsx("div",{className:"flex-grow border-t border-gray-400"}),u.jsx("span",{className:"mx-4 text-gray-600 text-xs",children:"Or"}),u.jsx("div",{className:"flex-grow border-t border-gray-400"})]})}function ey(s){return We({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"},child:[]}]})(s)}function i3(s){return We({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(s)}function a3(s){return We({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 3a9 9 0 0 0-9 9H1l4 4 4-4H6c0-3.86 3.14-7 7-7s7 3.14 7 7-3.14 7-7 7c-1.9 0-3.62-.76-4.88-1.99L6.7 18.42A8.982 8.982 0 0 0 13 21a9 9 0 0 0 0-18zm2 8v-1c0-1.1-.9-2-2-2s-2 .9-2 2v1c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1zm-1 0h-2v-1c0-.55.45-1 1-1s1 .45 1 1v1z"},child:[]}]})(s)}function o3(s){return We({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"circle",attr:{cx:"10",cy:"8",r:"4"},child:[]},{tag:"path",attr:{d:"M10.67 13.02c-.22-.01-.44-.02-.67-.02-2.42 0-4.68.67-6.61 1.82-.88.52-1.39 1.5-1.39 2.53V20h9.26a6.963 6.963 0 0 1-.59-6.98zM20.75 16c0-.22-.03-.42-.06-.63l1.14-1.01-1-1.73-1.45.49c-.32-.27-.68-.48-1.08-.63L18 11h-2l-.3 1.49c-.4.15-.76.36-1.08.63l-1.45-.49-1 1.73 1.14 1.01c-.03.21-.06.41-.06.63s.03.42.06.63l-1.14 1.01 1 1.73 1.45-.49c.32.27.68.48 1.08.63L16 21h2l.3-1.49c.4-.15.76-.36 1.08-.63l1.45.49 1-1.73-1.14-1.01c.03-.21.06-.41.06-.63zM17 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},child:[]}]})(s)}function l3(s){return We({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.54 5.23-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM12 17.5 6.5 12H10v-2h4v2h3.5L12 17.5zM5.12 5l.81-1h12l.94 1H5.12z"},child:[]}]})(s)}function v2(s){return We({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(s)}function ty(s){return We({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 12.75c1.63 0 3.07.39 4.24.9 1.08.48 1.76 1.56 1.76 2.73V18H6v-1.61c0-1.18.68-2.26 1.76-2.73 1.17-.52 2.61-.91 4.24-.91zM4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58A2.01 2.01 0 0 0 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29zM20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm4 3.43c0-.81-.48-1.53-1.22-1.85A6.95 6.95 0 0 0 20 14c-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24v-1.57zM12 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"},child:[]}]})(s)}function Qo(s){return We({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(s)}function c3(s){return We({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(s)}function u3(){const[s,e]=C.useState(""),[t,i]=C.useState(""),[o,l]=C.useState(""),h=jt(),p=async m=>{if(m.preventDefault(),i(""),l(""),!s){l("Please enter your email address.");return}try{await mR(we,s),i("Password reset email sent! Redirecting to the landing page..."),setTimeout(()=>{h("/")},3e3)}catch{l("Failed to send password reset email. Please try again.")}};return u.jsxs("div",{className:"flex items-center justify-center h-screen relative",children:[u.jsx("button",{onClick:()=>h(-1),className:"absolute top-4 left-4 text-gray-600 hover:text-gray-800 transition",children:u.jsx(Qo,{size:24})}),u.jsxs("form",{onSubmit:p,className:"flex flex-col w-1/3 gap-2 p-12 bg-white rounded-md shadow-2xl",children:[u.jsx(a3,{className:"w-20 h-20 mx-auto text-primary-color scale-150"}),u.jsxs("div",{className:"pb-3 pt-3",children:[u.jsx("h1",{className:"text-center text-2xl font-bold",children:"Password Reset"}),u.jsx("p",{className:"text-center text-sm",children:"Provide the email address associated with your account to recover your password."})]}),u.jsx("input",{type:"email",placeholder:"Your email address",className:"p-2 border text-center text-sm",value:s,onChange:m=>e(m.target.value)}),t&&u.jsx("p",{className:"text-green-500 text-center text-sm",children:t}),o&&u.jsx("p",{className:"text-red-500 text-center text-sm",children:o}),u.jsx(ys,{text:"Reset my Password",className:"bg-primary-color text-white hover:bg-white hover:text-primary-color transition-all"})]})]})}const h3="/MarianTrack/assets/MarianTBILogo-D5T9U2K3.png";function d3(){const s=jt();return u.jsxs("div",{className:"flex items-center justify-center h-screen relative",children:[u.jsx("button",{onClick:()=>s(-1),className:"absolute top-4 left-4 text-gray-600 hover:text-gray-800 transition",children:u.jsx(Qo,{size:24})}),u.jsxs("div",{className:"flex flex-col gap-4 p-5 bg-white rounded-md shadow-md w-1/4",children:[u.jsx("img",{src:h3,alt:"MarianTbiLogo",className:"w-20 mx-auto shadow p-3 rounded-full"}),u.jsx("h1",{className:"text-center text-md font-bold mb-3",children:"Create an Account"}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx(Ft,{to:"/employee-create-account",children:u.jsx(ys,{text:"For Employees",className:"bg-primary-color text-white hover:bg-white hover:text-primary-color transition-all w-full"})}),u.jsx("p",{className:"text-center text-sm",children:"or"}),u.jsx(Ft,{to:"/incubatee-create-account",children:u.jsx(ys,{text:"For Incubatees",className:"bg-secondary-color text-white hover:bg-white hover:text-secondary-color transition-all w-full"})})]})]})]})}function f3(){return u.jsx("div",{children:u.jsx("div",{className:"flex items-center justify-center h-screen",children:u.jsxs("div",{className:"flex flex-col gap-3 p-10 w-1/3 bg-white rounded-md shadow-2xl",children:[u.jsx("img",{src:Li,alt:"MarianTBI-logo",className:"w-28 p-2 mx-auto"}),u.jsx("h1",{className:"text-2xl font-bold text-center",children:"Approval in Progress, Please Wait"}),u.jsx("p",{className:"text-center",children:"Your Request is pending. You may reach out to the TBI Manager for approval."}),u.jsx("div",{className:"w-full flex justify-center items-center",children:u.jsx(Ft,{to:"/",children:u.jsx(ys,{text:"Got it",className:"bg-primary-color text-white hover:bg-white hover:text-primary-color transition-all"})})})]})})})}const Ot=({children:s,allowedRoles:e})=>{const[t,i]=C.useState(!0),[o,l]=C.useState(!1);return C.useEffect(()=>{const h=async m=>{if(m){console.log("User is authenticated:",m);const y=await ht(ge(Z,"users",m.uid));if(y.exists()){const x=y.data();console.log("User data:",x),x.status==="approved"&&e.includes(x.role)?l(!0):console.log("User is not authorized:",x)}else console.log("User document does not exist")}else console.log("User is not authenticated");i(!1)},p=yR(we,m=>{h(m)});return()=>p()},[e]),t?u.jsx("div",{className:"flex items-center justify-center h-svh",children:u.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):o?s:u.jsx(XT,{to:"/"})};function m3(){const[s,e]=C.useState(""),[t,i]=C.useState(""),[o,l]=C.useState(""),[h,p]=C.useState(""),[m,y]=C.useState(""),[x,w]=C.useState(""),[T,S]=C.useState(null),A=jt();C.useEffect(()=>{document.title="Create an Account as Incubatee"},[]);const q=async N=>{if(N.preventDefault(),S(null),!s||!t||!o||!h||!m||!x){S("All fields are required.");return}if(m!==x){S("Passwords do not match.");return}try{const P=(await a1(we,o,m)).user;await Kg(ge(Z,"users",P.uid),{name:s,lastname:t,email:o,mobile:h,role:"Incubatee",status:"pending",timestamp:is()}),alert("Account created successfully! Awaiting admin approval."),A("/waiting-for-approval")}catch(V){S(V.message)}};return u.jsxs("div",{className:"flex items-center justify-center h-screen relative",children:[u.jsx("button",{onClick:()=>A(-1),className:"absolute top-4 left-4 text-gray-600 hover:text-gray-800 transition",children:u.jsx(Qo,{size:24})}),u.jsxs("form",{onSubmit:q,className:"flex flex-col gap-2 p-5 bg-white rounded-md shadow-xl max-w-lg",children:[u.jsx("h1",{className:"text-center text-lg font-bold pb-3",children:"Create Account as Incubatee"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",placeholder:"Name",className:"p-2 border w-full text-sm",required:!0,value:s,onChange:N=>e(N.target.value)}),u.jsx("input",{type:"text",placeholder:"Lastname",className:"p-2 border w-full text-sm",required:!0,value:t,onChange:N=>i(N.target.value)})]}),u.jsx("input",{type:"email",placeholder:"Email",className:"p-2 border text-sm",required:!0,value:o,onChange:N=>l(N.target.value)}),u.jsx("input",{type:"text",placeholder:"Mobile Number",maxLength:11,className:"p-2 border text-sm",required:!0,value:h,onChange:N=>p(N.target.value)}),u.jsx("input",{type:"password",placeholder:"Password",className:"p-2 border text-sm",required:!0,value:m,onChange:N=>y(N.target.value)}),u.jsxs("ul",{className:"text-xs text-gray-600 mt-1",children:[u.jsx("li",{className:`${m.length>=8?"text-green-500":"text-red-500"}`,children:"* Password must be at least 8 characters long"}),u.jsx("li",{className:`${/[A-Z]/.test(m)?"text-green-500":"text-red-500"}`,children:"* Must contain at least one uppercase letter"}),u.jsx("li",{className:`${/[0-9]/.test(m)?"text-green-500":"text-red-500"}`,children:"* Must contain at least one number"})]}),u.jsx("input",{type:"password",placeholder:"Confirm Password",className:"p-2 border text-sm",required:!0,value:x,onChange:N=>w(N.target.value)}),T&&u.jsx("p",{className:"text-red-500 text-center",children:T}),u.jsx(ys,{text:"Create Account",className:`px-4 py-2 text-white text-sm rounded-sm transition ${!s||!t||!o||!h||!m||!x||m!==x||m.length<8||!/[a-z]/.test(m)||!/[0-9]/.test(m)?"bg-gray-400 cursor-not-allowed":"bg-secondary-color hover:bg-opacity-80"}`,disabled:!s||!t||!o||!h||!m||!x||m!==x||m.length<8||!/[a-z]/.test(m)||!/[0-9]/.test(m)})]})]})}function p3(){const[s,e]=C.useState(""),[t,i]=C.useState(""),[o,l]=C.useState(null),h=jt(),p=["TBI Manager","TBI Assistant","Portfolio Manager"];C.useEffect(()=>{document.title="Incubatee Login"},[]);const m=async x=>{x.preventDefault(),l(null);try{const T=(await o1(we,s,t)).user,S=await ht(ge(Z,"users",T.uid));if(S.exists()){const A=S.data();if(p.includes(A.role)){l("Access denied. You are not allowed to log in here with this role.");return}A.status==="approved"?h("/incubatee-dashboard"):l("Access denied. Your account is pending approval.")}else l("User not found.")}catch{l("Invalid credentials. Please try again.")}},y=async()=>{const x=new ds;try{const T=(await og(we,x)).user,S=await ht(ge(Z,"users",T.uid));if(S.exists()){const A=S.data();if(p.includes(A.role)){l("Access denied. You are not allowed to log in here with this role.");return}A.status==="approved"?h("/incubatee-dashboard"):l("Access denied. Your account is pending approval.")}else l("User not found.")}catch{l("Google Sign-In failed. Try again.")}};return u.jsxs("div",{className:"flex flex-row-reverse h-screen",children:[u.jsxs("div",{className:"flex flex-col w-1/2 gap-6 items-center justify-center p-10 relative",children:[u.jsx("button",{onClick:()=>h(-1),className:"absolute top-4 left-4 text-gray-600 hover:text-gray-800 transition",children:u.jsx(Qo,{size:24})}),u.jsx("img",{src:Li,alt:"MarianTBI-logo",className:"w-28 p-2"}),u.jsxs("form",{onSubmit:m,className:"flex flex-col gap-3 w-full max-w-xs",children:[u.jsx("h1",{className:"text-center font-bold text-md",children:"Login As Incubatee"}),o&&u.jsx("p",{className:"text-red-500 text-center",children:o}),u.jsx("input",{type:"text",placeholder:"Email",className:"bg-gray-200 p-2 rounded-sm text-sm",value:s,onChange:x=>e(x.target.value),required:!0}),u.jsx("input",{type:"password",placeholder:"Password",className:"bg-gray-200 p-2 rounded-sm text-sm",value:t,onChange:x=>i(x.target.value),required:!0}),u.jsx(ys,{text:"Log In",className:"bg-secondary-color text-text-color hover:bg-white hover:text-secondary-color transition-all"})]}),u.jsx(g3,{}),u.jsxs("button",{onClick:y,className:"flex items-center justify-center gap-2 bg-white p-3 border-2 rounded cursor-pointer transition hover:scale-105",children:[u.jsx(Vd,{className:"w-6 h-6"}),u.jsx("span",{className:"text-gray-600 text-xs",children:"Sign in with Google"})]}),u.jsxs("div",{className:"flex justify-center gap-4 w-full max-w-xs text-xs",children:[u.jsx(Ft,{to:"/password-reset",className:"text-blue-600 hover:underline",children:"Forgot Password?"}),u.jsx(Ft,{to:"/incubatee-create-account",className:"text-blue-600 hover:underline",children:"Create Account"})]})]}),u.jsxs("div",{className:"relative w-1/2 flex flex-col justify-center gap-5 p-10 text-text-color bg-banner-img bg-cover bg-center bg-no-repeat",children:[u.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("h1",{className:"text-lg font-semibold",children:"University of the Immaculate Conception"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-7xl font-bold",children:"MARIAN"}),u.jsx("h2",{className:"text-4xl font-bold",children:"Technology"}),u.jsx("h2",{className:"text-4xl font-bold",children:"Business"}),u.jsx("h2",{className:"text-4xl font-bold",children:"Incubator"})]}),u.jsx("p",{className:"text-sm leading-relaxed",children:'"Empowering startups through innovation, collaboration, and cutting-edge technology. Marian TBI provides mentorship, resources, and a thriving ecosystem for aspiring entrepreneurs to turn ideas into reality."'})]})]})]})}function g3(){return u.jsxs("div",{className:"flex items-center w-full",children:[u.jsx("div",{className:"flex-grow border-t border-gray-400"}),u.jsx("span",{className:"mx-4 text-gray-600 text-xs",children:"Or"}),u.jsx("div",{className:"flex-grow border-t border-gray-400"})]})}function x2(s){return We({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(s)}function _2(s){return We({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(s)}function y3(s){return We({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(s)}function v3(s){return We({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(s)}function b2(s){return We({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(s)}function ny(s){return We({attr:{viewBox:"0 0 192 512"},child:[{tag:"path",attr:{d:"M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z"},child:[]}]})(s)}function lb(s){return We({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(s)}function x3(s){return We({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M218.17 424.14c-2.95-5.92-8.09-6.52-10.17-6.52s-7.22.59-10.02 6.19l-7.67 15.34c-6.37 12.78-25.03 11.37-29.48-2.09L144 386.59l-10.61 31.88c-5.89 17.66-22.38 29.53-41 29.53H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h12.39c4.83 0 9.11-3.08 10.64-7.66l18.19-54.64c3.3-9.81 12.44-16.41 22.78-16.41s19.48 6.59 22.77 16.41l13.88 41.64c19.75-16.19 54.06-9.7 66 14.16 1.89 3.78 5.49 5.95 9.36 6.26v-82.12l128-127.09V160H248c-13.2 0-24-10.8-24-24V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24v-40l-128-.11c-16.12-.31-30.58-9.28-37.83-23.75zM384 121.9c0-6.3-2.5-12.4-7-16.9L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1zm-96 225.06V416h68.99l161.68-162.78-67.88-67.88L288 346.96zm280.54-179.63l-31.87-31.87c-9.94-9.94-26.07-9.94-36.01 0l-27.25 27.25 67.88 67.88 27.25-27.25c9.95-9.94 9.95-26.07 0-36.01z"},child:[]}]})(s)}function _3(s){return We({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(s)}function b3(s){return We({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(s)}function w3(s){return We({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"},child:[]}]})(s)}function w2(s){return We({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(s)}function E2(s){return We({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(s)}function T2(s){return We({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4zm323-128.4l-27.8-28.1c-4.6-4.7-12.1-4.7-16.8-.1l-104.8 104-45.5-45.8c-4.6-4.7-12.1-4.7-16.8-.1l-28.1 27.9c-4.7 4.6-4.7 12.1-.1 16.8l81.7 82.3c4.6 4.7 12.1 4.7 16.8.1l141.3-140.2c4.6-4.7 4.7-12.2.1-16.8z"},child:[]}]})(s)}function sy(s){return We({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 464c22.779 0 41.411-18.719 41.411-41.6h-82.823c0 22.881 18.633 41.6 41.412 41.6zm134.589-124.8V224.8c0-63.44-44.516-117.518-103.53-131.041V79.2c0-17.682-13.457-31.2-31.059-31.2s-31.059 13.518-31.059 31.2v14.559c-59.015 13.523-103.53 67.601-103.53 131.041v114.4L80 380.8v20.8h352v-20.8l-41.411-41.6z"},child:[]}]})(s)}function E3(s){return We({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288m144-144H112"},child:[]}]})(s)}function N2(s){return We({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M80 152v256a40.12 40.12 0 0 0 40 40h272a40.12 40.12 0 0 0 40-40V152"},child:[]},{tag:"rect",attr:{width:"416",height:"80",x:"48",y:"64",fill:"none",strokeLinejoin:"round",strokeWidth:"32",rx:"28",ry:"28"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m320 304-64 64-64-64m64 41.89V224"},child:[]}]})(s)}function ry(s){return We({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M144 464a16 16 0 0 1-16-16v-64h-24a72.08 72.08 0 0 1-72-72V120a72.08 72.08 0 0 1 72-72h304a72.08 72.08 0 0 1 72 72v192a72.08 72.08 0 0 1-72 72H245.74l-91.49 76.29A16.05 16.05 0 0 1 144 464z"},child:[]}]})(s)}function iy(s){return We({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M160 240h160V96a16 16 0 0 0-16-16H64a16 16 0 0 0-16 16v320a16 16 0 0 0 16 16h240a16 16 0 0 0 16-16V272H160zm299.31 4.69L368 153.37 345.37 176l64 64H320v32h89.37l-64 64L368 358.63l91.31-91.32a16 16 0 0 0 0-22.62z"},child:[]}]})(s)}function Yo({onUserFetched:s=()=>{}}){const[e,t]=C.useState("Loading..."),[i,o]=C.useState("Loading..."),[l,h]=C.useState(0),[p,m]=C.useState(0),y=jt();C.useEffect(()=>{const w=async()=>{const V=sessionStorage.getItem("currentUser");if(V){const P=JSON.parse(V);t(`${P.name} ${P.lastname}`),o(P.role),s(P),S(P.id),A(P.id),await q(P.id)}else{const P=we.currentUser;if(P){const k=await ht(ge(Z,"users",P.uid));if(k.exists()){const F={id:k.id,...k.data()};sessionStorage.setItem("currentUser",JSON.stringify(F)),t(`${F.name} ${F.lastname}`),o(F.role),s(F),S(F.id),A(F.id),await q(F.id)}}}},T=async V=>{if(V){const P=await ht(ge(Z,"users",V.uid));if(P.exists()){const k={id:P.id,...P.data()};sessionStorage.setItem("currentUser",JSON.stringify(k)),t(`${k.name} ${k.lastname}`),o(k.role),s(k),S(k.id),A(k.id),await q(k.id)}}else sessionStorage.removeItem("currentUser"),t("Loading..."),o("Loading..."),s(null)},S=V=>{const P=Ve(xe(Z,"messages"),Ye("receiverId","==",V),Ye("seen","==",!1));return pt(P,F=>{h(F.size)})},A=V=>{const P=Ve(xe(Z,"notifications"),Ye("userId","==",V),Ye("read","==",!1));return pt(P,F=>{m(F.size)})},q=async V=>{const P=ge(Z,"users",V);await ft(P,{lastOnline:is()})};w();const N=we.onAuthStateChanged(T);return()=>{N()}},[s]);const x=async()=>{try{await rg(we),sessionStorage.removeItem("currentUser"),y("/",{replace:!0})}catch(w){console.error("Error logging out:",w)}};return u.jsxs("div",{className:"group w-[4rem] hover:w-1/4 h-screen bg-secondary-color overflow-hidden transition-all duration-300",children:[u.jsxs("div",{className:"flex gap-3 p-3 items-center",children:[u.jsx("img",{src:Li,alt:"logo-image",className:"w-10 h-10 bg-white rounded-md"}),u.jsxs("div",{className:"flex flex-col opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-white",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h1",{className:"text-base font-bold",children:e}),u.jsx(v2,{className:"text-xl cursor-pointer",onClick:()=>y("/incubatee-editprofile"),title:"Edit Profile"})]}),u.jsx("p",{className:"text-sm",children:i})]})]}),u.jsx("nav",{className:"mt-6",children:u.jsxs("ul",{className:"space-y-1",children:[u.jsx(Rh,{to:"/incubatee-dashboard",icon:u.jsx(ey,{}),text:"Dashboard"}),u.jsx(Rh,{to:"/incubatee-group",icon:u.jsx(ty,{}),text:"MyStartUps"}),u.jsx(Rh,{to:"/incubatee-notification",icon:u.jsx(sy,{}),text:"Notifications",unreadCount:p}),u.jsx(Rh,{to:"/incubatee-chat",icon:u.jsx(ry,{}),text:"Chats",unreadCount:l}),u.jsx("li",{children:u.jsxs("button",{onClick:x,className:"flex items-center gap-4 p-4 w-full text-left hover:bg-white hover:text-secondary-color cursor-pointer transition-all text-white",children:[u.jsx(iy,{className:"text-2xl"}),u.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:"LogOut"})]})})]})})]})}function Rh({to:s,icon:e,text:t,unreadCount:i}){return u.jsx("li",{children:u.jsxs(Ft,{to:s,className:"flex items-center gap-4 p-4 hover:bg-white hover:text-secondary-color cursor-pointer transition-all text-white",children:[u.jsx("span",{className:"text-2xl",children:e}),u.jsxs("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center",children:[t,i>0&&u.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:i})]})]})})}function T3(){const[s,e]=C.useState(""),[t,i]=C.useState([]),[o,l]=C.useState(null),[h,p]=C.useState(0),[m,y]=C.useState([]),[x,w]=C.useState([]);C.useEffect(()=>{document.title="Incubatee | Dashboard",(async()=>{try{const V=we.currentUser;if(V){const P=ge(Z,"users",V.uid),k=await ht(P);if(k.exists()){const F=k.data();e(`${F.name} ${F.lastname}`),l(F.groupId)}}}catch(V){console.error("Error fetching user data:",V)}})()},[]);const T=async()=>{try{if(!o)return;const N=Ve(xe(Z,"workplan"),Ye("groupId","==",o)),P=(await tt(N)).docs.map(k=>({id:k.id,...k.data()})).filter(k=>k.status!=="Completed");i(P)}catch(N){console.error("Error fetching tasks:",N)}},S=async()=>{try{const N=Ve(xe(Z,"requests")),P=(await tt(N)).docs.map(k=>k.data()).filter(k=>k.responsibleTeamMember===s);p(P.length)}catch(N){console.error("Error fetching requests:",N)}},A=async()=>{try{const N=we.currentUser;if(!N)return;const V=ge(Z,"users",N.uid),P=await ht(V);if(!P.exists())return;const k=P.data(),F=`${k.name} ${k.lastname}`,ee=Ve(xe(Z,"groups")),L=(await tt(ee)).docs.filter(O=>O.data().members.some(D=>D.name===k.name&&D.lastname===k.lastname)).map(O=>({id:O.id,name:O.data().name||"Unknown Group"}));if(L.length===0){y([]);return}const E=Ve(xe(Z,"workplan"),Ye("groupId","in",L.map(O=>O.id))),B=(await tt(E)).docs.map(O=>{var D;return{id:O.id,...O.data(),groupName:((D=L.find(Ee=>Ee.id===O.data().groupId))==null?void 0:D.name)||"Unknown Group"}}).filter(O=>O.assignedTo===F&&O.status!=="Completed").sort((O,D)=>{const Ee={High:1,Medium:2,Low:3};return Ee[O.priorityLevel]-Ee[D.priorityLevel]});y(B)}catch(N){console.error("Error fetching group tasks:",N)}},q=async()=>{try{const N=we.currentUser;if(!N)return;const V=ge(Z,"users",N.uid),P=await ht(V);if(!P.exists())return;const k=P.data(),F=`${k.name} ${k.lastname}`,ee=Ve(xe(Z,"groups")),L=(await tt(ee)).docs.filter(B=>B.data().members.some(O=>O.name===k.name&&O.lastname===k.lastname)).map(B=>({id:B.id,name:B.data().name||"Unknown Group"}));if(L.length===0){w([]),p(0);return}const E=Ve(xe(Z,"requests")),M=(await tt(E)).docs.map(B=>{var O;return{id:B.id,...B.data(),groupName:((O=L.find(D=>D.id===B.data().groupId))==null?void 0:O.name)||"Unknown Group"}}).filter(B=>B.responsibleTeamMember===F).sort((B,O)=>{const D={HIGH:1,MEDIUM:2,LOW:3};return D[B.priorityLevel]-D[O.priorityLevel]});w(M),p(M.length)}catch(N){console.error("Error fetching group requests:",N)}};return C.useEffect(()=>{o&&(T(),S())},[o]),C.useEffect(()=>{A(),q()},[]),C.useEffect(()=>{q()},[]),u.jsxs("div",{className:"flex",children:[u.jsx(Yo,{}),u.jsxs("div",{className:"flex flex-col h-screen w-full p-10 bg-gray-100 overflow-y-auto",children:[u.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome, ",s||"User","!"]}),u.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Here's an overview of your tasks and groups."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[u.jsxs("div",{className:"p-4 bg-white rounded-sm shadow-md hover:shadow-lg transition duration-200",children:[u.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Total StartUp Tasks"}),u.jsx("p",{className:"text-3xl font-bold text-blue-500 mt-2",children:m.length})]}),u.jsxs("div",{className:"p-4 bg-white rounded-sm shadow-md hover:shadow-lg transition duration-200",children:[u.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Total StartUp Requests"}),u.jsx("p",{className:"text-3xl font-bold text-green-500 mt-2",children:h})]})]}),u.jsxs("div",{className:"bg-white p-4 rounded-sm shadow-md hover:shadow-lg transition duration-200",children:[u.jsx("h3",{className:"text-lg font-medium mb-4",children:"Startup-Based Task List"}),m.length>0?u.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[u.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-4 py-2",children:"Task Name"}),u.jsx("th",{scope:"col",className:"px-4 py-2",children:"Startup Name"}),u.jsx("th",{scope:"col",className:"px-4 py-2",children:"Priority Level"}),u.jsx("th",{scope:"col",className:"px-4 py-2",children:"Status"}),u.jsx("th",{scope:"col",className:"px-4 py-2",children:"Due Date"}),u.jsx("th",{scope:"col",className:"px-4 py-2 text-center",children:"Action"})]})}),u.jsx("tbody",{children:m.map(N=>u.jsxs("tr",{className:"border-b last:border-b-0",children:[u.jsx("td",{className:"px-4 py-2",children:N.taskName}),u.jsx("td",{className:"px-4 py-2",children:N.groupName}),u.jsx("td",{className:`px-4 py-2 font-bold ${N.priorityLevel==="High"?"text-red-500":N.priorityLevel==="Medium"?"text-yellow-500":"text-green-500"}`,children:N.priorityLevel||"N/A"}),u.jsx("td",{className:"px-4 py-2",children:u.jsx("span",{className:`px-2 py-1 rounded text-white text-xs ${N.status==="Pending"?"bg-red-500":N.status==="Completed"?"bg-green-500":"bg-gray-500"}`,children:N.status})}),u.jsx("td",{className:"px-4 py-2",children:N.endDate?new Date(N.endDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"No Deadline"}),u.jsx("td",{className:"px-4 py-2 text-center",children:u.jsx("button",{onClick:()=>window.location.href=`/incubatee/view-group/${N.groupId}`,className:"text-blue-500 hover:text-blue-700",title:"View",children:u.jsx(lb,{})})})]},N.id))})]}):u.jsx("p",{className:"text-gray-500",children:"No tasks assigned to you in any group."})]}),u.jsxs("div",{className:"bg-white p-4 rounded-sm shadow-md hover:shadow-lg transition duration-200 mt-4",children:[u.jsx("h3",{className:"text-lg font-medium mb-4",children:"Startup-Based Requests List"}),x.length>0?u.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[u.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-4 py-2",children:"Specific Needs"}),u.jsx("th",{scope:"col",className:"px-4 py-2",children:"Startup Name"}),u.jsx("th",{scope:"col",className:"px-4 py-2",children:"Priority Level"}),u.jsx("th",{scope:"col",className:"px-4 py-2",children:"Status"}),u.jsx("th",{scope:"col",className:"px-4 py-2",children:"Remarks"}),u.jsx("th",{scope:"col",className:"px-4 py-2 text-center",children:"Action"})]})}),u.jsx("tbody",{children:x.map(N=>u.jsxs("tr",{className:"border-b last:border-b-0",children:[u.jsx("td",{className:"px-4 py-2",children:N.resourceToolNeeded||"N/A"}),u.jsx("td",{className:"px-4 py-2",children:N.groupName}),u.jsx("td",{className:`px-4 py-2 font-bold ${N.priorityLevel==="HIGH"?"text-red-500":N.priorityLevel==="MEDIUM"?"text-yellow-500":"text-green-500"}`,children:N.priorityLevel||"N/A"}),u.jsx("td",{className:"px-4 py-2",children:u.jsx("span",{className:`px-2 py-1 rounded text-white text-xs ${N.status==="Pending"?"bg-red-500":N.status==="Requested"?"bg-orange-500":N.status==="In Progress"?"bg-green-500":"bg-gray-500"}`,children:N.status})}),u.jsx("td",{className:"px-4 py-2",children:N.remarks||"No Remarks"}),u.jsx("td",{className:"px-4 py-2 text-center",children:u.jsx("button",{onClick:()=>window.location.href=`/incubatee/view-group/${N.groupId}`,className:"text-blue-500 hover:text-blue-700",title:"View",children:u.jsx(lb,{})})})]},N.id))})]}):u.jsx("p",{className:"text-gray-500",children:"No requests assigned to you in any group."})]})]})]})}function N3(){const[s,e]=C.useState([]),t=jt();return C.useEffect(()=>{document.title="Incubatee | My Group"},[]),C.useEffect(()=>{(async()=>{const o=we.currentUser;if(o)try{const h=(await tt(xe(Z,"groups"))).docs.map(p=>({id:p.id,...p.data()})).filter(p=>p.members.some(m=>m.id===o.uid));e(h)}catch(l){console.error("Error fetching user groups:",l)}})()},[]),u.jsxs("div",{className:"flex",children:[u.jsx(Yo,{}),u.jsxs("div",{className:"flex flex-col items-start h-screen w-full p-10",children:[u.jsx("h1",{className:"text-4xl font-bold mb-5",children:"My StartUps"}),u.jsx("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.length>0?[...s].sort((i,o)=>i.archived&&!o.archived?1:!i.archived&&o.archived?-1:i.name.localeCompare(o.name)).map(i=>u.jsxs("div",{className:`p-4 rounded-sm shadow-sm border hover:shadow-lg transition-shadow duration-300 relative ${i.archived?"bg-gray-200 opacity-70":"bg-white"}`,children:[u.jsx("h2",{className:"text-md font-bold",children:i.name}),u.jsx("p",{className:"text-xs",children:i.description}),i.imageUrl&&u.jsx("img",{src:i.imageUrl,alt:i.name,className:"mt-2 w-full h-40 object-cover rounded-lg"}),u.jsxs("div",{className:"mt-2",children:[u.jsx("h3",{className:"font-bold text-sm",children:"Members:"}),u.jsx("ul",{className:"text-sm",children:i.members.map((o,l)=>u.jsxs("li",{children:[o.name," ",o.lastname]},l))})]}),u.jsx("button",{onClick:()=>t(`/incubatee/view-group/${i.id}`),className:"mt-4 bg-secondary-color text-xs text-white px-4 py-2 rounded-sm hover:bg-opacity-80 transition hover:bg-white hover:text-secondary-color border border-secondary-color",children:"View Group"})]},i.id)):u.jsx("p",{className:"text-gray-500",children:"You are not assigned to any group."})})]})]})}function S3(){const[s,e]=C.useState([]),[t,i]=C.useState(null),o=C.useRef(null),l=jt();C.useEffect(()=>{const S=we.onAuthStateChanged(A=>{if(A){const q=Ve(xe(Z,"notifications"),Ye("userId","==",A.uid)),N=pt(q,V=>{const k=V.docs.map(F=>({id:F.id,...F.data()})).sort((F,ee)=>{var E,R;const re=((E=F.createdAt)==null?void 0:E.toDate())||new Date(0);return(((R=ee.createdAt)==null?void 0:R.toDate())||new Date(0))-re});e(k)});return()=>N()}});return()=>S()},[]),C.useEffect(()=>{const S=A=>{o.current&&!o.current.contains(A.target)&&i(null)};return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[]);const h=async()=>{try{if(we.currentUser){const A=s.filter(q=>!q.read);for(const q of A){const N=ge(Z,"notifications",q.id);await ft(N,{read:!0})}e(q=>q.map(N=>({...N,read:!0})))}}catch(S){console.error("Error marking notifications as read:",S)}},p=async()=>{try{const S=we.currentUser;if(S){const A=Ve(xe(Z,"notifications"),Ye("userId","==",S.uid)),q=await tt(A),N=Oc(Z);q.forEach(V=>{N.delete(V.ref)}),await N.commit(),e([])}}catch(S){console.error("Error deleting all notifications:",S)}},m=async S=>{try{const A=ge(Z,"notifications",S);await ft(A,{read:!0}),e(q=>q.map(N=>N.id===S?{...N,read:!0}:N))}catch(A){console.error("Error marking notification as read:",A)}},y=async S=>{try{const A=ge(Z,"notifications",S);await rs(A),e(q=>q.filter(N=>N.id!==S))}catch(A){console.error("Error deleting notification:",A)}},x=S=>{i(A=>A===S?null:S)},w=S=>{switch(S){case"welcome":return u.jsx(T2,{className:"text-green-500",size:30});case"task-status":return u.jsx(v3,{className:"text-red-500",size:30});case"request-status-update":return u.jsx(x3,{className:"text-blue-500",size:30});default:return u.jsx(x2,{className:"text-gray-500",size:30})}},T=(S,A)=>{m(S),A&&l(`/incubatee/view-group/${A}`)};return u.jsxs("div",{className:"flex",children:[u.jsx(Yo,{}),u.jsxs("div",{className:"flex flex-col items-start justify-start h-screen w-full p-10 overflow-y-auto",children:[u.jsxs("div",{className:"flex justify-between items-center w-full mb-4",children:[u.jsx("h1",{className:"text-4xl font-bold",children:"Notifications"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:h,className:"px-4 py-2 bg-blue-500 text-white text-xs hover:bg-blue-600 transition",children:"Mark All as Read"}),u.jsx("button",{onClick:p,className:"px-4 py-2 bg-red-500 text-white text-xs hover:bg-red-600 transition",children:"Delete All"})]})]}),s.length>0?u.jsx("ul",{className:"w-full",children:s.map(S=>u.jsxs("li",{className:`p-4 shadow-md hover:shadow-lg transition duration-200 relative flex gap-4 items-center ${S.read?"bg-gray-200":"bg-white"}`,onClick:()=>T(S.id,S.groupId),children:[u.jsxs("div",{className:"flex-shrink-0",children:[w(S.type)," "]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm mb-1",dangerouslySetInnerHTML:{__html:S.message}}),u.jsx("p",{className:"text-xs text-gray-500",children:S.createdAt?new Date(S.createdAt.toDate()).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"Unknown"})]}),u.jsxs("div",{className:"absolute top-4 right-4",children:[u.jsx("button",{onClick:A=>{A.stopPropagation(),x(S.id)},className:"text-gray-500 hover:text-gray-700",children:""}),t===S.id&&u.jsxs("div",{ref:o,className:"absolute right-0 mt-2 w-48 bg-white border rounded shadow-lg z-10",children:[u.jsx("button",{onClick:()=>m(S.id),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Mark as Read"}),u.jsx("button",{onClick:()=>y(S.id),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Delete"})]})]})]},S.id))}):u.jsx("p",{className:"text-gray-500",children:"No notifications available."})]})]})}function A3(){const[s,e]=C.useState([]),[t,i]=C.useState(null),[o,l]=C.useState([]),[h,p]=C.useState(""),[m,y]=C.useState(null),[x,w]=C.useState(""),[T,S]=C.useState(null),[A,q]=C.useState(null),[N,V]=C.useState({}),[P,k]=C.useState({}),F=C.useRef(null);C.useEffect(()=>{document.title="Incubatee | Chats",(async()=>{const D=await ht(ge(Z,"users",we.currentUser.uid));if(D.exists()){const Ee=D.data();w(Ee.role);const X=(await tt(xe(Z,"groups"))).docs.find(Y=>Y.data().members.some(ne=>ne.email===Ee.email)||Y.data().portfolioManager.email===Ee.email);y(X?X.data():null)}})()},[]),C.useEffect(()=>{(async()=>{var X;const Ee=(await tt(xe(Z,"users"))).docs.map(Y=>({id:Y.id,...Y.data()}));let be=[];if(m){const Y=(X=m.members.find(ne=>ne.email===we.currentUser.email))==null?void 0:X.groupRole;Y==="Project Manager"?be=Ee.filter(ne=>(m.portfolioManager.email===ne.email||m.members.some(ce=>ce.email===ne.email))&&ne.id!==we.currentUser.uid):["System Analyst","Developer"].includes(Y)&&(be=Ee.filter(ne=>m.members.some(ce=>ce.email===ne.email)&&ne.id!==we.currentUser.uid))}e(be)})()},[m]),C.useEffect(()=>{if(t){const O=Ve(xe(Z,"messages"),Uo("timestamp","asc")),D=pt(O,Ee=>{const X=Ee.docs.map(Y=>({id:Y.id,...Y.data()})).filter(Y=>Y.senderId===we.currentUser.uid&&Y.receiverId===t.id||Y.senderId===t.id&&Y.receiverId===we.currentUser.uid);if(l(X),X.forEach(async Y=>{Y.receiverId===we.currentUser.uid&&!Y.seen&&await ft(ge(Z,"messages",Y.id),{seen:!0})}),X.length>0){const Y=X[X.length-1];k(ne=>({...ne,[t.id]:Y.timestamp}))}});return()=>D()}},[t]),C.useEffect(()=>{const O=Ve(xe(Z,"messages"),Uo("timestamp","asc")),D=pt(O,Ee=>{const be=Ee.docs.map(Y=>({id:Y.id,...Y.data()})),X={};be.forEach(Y=>{Y.receiverId===we.currentUser.uid&&!Y.seen&&(X[Y.senderId]||(X[Y.senderId]=0),X[Y.senderId]++)}),V(X)});return()=>D()},[]);const ee=async()=>{h.trim()!==""&&(T?(await ft(ge(Z,"messages",T.id),{message:h,edited:!0}),S(null)):await Fs(xe(Z,"messages"),{senderId:we.currentUser.uid,receiverId:t.id,message:h,timestamp:new Date,seen:!1}),p(""))},re=O=>{O.key==="Enter"&&ee()},L=O=>{p(O.message),S(O),q(null)},E=async O=>{await rs(ge(Z,"messages",O)),q(null)},R=O=>O.toDate().toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),M=O=>{const D=new Date,Ee=O.toDate();return(D-Ee)/1e3/60>5},B=[...s].sort((O,D)=>P[O.id]&&P[D.id]?P[D.id].seconds-P[O.id].seconds:P[O.id]?-1:P[D.id]?1:(N[D.id]||0)-(N[O.id]||0));return u.jsxs("div",{className:"flex",children:[u.jsx(Yo,{}),u.jsx("div",{className:"flex flex-col items-start justify-start h-screen w-full p-10 bg-gray-100",children:u.jsxs("div",{className:"flex w-full h-svh bg-white rounded-sm shadow-lg overflow-hidden",children:[u.jsxs("div",{className:"w-1/4 border-r",children:[u.jsx("h2",{className:"text-md font-semibold p-4 border-b",children:"Chat Members"}),u.jsx("ul",{className:"overflow-y-auto h-96",children:B.map(O=>u.jsx("li",{className:`p-4 cursor-pointer hover:bg-gray-200 ${(t==null?void 0:t.id)===O.id?"bg-gray-200":""}`,onClick:()=>i(O),children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center overflow-hidden mr-3",children:O.profileImageUrl?u.jsx("img",{src:O.profileImageUrl,alt:`${O.name} ${O.lastname}`,className:"w-full h-full object-cover"}):u.jsx("span",{className:"text-gray-500 text-xs text-center",children:"No Image"})}),u.jsxs("div",{className:"flex flex-col flex-1",children:[u.jsxs("span",{className:"font-bold text-sm",children:[O.name," ",O.lastname]}),u.jsx("span",{className:"text-xs text-gray-500",children:O.role})]}),N[O.id]>0&&u.jsx("span",{className:"text-xs bg-red-500 text-white rounded-full px-2 py-1",children:N[O.id]})]})},O.id))})]}),u.jsxs("div",{className:"w-3/4 flex flex-col",children:[u.jsx("div",{className:"flex-1 overflow-y-auto",children:t?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center mb-4 top-0 sticky p-4 bg-secondary-color text-white z-10",children:u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("h2",{className:"text-md font-semibold",children:[t.name," ",t.lastname]}),u.jsx("span",{className:"text-xs text-white",children:t.role})]})}),u.jsx("div",{className:"flex flex-col space-y-1 p-4 select-none",children:o.map((O,D)=>{const Ee=O.timestamp.toDate(),be=D>0?o[D-1].timestamp.toDate():null,X=!be||Ee.getDate()!==be.getDate()||Ee.getHours()-be.getHours()>=1;return u.jsxs("div",{className:"flex flex-col",children:[X&&u.jsx("div",{className:"text-center text-xs text-gray-500 my-2",children:Ee.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}),u.jsx("div",{className:`p-2 rounded-md text-sm ${O.senderId===we.currentUser.uid?"bg-blue-400 text-white self-end":"bg-gray-200 self-start"}`,title:R(O.timestamp),children:u.jsxs("div",{className:"flex justify-between items-center",children:[O.senderId===we.currentUser.uid?u.jsxs(u.Fragment,{children:[O.edited&&u.jsx("span",{className:"text-xs text-red-500 mr-2",children:"(edited)"}),u.jsx("span",{children:O.message})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:O.message}),O.edited&&u.jsx("span",{className:"text-xs text-red-500 ml-2",children:"(edited)"})]}),O.senderId===we.currentUser.uid&&u.jsxs("div",{className:"relative flex gap-2 ml-2",children:[u.jsx(ny,{className:"cursor-pointer",onClick:()=>q(O.id)}),A===O.id&&u.jsxs("div",{ref:F,className:"absolute right-0 mt-2 w-48 bg-white border rounded shadow-lg z-10",children:[u.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>L(O),disabled:M(O.timestamp),children:"Edit"}),u.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>E(O.id),children:"Delete"})]})]})]})}),O.senderId===we.currentUser.uid&&O.seen&&D===o.length-1&&u.jsx("span",{className:"text-xs text-gray-500 self-end mt-1",children:"Seen"})]},O.id)})})]}):u.jsx("p",{className:"text-center p-4 text-gray-500",children:"Select a user to start chatting"})}),t&&u.jsxs("div",{className:"p-4 border-t flex items-center",children:[u.jsx("input",{type:"text",value:h,onChange:O=>p(O.target.value),onKeyPress:re,className:"w-full p-2 border text-sm rounded-sm",placeholder:"Type your message..."}),u.jsx("button",{onClick:ee,className:"ml-2 px-4 py-2 bg-secondary-color text-white text-sm rounded-sm hover:bg-opacity-80 transition",children:T?"Update":"Send"})]})]})]})})]})}const R3=({requests:s,handleEditRequest:e,handleDeleteRequest:t,openRequestModal:i,groupRole:o})=>u.jsxs("div",{className:"mt-2 w-full",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("h3",{className:"font-bold text-lg",children:"Requests"}),o!=="System Analyst"&&o!=="Developer"&&u.jsxs("button",{onClick:i,className:"bg-secondary-color text-white px-4 py-2 text-xs rounded-sm hover:bg-opacity-80 transition flex items-center gap-2",children:[u.jsx(w2,{})," Request Needs"]})]}),u.jsxs("table",{className:"min-w-full bg-white text-xs",children:[u.jsx("thead",{className:"sticky top-0 bg-secondary-color text-white",children:u.jsxs("tr",{children:[u.jsx("th",{className:"py-2 font-medium px-4",children:"Team Member"}),u.jsx("th",{className:"py-2 font-medium px-4",children:"Request Type"}),u.jsx("th",{className:"py-2 font-medium px-4",children:"Date Entry"}),u.jsx("th",{className:"py-2 font-medium px-4",children:"Date Needed"}),u.jsx("th",{className:"py-2 font-medium px-4",children:"Specific Needs"}),u.jsx("th",{className:"py-2 font-medium px-4",children:"Prospect Resource Person"}),u.jsx("th",{className:"py-2 font-medium px-4",children:"Priority Level"}),u.jsx("th",{className:"py-2 font-medium px-4",children:"Status"}),u.jsx("th",{className:"py-2 font-medium px-4",children:"Remarks"}),o!=="System Analyst"&&o!=="Developer"&&u.jsx("th",{className:"py-2 px-4",children:"Actions"})]})}),u.jsx("tbody",{children:s.length>0?[...s].sort((l,h)=>{const p={HIGH:1,MEDIUM:2,LOW:3};return l.status==="Done"&&h.status!=="Done"?1:l.status!=="Done"&&h.status==="Done"?-1:p[l.priorityLevel]!==p[h.priorityLevel]?p[l.priorityLevel]-p[h.priorityLevel]:new Date(l.dateEntry)-new Date(h.dateEntry)}).map((l,h)=>u.jsxs("tr",{className:`${l.status==="Done"?"bg-gray-200 opacity-70":h%2===0?"bg-white":"bg-gray-50"}`,children:[u.jsx("td",{className:"py-2 px-4",children:l.responsibleTeamMember}),u.jsx("td",{className:"py-2 px-4",children:l.requestType}),u.jsx("td",{className:"py-2 px-4",children:l.dateEntry?new Date(l.dateEntry.seconds*1e3).toLocaleDateString():"N/A"}),u.jsx("td",{className:"py-2 px-4",children:l.dateNeeded}),u.jsx("td",{className:"py-2 px-4",children:l.resourceToolNeeded}),u.jsx("td",{className:"py-2 px-4",children:l.prospectResourcePerson}),u.jsx("td",{className:`p-2 font-bold ${l.priorityLevel==="HIGH"?"text-red-500":l.priorityLevel==="MEDIUM"?"text-yellow-500":"text-green-500"}`,children:l.priorityLevel}),u.jsx("td",{className:"py-2 px-4 font-bold text-secondary-color",children:l.status}),u.jsx("td",{className:"py-2 px-4",children:l.remarks||"N/A"}),o!=="System Analyst"&&o!=="Developer"&&u.jsxs("td",{className:"py-2 px-4 flex flex-wrap gap-1 items-center justify-center",children:[u.jsx("button",{onClick:()=>e(l.id),className:"bg-secondary-color text-white px-2 py-1 rounded-sm hover:bg-opacity-80 transition",children:u.jsx(b2,{})}),u.jsx("button",{onClick:()=>t(l.id),className:"bg-red-500 text-white px-2 py-1 rounded-sm hover:bg-opacity-80 transition ml-2",children:u.jsx(E2,{})})]})]},l.id)):u.jsx("tr",{children:u.jsx("td",{className:"py-2 px-4 text-center",colSpan:o!=="System Analyst"&&o!=="Developer"?10:9,children:"No requests found."})})})]})]}),C3=({workplan:s,groupMembers:e,handleAddTask:t,handleEditTask:i,handleDeleteTask:o,handleUpdateStatus:l,groupRole:h})=>{const[p,m]=C.useState(!1),[y,x]=C.useState({taskName:"",assignedTo:"",startDate:"",endDate:"",priorityLevel:"Low"}),[w,T]=C.useState(!1),S=P=>{const{name:k,value:F}=P.target;x(ee=>({...ee,[k]:F}))},A=P=>{P.preventDefault(),w?(i(y),m(!1),T(!1)):(t(y),x({taskName:"",assignedTo:"",startDate:"",endDate:"",priorityLevel:"Low"}))},q=P=>{x(P),T(!0),m(!0)},N=async P=>{try{const k=e.find(F=>`${F.name} ${F.lastname}`===P.assignedTo);k&&await Fs(xe(Z,"notifications"),{userId:k.id,message:`<b style="color:red">Task Update:</b> Your task <b>${P.taskName}</b> has been marked as <b style="color:green">Completed</b> by your Project Manager.`,createdAt:is(),read:!1,type:"task-status",groupId:P.groupId})}catch(k){console.error("Error sending notification:",k)}},V=async(P,k)=>{try{if(await l(P,k),k==="Completed"){const F=s.find(ee=>ee.id===P);F&&await N(F)}}catch(F){console.error("Error updating task status or sending notification:",F)}};return u.jsxs("div",{className:"mt-2 w-full",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("h3",{className:"font-bold text-lg",children:"Workplan"}),h!=="System Analyst"&&h!=="Developer"&&u.jsx("button",{onClick:()=>{x({taskName:"",assignedTo:"",startDate:"",endDate:"",priorityLevel:"Low"}),T(!1),m(!0)},className:"bg-secondary-color text-white px-4 py-2 text-xs rounded-sm hover:bg-opacity-80 transition flex items-center gap-2",children:"+ Add Task"})]}),u.jsxs("table",{className:"min-w-full bg-white text-xs",children:[u.jsx("thead",{className:"sticky top-0 bg-secondary-color text-white",children:u.jsxs("tr",{children:[u.jsx("th",{className:"py-2 px-4 font-medium text-left",children:"Task Name"}),u.jsx("th",{className:"py-2 px-4 font-medium text-right",children:"Assigned Member"}),u.jsx("th",{className:"py-2 px-4 font-medium",children:"Start Date"}),u.jsx("th",{className:"py-2 px-4 font-medium",children:"End Date"}),u.jsx("th",{className:"py-2 px-4 font-medium",children:"Priority Level"}),u.jsx("th",{className:"py-2 px-4 font-medium",children:"Status"}),u.jsx("th",{className:"py-2 px-4 font-medium",children:"Actions"})]})}),u.jsx("tbody",{children:s.length>0?[...s].sort((P,k)=>{const F={High:1,Medium:2,Low:3};return P.status==="Completed"&&k.status!=="Completed"?1:P.status!=="Completed"&&k.status==="Completed"?-1:F[P.priorityLevel]!==F[k.priorityLevel]?F[P.priorityLevel]-F[k.priorityLevel]:new Date(P.startDate)-new Date(k.startDate)}).map((P,k)=>{var F;return u.jsxs("tr",{className:`${P.status==="Completed"?"bg-gray-200 opacity-70":k%2===0?"bg-white":"bg-gray-100"}`,children:[u.jsx("td",{className:"p-1 text-left",children:P.taskName}),u.jsx("td",{className:"p-1 text-right",children:P.assignedTo}),u.jsx("td",{className:"p-1",children:new Date(P.startDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),u.jsx("td",{className:"p-1",children:new Date(P.endDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),u.jsx("td",{className:`p-2 font-bold ${P.priorityLevel==="High"?"text-red-500":P.priorityLevel==="Medium"?"text-yellow-500":"text-green-500"}`,children:P.priorityLevel}),u.jsx("td",{className:"p-1",children:h==="Project Manager"||P.assignedTo===((F=e.find(ee=>ee.name===P.assignedTo))==null?void 0:F.name)?u.jsxs("select",{value:P.status,onChange:ee=>V(P.id,ee.target.value),className:"w-full p-1 border text-xs text-center",children:[u.jsx("option",{value:"Pending",children:"Pending"}),u.jsx("option",{value:"Completed",children:"Completed"})]}):u.jsx("span",{className:"text-xs",children:P.status})}),u.jsx("td",{className:"p-1 flex justify-center gap-2",children:h!=="System Analyst"&&h!=="Developer"&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>q(P),className:"bg-secondary-color text-white px-2 py-1 rounded-sm hover:bg-opacity-80 transition",disabled:P.status==="Completed",children:u.jsx(b2,{})}),u.jsx("button",{onClick:()=>o(P.id),className:"bg-red-500 text-white px-2 py-1 rounded-sm hover:bg-opacity-80 transition",children:u.jsx(E2,{})})]})})]},P.id)}):u.jsx("tr",{children:u.jsx("td",{className:"p-1 text-center",colSpan:"7",children:"No tasks found."})})})]}),p&&u.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-[550px]",children:[u.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:w?"Edit Task":"Add Task"}),u.jsxs("form",{onSubmit:A,className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-sm",children:"Task Name"}),u.jsx("input",{type:"text",name:"taskName",value:y.taskName,onChange:S,className:"w-full p-2 border text-sm",required:!0})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-sm",children:"Assigned Member"}),u.jsxs("select",{name:"assignedTo",value:y.assignedTo,onChange:S,className:"w-full p-2 border text-sm",required:!0,children:[u.jsx("option",{value:"",children:"Select Member"}),e.map(P=>u.jsxs("option",{value:`${P.name} ${P.lastname}`,children:[P.name," ",P.lastname]},P.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm",children:"Start Date"}),u.jsx("input",{type:"date",name:"startDate",value:y.startDate,onChange:S,className:"w-full p-2 border text-sm",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm",children:"End Date"}),u.jsx("input",{type:"date",name:"endDate",value:y.endDate,onChange:S,className:"w-full p-2 border text-sm",required:!0})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-sm",children:"Priority Level"}),u.jsxs("select",{name:"priorityLevel",value:y.priorityLevel,onChange:S,className:"w-full p-2 border text-sm",required:!0,children:[u.jsx("option",{value:"Low",children:"Low"}),u.jsx("option",{value:"Medium",children:"Medium"}),u.jsx("option",{value:"High",children:"High"})]})]}),u.jsxs("div",{className:"col-span-2 flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 bg-gray-500 text-white text-sm rounded-sm hover:bg-gray-600 transition",children:"Close"}),u.jsx("button",{type:"submit",className:"px-4 py-2 bg-secondary-color text-white text-sm rounded-sm hover:bg-opacity-80 transition",children:w?"Update Task":"Add Task"})]})]})]})})]})};function j3(){var X;const{groupId:s}=Bp(),[e,t]=C.useState(null),[i,o]=C.useState(!1),[l,h]=C.useState(!1),[p,m]=C.useState(!0),[y,x]=C.useState([]),[w,T]=C.useState([]),[S,A]=C.useState([]),[q,N]=C.useState(""),[V,P]=C.useState({responsibleTeamMember:"",requestType:"Technical Request",description:"",dateEntry:new Date().toISOString().split("T")[0],dateNeeded:"",resourceToolNeeded:"",prospectResourcePerson:"",priorityLevel:"low",remarks:"",status:"Pending"}),[k,F]=C.useState(!1),[ee,re]=C.useState(null);C.useEffect(()=>{(async()=>{try{const ne=await ht(ge(Z,"groups",s));if(ne.exists()){const ce=ne.data();t({id:ne.id,...ce}),A(ce.members);const U=we.currentUser;if(U){const ie=ce.members.find(pe=>pe.id===U.uid);ie&&N(ie.groupRole)}}}catch(ne){console.error("Error fetching group:",ne)}})()},[s]),C.useEffect(()=>{if(l){const Y=Ve(xe(Z,"requests"),Ye("groupId","==",s)),ne=pt(Y,ce=>{x(ce.docs.map(U=>({id:U.id,...U.data()})))});return()=>ne()}},[s,l]),C.useEffect(()=>{if(p){const Y=Ve(xe(Z,"workplan"),Ye("groupId","==",s)),ne=pt(Y,ce=>{T(ce.docs.map(U=>({id:U.id,...U.data()})))});return()=>ne()}},[s,p]);const L=Y=>{const{name:ne,value:ce}=Y.target;P(U=>({...U,[ne]:ce,...ne==="requestType"&&{resourceToolNeeded:""}}))},E={"Human Resource":["Business Expert","Legal Expert","Technical Expert"],"Financial Resource":["Save Money"],"Other Resource":["Equipment","Subscription","Platform Tools","Other Needs"]},R=async Y=>{Y.preventDefault();try{if(k)await ft(ge(Z,"requests",ee),V),alert("Request updated successfully!");else{if(!s)throw new Error("Group ID is missing. Please try again.");await Fs(xe(Z,"requests"),{...V,dateEntry:is(),groupId:s}),alert("Request submitted successfully!")}o(!1),F(!1),re(null)}catch(ne){console.error("Error submitting request:",ne),alert(`Error submitting request: ${ne.message}`)}},M=Y=>{const ne=y.find(ce=>ce.id===Y);P(ne),re(Y),F(!0),o(!0)},B=async Y=>{try{await rs(ge(Z,"requests",Y)),alert("Request deleted successfully!")}catch(ne){console.error("Error deleting request:",ne),alert("Error deleting request. Please try again.")}},O=async Y=>{try{await Fs(xe(Z,"workplan"),{...Y,groupId:s,status:"Pending"}),alert("Task added successfully!")}catch(ne){console.error("Error adding task:",ne)}},D=async Y=>{try{const ne=ge(Z,"workplan",Y.id);await ft(ne,Y),alert("Task updated successfully!")}catch(ne){console.error("Error updating task:",ne)}},Ee=async Y=>{try{const ne=ge(Z,"workplan",Y);await rs(ne),alert("Task deleted successfully!")}catch(ne){console.error("Error deleting task:",ne)}},be=async(Y,ne)=>{try{const ce=ge(Z,"workplan",Y);await ft(ce,{status:ne})}catch(ce){console.error("Error updating status:",ce)}};return e?u.jsxs("div",{className:"flex",children:[u.jsx(Yo,{}),u.jsxs("div",{className:"flex flex-col items-start h-screen w-full p-10 overflow-y-auto",children:[u.jsx("h1",{className:"text-4xl font-bold mb-2",children:e.name}),u.jsx("p",{className:"text-sm italic",children:e.description}),e.imageUrl&&u.jsx("img",{src:e.imageUrl,alt:e.name,className:"mt-2 w-full h-40 object-cover rounded-lg"}),u.jsxs("div",{className:"mt-2 flex flex-col items-start justify-between gap-4 w-full",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-md",children:"Members:"}),u.jsx("ul",{className:"text-sm",children:e.members.map(Y=>u.jsxs("li",{children:[Y.name," ",Y.lastname," - ",Y.groupRole]},Y.id))})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsxs("div",{className:"bg-blue-500 text-white text-center p-2 rounded-sm shadow-md ",children:[u.jsx("h3",{className:"text-xs",children:"No. of Tasks"}),u.jsx("p",{className:"text-md font-semibold mt-1",children:w.length})]}),u.jsxs("div",{className:"bg-yellow-500 text-white text-center p-2 rounded-sm shadow-md ",children:[u.jsx("h3",{className:"text-xs",children:"Pending Tasks"}),u.jsx("p",{className:"text-md font-semibold mt-1",children:w.filter(Y=>Y.status==="Pending").length})]}),u.jsxs("div",{className:"bg-green-500 text-white text-center p-2 rounded-sm shadow-md ",children:[u.jsx("h3",{className:"text-xs",children:"Completed Tasks"}),u.jsx("p",{className:"text-md font-semibold mt-1",children:w.filter(Y=>Y.status==="Completed").length})]}),u.jsxs("div",{className:`text-white text-center p-2 rounded-sm shadow-md  ${w.length>0?Math.round(w.filter(Y=>Y.status==="Completed").length/w.length*100)>=75?"bg-green-500":Math.round(w.filter(Y=>Y.status==="Completed").length/w.length*100)>=50?"bg-yellow-500":"bg-red-500":"bg-gray-500"}`,children:[u.jsx("h3",{className:"text-xs",children:"Total Progress Completion"}),u.jsx("p",{className:"text-md font-semibold mt-1",children:w.length>0?`${Math.round(w.filter(Y=>Y.status==="Completed").length/w.length*100)}%`:"0%"})]})]})]}),u.jsxs("div",{className:"flex flex-row-reverse mt-4",children:[u.jsx("button",{onClick:()=>{h(!0),m(!1)},className:`${l?"bg-secondary-color text-white":"bg-white border border-secondary-color"} text-secondary-color px-4 py-2 text-xs hover:bg-opacity-80 transition`,children:"Group Requests"}),u.jsx("button",{onClick:()=>{m(!0),h(!1)},className:`${p?"bg-secondary-color text-white":"bg-white border border-secondary-color"} text-secondary-color px-4 py-2 text-xs hover:bg-opacity-80 transition`,children:"Workplan"})]}),l&&u.jsx(R3,{requests:y,handleEditRequest:M,handleDeleteRequest:B,openRequestModal:()=>{P({responsibleTeamMember:"",requestType:"Technical Request",description:"",dateEntry:new Date().toISOString().split("T")[0],dateNeeded:"",resourceToolNeeded:"",prospectResourcePerson:"",priorityLevel:"low",remarks:"",status:"Pending"}),o(!0),F(!1)},groupRole:q}),p&&u.jsx(C3,{workplan:w,groupMembers:S,handleAddTask:O,handleEditTask:D,handleDeleteTask:Ee,handleUpdateStatus:be,groupRole:q})]}),i&&u.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-[550px]",children:[u.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:k?"Edit Request":"Request Needs"}),u.jsxs("form",{onSubmit:R,className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{className:"col-span-2",children:[u.jsxs("label",{className:"block text-sm",children:["Responsible Team Member ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{name:"responsibleTeamMember",value:V.responsibleTeamMember,onChange:L,className:"w-full p-2 border text-sm",children:[u.jsx("option",{value:"",children:"Select Team Member"}),S.map(Y=>u.jsxs("option",{value:`${Y.name} ${Y.lastname}`,children:[Y.name," ",Y.lastname]},Y.id))]})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsxs("label",{className:"block mb-1 text-sm",children:["Request Type ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{name:"requestType",value:V.requestType,onChange:L,className:"w-full p-2 border text-sm",children:[u.jsx("option",{value:"",children:"Select Request Type"}),u.jsx("option",{value:"Human Resource",children:"Human Resource"}),u.jsx("option",{value:"Financial Resource",children:"Financial Request"}),u.jsx("option",{value:"Other Resource",children:"Other Request"})]})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsxs("label",{className:"block mb-1 text-sm",children:["Specific Needs ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{name:"resourceToolNeeded",value:V.resourceToolNeeded,onChange:L,className:"w-full p-2 border text-sm",disabled:!V.requestType,children:[u.jsx("option",{value:"",children:"Select Resource/Tool Needed"}),V.requestType&&((X=E[V.requestType])==null?void 0:X.map((Y,ne)=>u.jsx("option",{value:Y,children:Y},ne)))]})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block mb-1 text-sm",children:"Description"}),u.jsx("textarea",{name:"description",value:V.description,onChange:L,className:"w-full p-2 border text-sm",placeholder:"Describe the request in detail"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block mb-1 text-sm",children:"Date Entry"}),u.jsx("input",{type:"date",name:"dateEntry",value:V.dateEntry,onChange:L,className:"w-full p-2 border text-sm text-gray-400",readOnly:!0})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block mb-1 text-sm",children:["Date Needed ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"date",name:"dateNeeded",value:V.dateNeeded,onChange:L,className:"w-full p-2 border text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block mb-1 text-sm",children:"Prospect Resource Person"}),u.jsx("input",{type:"text",name:"prospectResourcePerson",value:V.prospectResourcePerson,onChange:L,className:"w-full p-2 border text-sm",placeholder:"Enter the name of resource person"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block mb-1 text-sm",children:["Priority Level ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{name:"priorityLevel",value:V.priorityLevel,onChange:L,className:"w-full p-2 border text-sm",children:[u.jsx("option",{value:"",children:"Select Priority Level"}),u.jsx("option",{value:"LOW",children:"Low"}),u.jsx("option",{value:"MEDIUM",children:"Medium"}),u.jsx("option",{value:"HIGH",children:"High"})]})]}),u.jsxs("div",{className:"col-span-2 flex justify-end gap-2 mt-2",children:[u.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 bg-gray-500 text-white text-sm rounded-sm hover:bg-gray-600 transition",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:!V.responsibleTeamMember||!V.requestType||!V.resourceToolNeeded||!V.dateNeeded||!V.priorityLevel,className:`px-4 py-2 text-white text-sm rounded-sm transition ${!V.responsibleTeamMember||!V.requestType||!V.resourceToolNeeded||!V.dateNeeded||!V.priorityLevel?"bg-gray-400 cursor-not-allowed":"bg-secondary-color hover:bg-opacity-80"}`,children:k?"Update Request":"Submit Request"})]})]})]})})]}):u.jsx("div",{className:"flex items-center justify-center h-svh",children:"Loading... Please Wait."})}function I3(){const[s,e]=C.useState({name:"",lastname:"",email:"",mobile:"",role:"",facebook:"",github:"",linkedin:""}),t=jt();C.useEffect(()=>{document.title="Incubatee | Edit Profile",(async()=>{const h=we.currentUser;if(h){const p=await ht(ge(Z,"users",h.uid));p.exists()&&e(p.data())}})()},[]);const i=l=>{const{name:h,value:p}=l.target;e(m=>({...m,[h]:p}))},o=async l=>{l.preventDefault();try{const h=we.currentUser;h&&(await ft(ge(Z,"users",h.uid),s),alert("Profile updated successfully!"),t("/incubatee-dashboard"))}catch(h){console.error("Error updating profile:",h),alert("Error updating profile. Please try again.")}};return u.jsxs("div",{className:"flex",children:[u.jsx(Yo,{}),u.jsxs("div",{className:"flex flex-col items-center justify-center h-screen w-full p-10 ",children:[u.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Edit Profile"}),u.jsxs("form",{onSubmit:o,className:"w-full max-w-2xl p-8 rounded-lg",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"text-sm",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Personal Information"}),u.jsxs("div",{className:"mb-2",children:[u.jsx("label",{className:"block text-sm font-bold ",htmlFor:"name",children:"First Name"}),u.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:i,className:"w-full p-2 border rounded-sm"})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-bold",htmlFor:"lastname",children:"Last Name"}),u.jsx("input",{type:"text",id:"lastname",name:"lastname",value:s.lastname,onChange:i,className:"w-full p-2 border rounded-sm"})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-bold ",htmlFor:"email",children:"Email"}),u.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:i,className:"w-full p-2 border rounded-sm text-gray-400",readOnly:!0})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-bold ",htmlFor:"mobile",children:"Mobile"}),u.jsx("input",{type:"text",id:"mobile",name:"mobile",value:s.mobile,onChange:i,className:"w-full p-2 border rounded-sm"})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-bold ",htmlFor:"role",children:"Role"}),u.jsx("input",{type:"text",id:"role",name:"role",value:s.role,onChange:i,className:"w-full p-2 border rounded-sm text-gray-400",readOnly:!0})]})]}),u.jsxs("div",{className:"text-sm",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Social Media Links"}),u.jsxs("div",{className:"mb-2",children:[u.jsx("label",{className:"block text-sm font-bold ",htmlFor:"facebook",children:"Facebook"}),u.jsx("input",{type:"text",id:"facebook",name:"facebook",value:s.facebook,onChange:i,className:"w-full p-2 border rounded-sm"})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-bold ",htmlFor:"github",children:"Github"}),u.jsx("input",{type:"text",id:"github",name:"github",value:s.github,onChange:i,className:"w-full p-2 border rounded-sm "})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-bold ",htmlFor:"linkedin",children:"LinkedIn"}),u.jsx("input",{type:"text",id:"linkedin",name:"linkedin",value:s.linkedin,onChange:i,className:"w-full p-2 border rounded-sm"})]})]})]}),u.jsx("div",{className:"flex justify-end mt-2",children:u.jsx("button",{type:"submit",className:"px-6 py-2 bg-secondary-color text-white text-sm rounded-sm hover:bg-opacity-80 transition",children:"Update Profile"})})]})]})]})}function D3(){const[s,e]=C.useState(""),[t,i]=C.useState(""),[o,l]=C.useState(""),[h,p]=C.useState(""),[m,y]=C.useState(""),[x,w]=C.useState(""),[T,S]=C.useState(""),[A,q]=C.useState(null),N=jt();C.useEffect(()=>{document.title="Create Account as Employee"},[]);const V=async P=>{if(P.preventDefault(),q(null),!t||!o||!h||!m||!x||!T||!s){q("All fields are required.");return}if(x!==T){q("Passwords do not match.");return}if(x.length<8||!/[a-z]/.test(x)||!/[0-9]/.test(x)){q("Password does not meet the requirements.");return}try{const F=(await a1(we,h,x)).user;await Kg(ge(Z,"users",F.uid),{name:t,lastname:o,email:h,mobile:m,role:s,status:"pending",timestamp:is()}),alert("Account created successfully! Awaiting admin approval."),N("/waiting-for-approval")}catch(k){q(k.message)}};return u.jsxs("div",{className:"flex items-center justify-center h-screen relative",children:[u.jsx("button",{onClick:()=>N(-1),className:"absolute top-4 left-4 text-gray-600 hover:text-gray-800 transition",children:u.jsx(Qo,{size:24})}),u.jsxs("form",{onSubmit:V,className:"flex flex-col gap-2 p-5 bg-white rounded-md shadow-xl max-w-lg",children:[u.jsx("h1",{className:"text-center text-lg font-bold pb-3",children:"Create Account as Employee"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",placeholder:"Name",className:"p-2 border rounded-sm text-sm w-full",required:!0,value:t,onChange:P=>i(P.target.value)}),u.jsx("input",{type:"text",placeholder:"Lastname",className:"p-2 border rounded-sm text-sm w-full",required:!0,value:o,onChange:P=>l(P.target.value)})]}),u.jsx(M3,{setRole:e,role:s,className:"border text-sm"}),u.jsx("input",{type:"email",placeholder:"Email",className:"p-2 border text-sm",required:!0,value:h,onChange:P=>p(P.target.value)}),u.jsx("input",{type:"text",placeholder:"Mobile Number",maxLength:11,className:"p-2 border text-sm",required:!0,value:m,onChange:P=>y(P.target.value)}),u.jsx("input",{type:"password",placeholder:"Password",className:"p-2 border text-sm",required:!0,value:x,onChange:P=>w(P.target.value)}),u.jsxs("ul",{className:"text-xs text-gray-600 mt-1",children:[u.jsx("li",{className:`${x.length>=8?"text-green-500":"text-red-500"}`,children:"* Password must be at least 8 characters long"}),u.jsx("li",{className:`${/[a-z]/.test(x)?"text-green-500":"text-red-500"}`,children:"* Must contain at least one lowercase letter"}),u.jsx("li",{className:`${/[0-9]/.test(x)?"text-green-500":"text-red-500"}`,children:"* Must contain at least one number"})]}),u.jsx("input",{type:"password",placeholder:"Confirm Password",className:"p-2 border text-sm",required:!0,value:T,onChange:P=>S(P.target.value)}),A&&u.jsx("p",{className:"text-red-500 text-center",children:A}),u.jsx(ys,{text:"Create Account",className:`px-4 py-2 text-white text-sm rounded-sm transition ${!t||!o||!h||!m||!x||!T||!s||x!==T||x.length<8||!/[a-z]/.test(x)||!/[0-9]/.test(x)?"bg-gray-400 cursor-not-allowed":"bg-primary-color hover:bg-opacity-80"}`,disabled:!t||!o||!h||!m||!x||!T||!s||x!==T||x.length<8||!/[a-z]/.test(x)||!/[0-9]/.test(x)})]})]})}function M3({setRole:s,role:e,className:t}){const[i,o]=C.useState(!1),l=C.useRef(null),h=["TBI Manager","TBI Assistant","Portfolio Manager"];return C.useEffect(()=>{function p(m){l.current&&!l.current.contains(m.target)&&o(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),u.jsxs("div",{className:"relative",ref:l,children:[u.jsxs("button",{type:"button",className:`p-2 bg-white w-full text-left flex items-center justify-between ${t} ${e?"text-black":"text-gray-400"}`,onClick:()=>o(!i),children:[e||"Choose Role",u.jsx(c3,{className:"text-gray-600"})," "]}),i&&u.jsx("ul",{className:"absolute left-0 mt-1 w-full bg-white shadow-md rounded-md z-10",children:h.map((p,m)=>u.jsx("li",{className:"px-4 py-2 hover:bg-gray-200 cursor-pointer transition",onClick:()=>{s(p),o(!1)},children:p},m))})]})}function O3(){const[s,e]=C.useState(""),[t,i]=C.useState(""),[o,l]=C.useState(null),h=jt(),p=["TBI Manager","Portfolio Manager","TBI Assistant"];C.useEffect(()=>{document.title="Employee Login"},[]);const m=async x=>{x.preventDefault(),l(null);try{const T=(await o1(we,s,t)).user,S=await ht(ge(Z,"users",T.uid));if(S.exists()){const A=S.data();A.status==="approved"&&p.includes(A.role)?A.role==="TBI Manager"||A.role==="TBI Assistant"?h("/admin-dashboard"):A.role==="Portfolio Manager"&&h("/employee-dashboard"):l("Access denied. Your account is either pending approval or you do not have permission.")}else l("User not found.")}catch{l("Invalid credentials. Please try again.")}},y=async()=>{const x=new ds;try{const T=(await og(we,x)).user,S=await ht(ge(Z,"users",T.uid));if(S.exists()){const A=S.data();A.status==="approved"&&p.includes(A.role)?A.role==="TBI Manager"||A.role==="TBI Assistant"?h("/admin-dashboard"):A.role==="Portfolio Manager"&&h("/employee-dashboard"):l("Access denied. Your account is either pending approval or you do not have permission.")}else l("User not found.")}catch{l("Google Sign-In failed. Try again.")}};return u.jsxs("div",{className:"flex flex-row-reverse h-screen",children:[u.jsxs("div",{className:"flex flex-col w-1/2 gap-6 items-center justify-center p-10 relative",children:[u.jsx("button",{onClick:()=>h(-1),className:"absolute top-4 left-4 text-gray-600 hover:text-gray-800 transition",children:u.jsx(Qo,{size:24})}),u.jsx("img",{src:Li,alt:"MarianTBI-logo",className:"w-28 p-2"}),u.jsxs("form",{onSubmit:m,className:"flex flex-col gap-3 w-full max-w-xs",children:[u.jsx("h1",{className:"text-center font-bold text-md",children:"Login As Employee"}),o&&u.jsx("p",{className:"text-red-500 text-center",children:o}),u.jsx("input",{type:"text",placeholder:"Email",className:"bg-gray-200 p-2 text-sm rounded-sm",value:s,onChange:x=>e(x.target.value),required:!0}),u.jsx("input",{type:"password",placeholder:"Password",className:"bg-gray-200 p-2 text-sm rounded",value:t,onChange:x=>i(x.target.value),required:!0}),u.jsx(ys,{text:"Log In",className:"bg-primary-color text-text-color hover:bg-white hover:text-primary-color transition-all"})]}),u.jsx(k3,{}),u.jsxs("button",{onClick:y,className:"flex items-center justify-center gap-2 bg-white p-3 border-2 rounded cursor-pointer transition hover:scale-105",children:[u.jsx(Vd,{className:"w-6 h-6"}),u.jsx("span",{className:"text-gray-600 text-xs",children:"Sign in with Google"})]}),u.jsxs("div",{className:"flex justify-center gap-4 w-full max-w-xs text-xs",children:[u.jsx(Ft,{to:"/password-reset",className:"text-blue-600 hover:underline",children:"Forgot Password?"}),u.jsx(Ft,{to:"/employee-create-account",className:"text-blue-600 hover:underline",children:"Create Account"})]})]}),u.jsxs("div",{className:"relative w-1/2 flex flex-col justify-center gap-5 p-10 text-text-color bg-banner-img bg-cover bg-center bg-no-repeat",children:[u.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("h1",{className:"text-lg font-semibold",children:"University of the Immaculate Conception"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-7xl font-bold",children:"MARIAN"}),u.jsx("h2",{className:"text-4xl font-bold",children:"Technology"}),u.jsx("h2",{className:"text-4xl font-bold",children:"Business"}),u.jsx("h2",{className:"text-4xl font-bold",children:"Incubator"})]}),u.jsx("p",{className:"text-sm leading-relaxed",children:'"Empowering startups through innovation, collaboration, and cutting-edge technology. Marian TBI provides mentorship, resources, and a thriving ecosystem for aspiring entrepreneurs to turn ideas into reality."'})]})]})]})}function k3(){return u.jsxs("div",{className:"flex items-center w-full",children:[u.jsx("div",{className:"flex-grow border-t border-gray-400"}),u.jsx("span",{className:"mx-4 text-xs text-gray-600",children:"Or"}),u.jsx("div",{className:"flex-grow border-t border-gray-400"})]})}function Wo({onUserFetched:s=()=>{}}){const[e,t]=C.useState("Loading..."),[i,o]=C.useState("Loading..."),[l,h]=C.useState(0),[p,m]=C.useState(0),y=jt();C.useEffect(()=>{const w=async()=>{const V=sessionStorage.getItem("currentUser");if(V){const P=JSON.parse(V);t(`${P.name} ${P.lastname}`),o(P.role),s(P),S(P.id),A(P.id),await q(P.id)}else{const P=we.currentUser;if(P){const k=await ht(ge(Z,"users",P.uid));if(k.exists()){const F={id:k.id,...k.data()};sessionStorage.setItem("currentUser",JSON.stringify(F)),t(`${F.name} ${F.lastname}`),o(F.role),s(F),S(F.id),A(F.id),await q(F.id)}}}},T=async V=>{if(V){const P=await ht(ge(Z,"users",V.uid));if(P.exists()){const k={id:P.id,...P.data()};sessionStorage.setItem("currentUser",JSON.stringify(k)),t(`${k.name} ${k.lastname}`),o(k.role),s(k),S(k.id),A(k.id),await q(k.id)}}else sessionStorage.removeItem("currentUser"),t("Loading..."),o("Loading..."),s(null)},S=V=>{const P=Ve(xe(Z,"messages"),Ye("receiverId","==",V),Ye("seen","==",!1));return pt(P,F=>{h(F.size)})},A=V=>{const P=Ve(xe(Z,"notifications"),Ye("userId","==",V),Ye("read","==",!1));return pt(P,F=>{m(F.size)})},q=async V=>{const P=ge(Z,"users",V);await ft(P,{lastOnline:is()})};w();const N=we.onAuthStateChanged(T);return()=>{N()}},[s]);const x=async()=>{try{const w=we.currentUser;if(w){const T=ge(Z,"users",w.uid);await ft(T,{lastOnline:is()})}await rg(we),sessionStorage.removeItem("currentUser"),y("/",{replace:!0})}catch(w){console.error("Error logging out:",w)}};return u.jsxs("div",{className:"group w-[4rem] hover:w-1/4 h-screen bg-primary-color overflow-hidden transition-all duration-300",children:[u.jsxs("div",{className:"flex gap-3 p-3 items-center",children:[u.jsx("img",{src:Li,alt:"Marian Logo",className:"w-10 h-10 bg-white rounded-sm"}),u.jsxs("div",{className:"flex flex-col opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-white",children:[u.jsx("h1",{className:"text-base font-bold",children:e}),u.jsx("p",{className:"text-sm",children:i})]})]}),u.jsx("nav",{className:"mt-6",children:u.jsxs("ul",{className:"space-y-1",children:[u.jsx(Ch,{to:"/employee-dashboard",icon:u.jsx(ey,{}),text:"Dashboard"}),u.jsx(Ch,{to:"/employee-groups",icon:u.jsx(ty,{}),text:"Incubatees"}),u.jsx(Ch,{to:"/employee-notification",icon:u.jsx(sy,{}),text:"Notification",unreadCount:p}),u.jsx(Ch,{to:"/employee-chat",icon:u.jsx(ry,{}),text:"Chat",unreadCount:l}),u.jsx("li",{children:u.jsxs("button",{onClick:x,className:"flex items-center gap-4 p-4 w-full text-left hover:bg-white hover:text-primary-color cursor-pointer transition-all text-white",children:[u.jsx(iy,{className:"text-2xl"}),u.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:"LogOut"})]})})]})})]})}function Ch({to:s,icon:e,text:t,unreadCount:i}){return u.jsx("li",{children:u.jsxs(Ft,{to:s,className:"flex items-center gap-4 p-4 hover:bg-white hover:text-primary-color cursor-pointer transition-all text-white",children:[u.jsx("span",{className:"text-2xl",children:e}),u.jsxs("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center",children:[t,i>0&&u.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:i})]})]})})}function P3(){const[s,e]=C.useState(0),[t,i]=C.useState([]),[o,l]=C.useState({}),[h,p]=C.useState({}),[m,y]=C.useState(null);return C.useEffect(()=>{document.title="Employee | Dashboard",(async()=>{try{const w=sessionStorage.getItem("currentUser");if(w){const T=JSON.parse(w);y(T);let S;T.role==="Portfolio Manager"?S=Ve(xe(Z,"groups"),Ye("portfolioManager.id","==",T.id)):S=xe(Z,"groups");const q=(await tt(S)).docs.map(re=>({id:re.id,...re.data()}));i(q),e(q.length);const V=(await tt(xe(Z,"requests"))).docs.map(re=>re.data()),P={};q.forEach(re=>{P[re.id]=V.filter(L=>L.groupId===re.id).length}),l(P);const F=(await tt(xe(Z,"workplan"))).docs.map(re=>({id:re.id,...re.data()})),ee={};q.forEach(re=>{const L=F.filter(B=>B.groupId===re.id),E=L.length,R=L.filter(B=>B.status==="Completed").length,M=E>0?Math.round(R/E*100):0;ee[re.id]=M}),p(ee)}}catch(w){console.error("Error fetching dashboard data:",w)}})()},[]),u.jsxs("div",{className:"flex",children:[u.jsx(Wo,{}),u.jsxs("div",{className:"flex flex-col items-start justify-start h-screen w-full p-10 bg-gray-100 overflow-x-auto",children:[u.jsx("h1",{className:"text-4xl font-bold",children:"Employee Dashboard"}),u.jsx("p",{className:"text-md text-gray-600 mb-4",children:"Summary of all StartUps and their progress"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-4 w-full",children:u.jsxs("div",{className:"p-6 bg-white shadow rounded-sm hover:shadow-lg transition-shadow duration-300",children:[u.jsx("h2",{className:"text-lg font-medium text-gray-800 ",children:"Total Number of Assigned StartUps"}),u.jsx("p",{className:"text-3xl font-bold text-blue-500 mt-4",children:s})]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full",children:[u.jsxs("div",{className:"bg-white p-4 rounded-sm shadow w-full hover:shadow-lg transition-shadow duration-300",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Number of Requests per StartUps"}),u.jsx("div",{className:"max-h-64 overflow-y-auto",children:u.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[u.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-4 py-2",children:"StartUp Name"}),u.jsx("th",{scope:"col",className:"px-4 py-2",children:"Number of Requests"})]})}),u.jsx("tbody",{children:t.sort((x,w)=>(o[w.id]||0)-(o[x.id]||0)).map(x=>u.jsxs("tr",{className:"border-b last:border-b-0",children:[u.jsx("td",{className:"px-4 py-2",children:x.name}),u.jsx("td",{className:"px-4 py-2",children:o[x.id]||0})]},x.id))})]})})]}),u.jsxs("div",{className:"bg-white p-4 rounded-sm shadow w-full hover:shadow-lg transition-shadow duration-300",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Total Progress Completion per StartUps"}),u.jsx("div",{className:"max-h-64 overflow-y-auto",children:u.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[u.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-4 py-2",children:"StartUp Name"}),u.jsx("th",{scope:"col",className:"px-4 py-2",children:"Total Progress (%)"})]})}),u.jsx("tbody",{children:t.sort((x,w)=>(h[w.id]||0)-(h[x.id]||0)).map(x=>u.jsxs("tr",{className:"border-b last:border-b-0",children:[u.jsx("td",{className:"px-4 py-2",children:x.name}),u.jsxs("td",{className:"px-4 py-2",children:[h[x.id]||0,"%"]})]},x.id))})]})})]})]})]})]})}function L3(){const[s,e]=C.useState([]),[t,i]=C.useState(null),[o,l]=C.useState(""),h=jt();C.useEffect(()=>{document.title="Employee | Groups"},[]),C.useEffect(()=>{let y;return t&&(async()=>{try{let w;t.role==="TBI Manager"?w=Ve(xe(Z,"groups")):t.role==="Portfolio Manager"&&(w=Ve(xe(Z,"groups"),Ye("portfolioManager.id","==",t.id))),w&&(y=pt(w,T=>{e(T.docs.map(S=>({id:S.id,...S.data()})))}))}catch(w){console.error("Error fetching user groups:",w)}})(),()=>{y&&y()}},[t]);const p=y=>{h(`/employee/view-group/${y}`)},m=s.filter(y=>y.name.toLowerCase().includes(o.toLowerCase())||y.description.toLowerCase().includes(o.toLowerCase()));return u.jsxs("div",{className:"flex",children:[u.jsx(Wo,{onUserFetched:i}),u.jsxs("div",{className:"flex flex-col items-start h-screen w-full p-10",children:[u.jsxs("div",{className:"flex justify-between items-center w-full mb-5",children:[u.jsx("h1",{className:"text-4xl font-bold",children:"Incubatees"}),u.jsx("input",{type:"text",placeholder:"Search startups...",value:o,onChange:y=>l(y.target.value),className:"p-2 border rounded-sm text-sm w-64"})]}),u.jsx("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:m.length>0?[...m].sort((y,x)=>y.archived&&!x.archived?1:!y.archived&&x.archived?-1:y.name.localeCompare(x.name)).map(y=>u.jsxs("div",{className:`p-4 rounded-sm shadow-sm border hover:shadow-lg transition-shadow duration-300 relative ${y.archived?"bg-gray-200 opacity-70":"bg-white"}`,children:[u.jsx("h2",{className:"text-md font-bold",children:y.name}),u.jsx("p",{className:"text-xs text-gray-600",children:y.description}),y.imageUrl&&u.jsx("img",{src:y.imageUrl,alt:y.name,className:"mt-2 w-full h-40 object-cover rounded-lg"}),u.jsxs("div",{className:"mt-2",children:[u.jsx("h3",{className:"font-bold text-sm",children:"Members:"}),u.jsxs("div",{className:"flex flex-col justify-start text-xs",children:[u.jsx("ul",{className:"flex-1",children:y.members.map(x=>u.jsxs("li",{children:[x.name," ",x.lastname]},x.id))}),y.portfolioManager.id!==t.id&&u.jsxs("div",{className:"flex-1 mt-2",children:[u.jsx("h3",{className:"font-bold text-sm",children:"Assigned PM:"}),u.jsxs("p",{children:[y.portfolioManager.name," ",y.portfolioManager.lastname]})]})]})]}),u.jsx("div",{className:"absolute bottom-4 right-4",children:u.jsx("button",{onClick:()=>p(y.id),className:"bg-primary-color border border-primary-color text-white px-4 py-2 rounded-sm text-xs hover:bg-white hover:text-primary-color transition",children:"View Group"})})]},y.id)):u.jsx("p",{className:"text-gray-500",children:"No groups assigned."})})]})]})}function S2(s){return We({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"},child:[]}]})(s)}function A2(s){return We({attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 21 3.03125 L 20.34375 3.75 C 18.875 5.367188 17.664063 6.089844 16.65625 6.5625 C 15.648438 7.035156 14.800781 7.175781 13.96875 7.8125 C 13.082031 8.492188 11.792969 9.796875 11.25 12.125 C 10.085938 12.378906 9.234375 12.824219 8.5625 13.40625 C 7.898438 13.980469 7.398438 14.632813 6.78125 15.34375 C 6.777344 15.351563 6.785156 15.367188 6.78125 15.375 C 5.898438 16.390625 5.125 17.484375 3.625 18.0625 L 3 18.3125 L 3 29 L 22.0625 29 C 23.15625 28.941406 23.914063 28.183594 24.375 27.4375 C 24.835938 26.691406 25.089844 25.882813 25.21875 25.21875 C 25.550781 23.527344 26.15625 18.65625 26.15625 18.65625 L 26.1875 18.5625 L 26.1875 18.46875 C 26.15625 17.792969 25.878906 17.21875 25.53125 16.6875 L 26.65625 13.34375 L 28.4375 10.65625 L 28.9375 9.9375 L 28.28125 9.34375 L 21.71875 3.65625 Z M 21.0625 5.78125 L 26.28125 10.3125 L 24.90625 12.34375 L 24.8125 12.4375 L 24.78125 12.59375 L 23.875 15.28125 C 23.402344 15.085938 22.914063 14.949219 22.375 14.96875 L 22.3125 14.96875 L 16 15 L 15 15 L 15 18.875 C 14.859375 19.964844 14.253906 20.386719 13.5 20.6875 C 13.25 20.789063 13.21875 20.734375 13 20.78125 L 13 14.96875 C 12.835938 11.261719 14.15625 10.195313 15.1875 9.40625 C 15.472656 9.1875 16.308594 8.933594 17.5 8.375 C 18.496094 7.90625 19.734375 7.066406 21.0625 5.78125 Z M 11.0625 14.375 C 11.058594 14.601563 10.988281 14.761719 11 15 C 11 15.011719 11 15.019531 11 15.03125 L 11 23 L 12 23 C 12 23 13.070313 22.988281 14.21875 22.53125 C 15.367188 22.074219 16.753906 21.003906 17 19.125 L 17 17 L 22.375 16.96875 L 22.40625 16.96875 C 23.328125 16.917969 24.09375 17.617188 24.15625 18.53125 C 24.152344 18.546875 24.105469 18.917969 24.09375 19 L 20 19 L 20 21 L 23.84375 21 C 23.738281 21.773438 23.640625 22.257813 23.53125 23 L 20 23 L 20 25 L 23.21875 25 C 23.113281 25.445313 22.902344 25.976563 22.65625 26.375 C 22.382813 26.820313 22.148438 26.988281 21.9375 27 L 5 27 L 5 19.53125 C 6.621094 18.671875 7.628906 17.433594 8.28125 16.6875 C 8.957031 15.914063 9.421875 15.328125 9.875 14.9375 C 10.171875 14.683594 10.636719 14.539063 11.0625 14.375 Z"},child:[]}]})(s)}const U3=(s,e="text-xl")=>{switch(s){case"manager":return u.jsx(_2,{className:`text-green-500 ${e}`});case"welcome":return u.jsx(T2,{className:`text-blue-500 ${e}`});default:return u.jsx(A2,{className:`text-red-600 ${e}`})}};function V3(){const[s,e]=C.useState([]),t=jt();C.useEffect(()=>{document.title="Employee | Notification",(async()=>{try{const y=we.currentUser;if(y){const x=Ve(xe(Z,"notifications"),Ye("userId","==",y.uid)),T=(await tt(x)).docs.map(S=>({id:S.id,...S.data()}));T.sort((S,A)=>A.timestamp.seconds-S.timestamp.seconds),e(T)}}catch(y){console.error("Error fetching notifications:",y)}})()},[]);const i=async m=>{try{await ft(ge(Z,"notifications",m),{read:!0}),e(s.map(y=>y.id===m?{...y,read:!0}:y))}catch(y){console.error("Error marking notification as read:",y)}},o=async(m,y)=>{try{await i(m),y?t(`/employee/view-group/${y}`):(console.error("Group ID is missing in the notification."),alert("This notification does not have a valid group associated with it."))}catch(x){console.error("Error handling notification view:",x)}},l=async m=>{try{await rs(ge(Z,"notifications",m)),e(s.filter(y=>y.id!==m))}catch(y){console.error("Error deleting notification:",y)}},h=async()=>{try{const m=Oc(Z);s.forEach(y=>{const x=ge(Z,"notifications",y.id);m.update(x,{read:!0})}),await m.commit(),e(s.map(y=>({...y,read:!0})))}catch(m){console.error("Error marking all notifications as read:",m)}},p=async()=>{try{const m=Oc(Z);s.forEach(y=>{const x=ge(Z,"notifications",y.id);m.delete(x)}),await m.commit(),e([])}catch(m){console.error("Error deleting all notifications:",m)}};return u.jsxs("div",{className:"flex",children:[u.jsx(Wo,{}),u.jsxs("div",{className:"flex flex-col items-start p-10 h-screen w-full overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between w-full mb-5",children:[u.jsx("h1",{className:"text-4xl font-bold",children:"Notifications"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:h,className:"bg-blue-500 text-white text-xs px-4 py-2 rounded-sm hover:bg-blue-600 transition",children:"Mark All as Read"}),u.jsx("button",{onClick:p,className:"bg-red-500 text-white text-xs px-4 py-2 rounded-sm hover:bg-red-600 transition",children:"Delete All"})]})]}),u.jsx("div",{className:"w-full",children:u.jsx("ul",{className:"w-full",children:s.map(m=>u.jsxs("li",{className:`p-4 border rounded-sm flex items-center gap-4 ${m.read?"bg-gray-200":"bg-white"}`,children:[u.jsxs("div",{className:"flex-shrink-0",children:[U3(m.type,"text-3xl")," "]}),u.jsxs("div",{onClick:()=>o(m.id,m.groupId),className:"flex-1 cursor-pointer",children:[u.jsx("p",{className:"text-sm mb-1",dangerouslySetInnerHTML:{__html:m.message}}),u.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(m.timestamp.seconds*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),","," ",new Date(m.timestamp.seconds*1e3).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})]})]}),u.jsx("div",{className:"relative",children:u.jsxs("button",{className:"text-blue-500 hover:underline group p-2",children:[u.jsx(S2,{}),u.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border rounded shadow-lg z-10 hidden group-hover:block",children:[u.jsx("button",{onClick:()=>i(m.id),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Mark as Read"}),u.jsx("button",{onClick:()=>l(m.id),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Delete"})]})]})})]},m.id))})})]})]})}function z3(){const[s,e]=C.useState([]),[t,i]=C.useState(null),[o,l]=C.useState([]),[h,p]=C.useState(""),[m,y]=C.useState(null),[x,w]=C.useState(null),[T,S]=C.useState({}),[A,q]=C.useState({}),N=C.useRef(null);C.useEffect(()=>{document.title="Employee | Chats",(async()=>{const R=we.currentUser;if(R){(await ht(ge(Z,"users",R.uid))).data();const B=Ve(xe(Z,"users"),Ye("role","in",["TBI Manager","TBI Assistant"])),D=(await tt(B)).docs.map(Y=>({id:Y.id,...Y.data()})),Ee=Ve(xe(Z,"groups")),be=await tt(Ee),X=[];be.docs.forEach(Y=>{const ne=Y.data(),ce=ne.members.find(U=>U.groupRole==="Project Manager");ce&&X.push({...ce,groupName:ne.name})}),e([...D,...X])}})()},[]),C.useEffect(()=>{if(t){const E=Ve(xe(Z,"messages"),Uo("timestamp","asc")),R=pt(E,M=>{const O=M.docs.map(D=>({id:D.id,...D.data()})).filter(D=>D.senderId===we.currentUser.uid&&D.receiverId===t.id||D.senderId===t.id&&D.receiverId===we.currentUser.uid);if(l(O),O.forEach(async D=>{D.receiverId===we.currentUser.uid&&!D.seen&&await ft(ge(Z,"messages",D.id),{seen:!0})}),O.length>0){const D=O[O.length-1];q(Ee=>({...Ee,[t.id]:D.timestamp}))}});return()=>R()}},[t]),C.useEffect(()=>{const E=R=>{N.current&&!N.current.contains(R.target)&&w(null)};return document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[]),C.useEffect(()=>{const E=Ve(xe(Z,"messages"),Uo("timestamp","asc")),R=pt(E,M=>{const B=M.docs.map(D=>({id:D.id,...D.data()})),O={};B.forEach(D=>{D.receiverId===we.currentUser.uid&&!D.seen&&(O[D.senderId]||(O[D.senderId]=0),O[D.senderId]++)}),S(O)});return()=>R()},[]);const V=async()=>{h.trim()!==""&&(m?(await ft(ge(Z,"messages",m.id),{message:h,edited:!0}),y(null)):await Fs(xe(Z,"messages"),{senderId:we.currentUser.uid,receiverId:t.id,message:h,timestamp:new Date,seen:!1}),p(""))},P=E=>{E.key==="Enter"&&V()},k=E=>{p(E.message),y(E),w(null)},F=async E=>{await rs(ge(Z,"messages",E)),w(null)},ee=E=>new Date(E.seconds*1e3).toLocaleString("en-US",{month:"long",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),re=E=>{const R=new Date,M=new Date(E.seconds*1e3);return(R-M)/1e3/60>5},L=[...s].sort((E,R)=>A[E.id]&&A[R.id]?A[R.id].seconds-A[E.id].seconds:A[E.id]?-1:A[R.id]?1:(T[R.id]||0)-(T[E.id]||0));return u.jsxs("div",{className:"flex",children:[u.jsx(Wo,{}),u.jsx("div",{className:"flex flex-col items-start justify-start h-screen w-full p-10 bg-gray-100",children:u.jsxs("div",{className:"flex w-full h-svh bg-white rounded-lg shadow-lg overflow-hidden",children:[u.jsxs("div",{className:"w-1/4 border-r",children:[u.jsx("h2",{className:"text-md font-semibold p-4 border-b",children:"Chat Users"}),u.jsx("ul",{className:"overflow-y-auto h-96",children:L.map(E=>u.jsx("li",{className:`p-4 cursor-pointer hover:bg-gray-200 ${(t==null?void 0:t.id)===E.id?"bg-gray-200":""}`,onClick:()=>i(E),children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center overflow-hidden mr-3",children:E.profileImageUrl?u.jsx("img",{src:E.profileImageUrl,alt:`${E.name} ${E.lastname}`,className:"w-full h-full object-cover"}):u.jsx("span",{className:"text-gray-500 text-xs text-center",children:"No Image"})}),u.jsxs("div",{className:"flex flex-col flex-1",children:[u.jsxs("span",{className:"font-bold text-sm",children:[E.name," ",E.lastname]}),u.jsxs("span",{className:"text-xs text-gray-500",children:[E.role||E.groupRole," "]}),E.groupName&&u.jsx("span",{className:"text-xs text-gray-400",children:E.groupName})]}),T[E.id]>0&&u.jsx("span",{className:"text-xs bg-red-500 text-white rounded-full px-2 py-1",children:T[E.id]})]})},E.id))})]}),u.jsxs("div",{className:"w-3/4 flex flex-col",children:[u.jsx("div",{className:"flex-1 overflow-y-auto",children:t?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center mb-4 p-4 top-0 sticky bg-primary-color text-white z-10",children:u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("h2",{className:"text-md font-semibold",children:[t.name," ",t.lastname]}),u.jsx("span",{className:"text-xs text-white",children:t.role}),t.groupName&&u.jsx("span",{className:"text-xs text-gray-400",children:t.groupName})]})}),u.jsx("div",{className:"flex flex-col space-y-1 p-4",children:o.map((E,R)=>{const M=new Date(E.timestamp.seconds*1e3),B=R>0?new Date(o[R-1].timestamp.seconds*1e3):null,O=!B||M.getDate()!==B.getDate()||M.getHours()-B.getHours()>=1;return u.jsxs("div",{className:"flex flex-col",children:[O&&u.jsx("div",{className:"text-center text-xs text-gray-500 my-2",children:M.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}),u.jsx("div",{className:`p-2 rounded-sm text-sm ${E.senderId===we.currentUser.uid?"bg-blue-500 text-white self-end":"bg-gray-200 self-start"}`,title:ee(E.timestamp),children:u.jsxs("div",{className:"flex justify-between items-center",children:[E.senderId===we.currentUser.uid?u.jsxs(u.Fragment,{children:[E.edited&&u.jsx("span",{className:"text-xs text-red-500 mr-2",children:"(edited)"}),u.jsx("span",{children:E.message})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:E.message}),E.edited&&u.jsx("span",{className:"text-xs text-red-500 ml-2",children:"(edited)"})]}),E.senderId===we.currentUser.uid&&u.jsxs("div",{className:"relative flex gap-2 ml-2",children:[u.jsx(ny,{className:"cursor-pointer",onClick:()=>w(E.id)}),x===E.id&&u.jsxs("div",{ref:N,className:"absolute right-0 mt-2 w-48 bg-white border rounded shadow-lg z-10",children:[u.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>k(E),disabled:re(E.timestamp),children:"Edit"}),u.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>F(E.id),children:"Delete"})]})]})]})}),E.senderId===we.currentUser.uid&&E.seen&&R===o.length-1&&u.jsx("span",{className:"text-xs text-gray-500 self-end mt-1",children:"Seen"})]},E.id)})})]}):u.jsx("p",{className:"text-center text-gray-500",children:"Select a user to start chatting"})}),t&&u.jsxs("div",{className:"p-4 border-t flex items-center",children:[u.jsx("input",{type:"text",value:h,onChange:E=>p(E.target.value),onKeyPress:P,className:"w-full p-2 border text-sm rounded-sm",placeholder:"Type your message..."}),u.jsx("button",{onClick:V,className:"ml-2 px-4 py-2 bg-primary-color text-white text-sm rounded-sm hover:bg-opacity-80 transition",children:m?"Update":"Send"})]})]})]})})]})}function B3(){const{groupId:s}=Bp(),[e,t]=C.useState(null),[i,o]=C.useState([]),[l,h]=C.useState([]),[p,m]=C.useState("requests"),[y,x]=C.useState([]),[w,T]=C.useState(!1),[S,A]=C.useState(null),[q,N]=C.useState("");C.useEffect(()=>{const k=async()=>{try{const re=await ht(ge(Z,"groups",s));if(re.exists()){const L=re.data(),E=await Promise.all(L.members.map(async R=>{const M=await ht(ge(Z,"users",R.id));return M.exists()?{...R,...M.data()}:R}));t({id:re.id,...L}),x(E)}}catch(re){console.error("Error fetching group:",re)}},F=async()=>{try{const re=Ve(xe(Z,"requests"),Ye("groupId","==",s)),L=await tt(re);o(L.docs.map(E=>({id:E.id,...E.data()})))}catch(re){console.error("Error fetching requests:",re)}},ee=async()=>{try{const re=Ve(xe(Z,"workplan"),Ye("groupId","==",s)),L=await tt(re);h(L.docs.map(E=>({id:E.id,...E.data()})))}catch(re){console.error("Error fetching workplan:",re)}};k(),F(),ee()},[s]);const V=async(k,F)=>{try{await ft(ge(Z,"requests",k),{status:F}),o(L=>L.map(E=>E.id===k?{...E,status:F}:E));const ee=y.find(L=>L.groupRole==="Project Manager"),re=i.find(L=>L.id===k);ee&&re&&await Fs(xe(Z,"notifications"),{userId:ee.id,message:`<b style="color:blue">Request Update:</b> The status of a request <b>${re.resourceToolNeeded||"N/A"}</b> in your group <b>${e.name}</b> has been updated to <b style="color:green">${F}</b>.`,createdAt:is(),read:!1,type:"request-status-update",groupId:s})}catch(ee){console.error("Error updating status or sending notification:",ee)}},P=async()=>{try{await ft(ge(Z,"requests",S.id),{remarks:q}),o(k=>k.map(F=>F.id===S.id?{...F,remarks:q}:F)),T(!1),A(null),N("")}catch(k){console.error("Error saving remarks:",k)}};return e?u.jsxs("div",{className:"flex",children:[u.jsx(Wo,{}),u.jsxs("div",{className:"flex flex-col items-start h-screen w-full p-10 overflow-y-auto",children:[u.jsx("h1",{className:"text-4xl font-bold mb-2",children:e.name}),u.jsx("p",{className:"text-sm italic",children:e.description}),e.imageUrl&&u.jsx("img",{src:e.imageUrl,alt:e.name,className:"mt-2 w-full h-40 object-cover rounded-lg"}),u.jsxs("div",{className:"mt-2 flex flex-col justify-between items-start w-full gap-4 mb-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-md",children:"Members:"}),u.jsx("ul",{className:"text-sm",children:y.map(k=>u.jsxs("li",{children:[k.name," ",k.lastname," - ",k.groupRole," "]},k.id))})]}),u.jsxs("div",{className:"flex gap-2 ",children:[u.jsxs("div",{className:"bg-blue-500 text-white text-center p-2 rounded-sm shadow-md",children:[u.jsx("h3",{className:"text-xs",children:"No. of Tasks"}),u.jsx("p",{className:"text-md font-semibold mt-1",children:l.length})]}),u.jsxs("div",{className:"bg-yellow-500 text-white text-center p-2 rounded-sm shadow-md",children:[u.jsx("h3",{className:"text-xs",children:"Pending Tasks"}),u.jsx("p",{className:"text-md font-semibold mt-1",children:l.filter(k=>k.status==="Pending").length})]}),u.jsxs("div",{className:"bg-green-500 text-white text-center p-2 rounded-sm shadow-md",children:[u.jsx("h3",{className:"text-xs",children:"Completed Tasks"}),u.jsx("p",{className:"text-md font-semibold mt-1",children:l.filter(k=>k.status==="Completed").length})]}),u.jsxs("div",{className:`text-white text-center p-2 rounded-sm shadow-md ${l.length>0?Math.round(l.filter(k=>k.status==="Completed").length/l.length*100)>=75?"bg-green-500":Math.round(l.filter(k=>k.status==="Completed").length/l.length*100)>=50?"bg-yellow-500":"bg-red-500":"bg-gray-500"}`,children:[u.jsx("h3",{className:"text-xs",children:"Total Progress Completion"}),u.jsx("p",{className:"text-md font-semibold mt-1",children:l.length>0?`${Math.round(l.filter(k=>k.status==="Completed").length/l.length*100)}%`:"0%"})]})]})]}),u.jsxs("div",{className:"mt-2 w-full",children:[u.jsxs("div",{className:"flex mb-4",children:[u.jsx("button",{onClick:()=>m("requests"),className:`${p==="requests"?"bg-primary-color text-white":"bg-white border border-primary-color"} text-primary-color px-4 py-2 text-xs  hover:bg-opacity-80 transition`,children:"Group Requests"}),u.jsx("button",{onClick:()=>m("workplan"),className:`${p==="workplan"?"bg-primary-color text-white":"bg-white border border-primary-color"} text-primary-color px-4 py-2 text-xs  hover:bg-opacity-80 transition`,children:"Project Workplan"})]}),p==="requests"&&u.jsxs("div",{className:"overflow-y-auto h-80 mt-1",children:[u.jsx("p",{className:"font-bold mb-2",children:"Requested Needs"}),u.jsxs("table",{className:"min-w-full bg-white text-xs text-left",children:[u.jsx("thead",{className:"sticky top-0 bg-primary-color text-white",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-2 font-medium",children:"Responsible Team Member"}),u.jsx("th",{className:"p-2 font-medium",children:"Request Type"}),u.jsx("th",{className:"p-2 font-medium",children:"Description"}),u.jsx("th",{className:"p-2 font-medium",children:"Date Entry"}),u.jsx("th",{className:"p-2 font-medium",children:"Date Needed"}),u.jsx("th",{className:"p-2 font-medium",children:"Specific Needs"}),u.jsx("th",{className:"p-2 font-medium",children:"Prospect Resource Person"}),u.jsx("th",{className:"p-2 font-medium",children:"Priority Level"}),u.jsx("th",{className:"p-2 font-medium",children:"Remarks"}),u.jsx("th",{className:"p-2 font-medium",children:"Status"})]})}),u.jsx("tbody",{children:i.length>0?[...i].sort((k,F)=>{const ee={HIGH:1,MEDIUM:2,LOW:3};return k.status==="Done"&&F.status!=="Done"?1:k.status!=="Done"&&F.status==="Done"?-1:ee[k.priorityLevel]!==ee[F.priorityLevel]?ee[k.priorityLevel]-ee[F.priorityLevel]:new Date(k.dateEntry)-new Date(F.dateEntry)}).map((k,F)=>u.jsxs("tr",{className:`${k.status==="Done"?"bg-gray-200 opacity-70":F%2===0?"bg-white":"bg-gray-100"}`,children:[u.jsx("td",{className:"p-2",children:k.responsibleTeamMember}),u.jsx("td",{className:"p-2",children:k.requestType}),u.jsx("td",{className:"p-2",children:k.description}),u.jsx("td",{className:"p-2",children:new Date(k.dateEntry.seconds*1e3).toLocaleDateString()}),u.jsx("td",{className:"p-2",children:k.dateNeeded}),u.jsx("td",{className:"p-2",children:k.resourceToolNeeded}),u.jsx("td",{className:"p-2",children:k.prospectResourcePerson}),u.jsx("td",{className:`p-2 font-bold ${k.priorityLevel==="HIGH"?"text-red-500":k.priorityLevel==="MEDIUM"?"text-yellow-500":"text-green-500"}`,children:k.priorityLevel}),u.jsx("td",{className:"p-2 text-center",children:u.jsx("button",{onClick:()=>{A(k),N(k.remarks||""),T(!0)},className:"text-blue-500 hover:underline",children:u.jsx(w3,{})})}),u.jsx("td",{className:"p-2",children:u.jsxs("select",{value:k.status||"Pending",onChange:ee=>V(k.id,ee.target.value),className:"p-1 border rounded",children:[u.jsx("option",{value:"Pending",children:"Pending"}),u.jsx("option",{value:"Requested",children:"Requested"}),u.jsx("option",{value:"In Progress",children:"In Progress"}),u.jsx("option",{value:"Done",children:"Done"})]})})]},k.id)):u.jsx("tr",{children:u.jsx("td",{className:"p-2 text-center",colSpan:"10",children:"No requests found."})})})]})]}),p==="workplan"&&u.jsxs("div",{className:"overflow-y-auto mt-1",children:[u.jsx("p",{className:"font-bold mb-2",children:"Project Workplan"}),u.jsxs("table",{className:"min-w-full bg-white text-xs text-left",children:[u.jsx("thead",{className:"sticky top-0 bg-primary-color text-white",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-2 font-medium",children:"Task Name"}),u.jsx("th",{className:"p-2 font-medium text-right",children:"Assigned To"}),u.jsx("th",{className:"p-2 font-medium",children:"Start Date"}),u.jsx("th",{className:"p-2 font-medium",children:"End Date"}),u.jsx("th",{className:"p-2 font-medium",children:"Priority Level"})," ",u.jsx("th",{className:"p-2 font-medium",children:"Status"})]})}),u.jsx("tbody",{children:l.length>0?l.slice().sort((k,F)=>{const ee={High:1,Medium:2,Low:3};return ee[k.priorityLevel]!==ee[F.priorityLevel]?ee[k.priorityLevel]-ee[F.priorityLevel]:new Date(k.startDate)-new Date(F.startDate)}).map((k,F)=>u.jsxs("tr",{className:F%2===0?"bg-white":"bg-gray-100",children:[u.jsx("td",{className:"p-2",children:k.taskName}),u.jsx("td",{className:"p-2 text-right",children:k.assignedTo}),u.jsx("td",{className:"p-2",children:k.startDate?new Date(k.startDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}),u.jsx("td",{className:"p-2",children:k.endDate?new Date(k.endDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}),u.jsx("td",{className:`p-2 font-bold ${k.priorityLevel==="High"?"text-red-500":k.priorityLevel==="Medium"?"text-yellow-500":"text-green-500"}`,children:k.priorityLevel}),u.jsx("td",{className:`p-2 font-semibold ${k.status==="Pending"?"text-red-500":k.status==="In Progress"?"text-yellow-500":k.status==="Completed"?"text-green-500":"text-gray-500"}`,children:k.status})]},k.id)):u.jsx("tr",{children:u.jsx("td",{className:"py-2 px-4 text-center",colSpan:"6",children:"No tasks found."})})})]})]})]})]}),w&&u.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-[400px]",children:[u.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Edit Remarks"}),u.jsx("textarea",{value:q,onChange:k=>N(k.target.value),className:"w-full p-2 border text-sm",placeholder:"Enter remarks here..."}),u.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[u.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 bg-gray-500 text-white text-sm rounded-sm hover:bg-gray-600 transition",children:"Cancel"}),u.jsx("button",{onClick:P,className:"px-4 py-2 bg-primary-color text-white text-sm rounded-sm hover:bg-opacity-80 transition",children:"Save"})]})]})})]}):u.jsx("div",{className:"flex items-center justify-center h-svh",children:"Loading... Please Wait."})}function q3(){return C.useEffect(()=>{document.title="Employee | Chats"},[]),u.jsxs("div",{className:"flex",children:[u.jsx(Wo,{}),u.jsx("div",{className:"flex flex-col items-center justify-center h-screen w-full",children:u.jsx("h1",{className:"text-4xl font-bold",children:"Employee Edit Profile"})})]})}function H3(){return C.useEffect(()=>{document.title="Login as Admin"},[]),u.jsxs("div",{className:"flex flex-row-reverse h-screen",children:[u.jsxs("div",{className:"flex flex-col w-1/2 gap-6 items-center justify-center p-10",children:[u.jsx("img",{src:Li,alt:"MarianTBI-logo",className:"w-28 p-2"}),u.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[u.jsx("h1",{className:"text-center font-bold text-xl",children:"Login As Admin"}),u.jsx("input",{type:"text",placeholder:"Email or Mobile-number",className:"bg-gray-200 p-3 rounded"}),u.jsx("input",{type:"password",placeholder:"Password",className:"bg-gray-200 p-3 rounded"}),u.jsx(ys,{text:"Log In",className:"bg-primary-color text-text-color hover:bg-white hover:text-primary-color transition-all"}),u.jsx(F3,{}),u.jsxs("button",{className:"flex items-center justify-center gap-2 w-full bg-white p-3 border-2 rounded cursor-pointer transition hover:scale-105",children:[u.jsx(Vd,{className:"w-6 h-6"}),u.jsx("span",{className:"text-gray-600",children:"Sign in with Google"})]})]}),u.jsxs("div",{className:"flex justify-between w-full max-w-xs",children:[u.jsx(Ft,{to:"/password-reset",className:"text-blue-600 hover:underline",children:"Forgot Password?"}),u.jsx(Ft,{to:"/signup",className:"text-blue-600 hover:underline",children:"Create Account"})]})]}),u.jsxs("div",{className:"relative w-1/2 flex flex-col justify-center gap-5 p-10 text-text-color bg-banner-img bg-cover bg-center bg-no-repeat",children:[u.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("h1",{className:"text-lg font-semibold",children:"University of the Immaculate Conception"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-7xl font-bold",children:"MARIAN"}),u.jsx("h2",{className:"text-4xl font-bold",children:"Technology"}),u.jsx("h2",{className:"text-4xl font-bold",children:"Business"}),u.jsx("h2",{className:"text-4xl font-bold",children:"Incubator"})]}),u.jsx("p",{className:"text-sm leading-relaxed",children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Itaque dolores iure odio numquam aliquam recusandae fuga impedit, eius totam perspiciatis modi placeat mollitia, officiis vel ut rerum debitis exercitationem? Dolore."})]})]})]})}function F3(){return u.jsxs("div",{className:"flex items-center w-full",children:[u.jsx("div",{className:"flex-grow border-t border-gray-400"}),u.jsx("span",{className:"mx-4 text-gray-600",children:"Or"}),u.jsx("div",{className:"flex-grow border-t border-gray-400"})]})}function Ui(){const[s,e]=C.useState(null),[t,i]=C.useState(0),[o,l]=C.useState(0),h=jt();C.useEffect(()=>{const m=()=>{const w=we.currentUser;if(w){const T=ge(Z,"users",w.uid),S=pt(T,A=>{if(A.exists()){const q=A.data();e(q),y(w.uid),x(w.uid)}});return()=>S()}},y=w=>{if(!w)return;const T=Ve(xe(Z,"messages"),Ye("receiverId","==",w),Ye("seen","==",!1));return pt(T,A=>{i(A.size)})},x=w=>{if(!w)return;const T=Ve(xe(Z,"notifications"),Ye("userId","==",w),Ye("read","==",!1));return pt(T,A=>{l(A.size)})};m()},[]);const p=async()=>{try{await rg(we),h("/",{replace:!0})}catch(m){console.error("Error logging out:",m)}};return u.jsxs("div",{className:"group w-[4rem] hover:w-1/4 h-screen bg-primary-color overflow-hidden transition-all duration-300",children:[u.jsxs("div",{className:"flex gap-3 p-3 items-center",children:[u.jsx("img",{src:Li,alt:"Marian Logo",className:"w-10 h-10 bg-white rounded-md"}),u.jsx("div",{className:"flex flex-col opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-white",children:s&&u.jsxs(u.Fragment,{children:[u.jsxs("h1",{className:"text-base font-bold",children:[s.name," ",s.lastname]}),u.jsx("p",{className:"text-sm",children:s.role})]})})]}),u.jsx("nav",{className:"mt-6",children:u.jsxs("ul",{className:"space-y-1",children:[u.jsx(oc,{to:"/admin-dashboard",icon:u.jsx(ey,{}),text:"Dashboard"}),u.jsx(oc,{to:"/admin-groups",icon:u.jsx(ty,{}),text:"Incubatees"}),u.jsx(oc,{to:"/admin-user-management",icon:u.jsx(o3,{}),text:"UserManagement"}),u.jsx(oc,{to:"/admin-notification",icon:u.jsx(sy,{}),text:"Notification",unreadCount:o}),u.jsx(oc,{to:"/admin-chat",icon:u.jsx(ry,{}),text:"Chat",unreadCount:t}),u.jsx("li",{children:u.jsxs("button",{onClick:p,className:"flex items-center gap-4 p-4 w-full text-left hover:bg-white hover:text-primary-color cursor-pointer transition-all text-white",children:[u.jsx(iy,{className:"text-2xl"}),u.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:"LogOut"})]})})]})})]})}function oc({to:s,icon:e,text:t,unreadCount:i}){return u.jsx("li",{children:u.jsxs(Ft,{to:s,className:"flex items-center gap-4 p-4 hover:bg-white hover:text-primary-color cursor-pointer transition-all text-white",children:[u.jsx("span",{className:"text-2xl",children:e}),u.jsxs("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center",children:[t,i>0&&u.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:i})]})]})})}function G3(){const[s,e]=C.useState(0),[t,i]=C.useState(0),[o,l]=C.useState(0),[h,p]=C.useState(0),[m,y]=C.useState(0),[x,w]=C.useState(0),[T,S]=C.useState([]),[A,q]=C.useState({}),[N,V]=C.useState({}),[P,k]=C.useState(""),[F,ee]=C.useState(!1);return C.useEffect(()=>{document.title="Admin | Dashboard",(async()=>{try{const E=x1().currentUser;if(E){const he=await ht(ge(Z,"users",E.uid));if(he.exists()){const Ae=he.data();k(`${Ae.name} ${Ae.lastname}`)}}const M=(await tt(xe(Z,"groups"))).docs.map(he=>({id:he.id,...he.data()}));S(M),e(M.length);const B=Ve(xe(Z,"users"),Ye("role","not-in",["TBI Manager","TBI Assistant","Portfolio Manager"])),O=await tt(B),Ee=(await tt(xe(Z,"requests"))).docs.map(he=>he.data()),be={};let X=0,Y=0,ne=0;M.forEach(he=>{const Ae=Ee.filter(Me=>Me.groupId===he.id).length;be[he.id]=Ae,X+=Ae,Ee.forEach(Me=>{Me.groupId===he.id&&(Me.status==="Completed"?Y++:(Me.status==="On-going"||Me.status==="To be requested"||Me.status==="Requested")&&ne++)})}),q(be),i(X),l(Y),p(ne);const ce=Ve(xe(Z,"groups"),Ye("workplanStatus","==","Completed")),U=await tt(ce);y(U.size);const ie=Ve(xe(Z,"users"),Ye("status","==","pending")),pe=await tt(ie);w(pe.size);const me=(await tt(xe(Z,"workplan"))).docs.map(he=>({id:he.id,...he.data()})),Ie={};M.forEach(he=>{const Ae=me.filter(Lt=>Lt.groupId===he.id),Me=Ae.length,ot=Ae.filter(Lt=>Lt.status==="Completed").length,et=Me>0?Math.round(ot/Me*100):0;Ie[he.id]=et}),V(Ie)}catch(L){console.error("Error fetching dashboard data:",L)}})()},[]),u.jsxs("div",{className:"flex",children:[u.jsx(Ui,{}),u.jsxs("div",{className:"flex flex-col items-start justify-start h-screen w-full p-10 bg-gray-100 overflow-x-auto",children:[u.jsxs("h1",{className:"text-4xl font-bold",children:["Welcome, ",P||"Admin","!"]}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Here's an overview of the Incubatees's statistics."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 w-full text-center",children:[u.jsxs("div",{className:"p-6 bg-white shadow hover:shadow-lg transition-shadow duration-300",children:[u.jsx("h2",{className:"text-md font-medium text-gray-800",children:"Total No. of StartUps"}),u.jsx("p",{className:"text-xl font-bold text-blue-500 mt-4",children:s})]}),u.jsx("div",{className:`p-6 bg-white shadow transform transition-transform duration-500 hover:shadow-lg ${F?"rotate-y-180":""}`,onClick:()=>ee(!F),style:{perspective:"1000px",cursor:"pointer"},children:F?u.jsxs("div",{children:[u.jsx("h2",{className:"text-md font-medium text-gray-800",children:"Request Breakdown"}),u.jsxs("p",{className:"text-sm text-gray-600 mt-4",children:[u.jsx("strong",{children:"Completed:"})," ",o]}),u.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[u.jsx("strong",{children:"On-going:"})," ",h]}),u.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Click to flip back"})]}):u.jsxs("div",{children:[u.jsx("h2",{className:"text-md font-medium text-gray-800",children:"Total No. of Requested Needs"}),u.jsx("p",{className:"text-xl font-bold text-blue-500 mt-4",children:t}),u.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Click to view details"})]})}),u.jsxs("div",{className:"p-6 bg-white shadow hover:shadow-lg transition-shadow duration-300",children:[u.jsx("h2",{className:"text-md font-medium text-gray-800",children:"Completed Startups"}),u.jsx("p",{className:"text-xl font-bold text-blue-500 mt-4",children:m})]}),u.jsxs("div",{className:"p-6 bg-white shadow hover:shadow-lg transition-shadow duration-300",children:[u.jsx("h2",{className:"text-md font-medium text-gray-800",children:"Pending Request Users"}),u.jsx("p",{className:"text-xl font-bold text-blue-500 mt-4",children:x})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full mt-4 ",children:[u.jsxs("div",{className:"bg-white p-4 rounded-sm shadow w-full hover:shadow-lg transition-shadow duration-300",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Startups and Number of Requests"}),u.jsx("div",{className:"max-h-64 overflow-y-auto",children:u.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[u.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-4 py-2",children:"Group Name"}),u.jsx("th",{scope:"col",className:"px-4 py-2",children:"Number of Requests"})]})}),u.jsx("tbody",{children:T.sort((re,L)=>(A[L.id]||0)-(A[re.id]||0)).map(re=>u.jsxs("tr",{className:"border-b last:border-b-0",children:[u.jsx("td",{className:"px-4 py-2",children:re.name}),u.jsx("td",{className:"px-4 py-2",children:A[re.id]||0})]},re.id))})]})})]}),u.jsxs("div",{className:"bg-white p-4 rounded-sm shadow w-full hover:shadow-lg transition-shadow duration-300",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Startups and Total Progress Completion"}),u.jsx("div",{className:"max-h-64 overflow-y-auto",children:u.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[u.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-4 py-2",children:"Group Name"}),u.jsx("th",{scope:"col",className:"px-4 py-2",children:"Total Progress (%)"})]})}),u.jsx("tbody",{children:T.sort((re,L)=>(N[L.id]||0)-(N[re.id]||0)).map(re=>u.jsxs("tr",{className:"border-b last:border-b-0",children:[u.jsx("td",{className:"px-4 py-2",children:re.name}),u.jsxs("td",{className:"px-4 py-2",children:[N[re.id]||0,"%"]})]},re.id))})]})})]})]})]})]})}function $3(){const[s,e]=C.useState([]),[t,i]=C.useState(null),[o,l]=C.useState([]),[h,p]=C.useState(""),[m,y]=C.useState(null),[x,w]=C.useState(null),[T,S]=C.useState({}),[A,q]=C.useState({}),N=C.useRef(null);C.useEffect(()=>{document.title="Admin | Chats";const E=pt(xe(Z,"users"),R=>{const M=R.docs.map(O=>({id:O.id,...O.data()})),B=pt(xe(Z,"groups"),O=>{const D=O.docs.map(be=>({id:be.id,...be.data()})),Ee=M.filter(be=>be.id!==we.currentUser.uid&&["Portfolio Manager","Project Manager","TBI Assistant"].includes(be.role)).map(be=>{const X=D.find(Y=>Y.members.some(ne=>ne.email===be.email)||Y.portfolioManager.email===be.email);return{...be,groupName:X?X.name:"No Group"}});e(Ee)});return()=>B()});return()=>E()},[]),C.useEffect(()=>{if(t){const E=Ve(xe(Z,"messages"),Uo("timestamp","asc")),R=pt(E,M=>{const O=M.docs.map(D=>({id:D.id,...D.data()})).filter(D=>D.senderId===we.currentUser.uid&&D.receiverId===t.id||D.senderId===t.id&&D.receiverId===we.currentUser.uid);if(l(O),O.forEach(async D=>{D.receiverId===we.currentUser.uid&&!D.seen&&await ft(ge(Z,"messages",D.id),{seen:!0})}),O.length>0){const D=O[O.length-1];q(Ee=>({...Ee,[t.id]:D.timestamp}))}});return()=>R()}},[t]),C.useEffect(()=>{const E=R=>{N.current&&!N.current.contains(R.target)&&w(null)};return document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[]),C.useEffect(()=>{const E=Ve(xe(Z,"messages"),Uo("timestamp","asc")),R=pt(E,M=>{const B=M.docs.map(D=>({id:D.id,...D.data()})),O={};B.forEach(D=>{D.receiverId===we.currentUser.uid&&!D.seen&&(O[D.senderId]||(O[D.senderId]=0),O[D.senderId]++)}),S(O)});return()=>R()},[]);const V=async()=>{h.trim()!==""&&(m?(await ft(ge(Z,"messages",m.id),{message:h,edited:!0}),y(null)):await Fs(xe(Z,"messages"),{senderId:we.currentUser.uid,receiverId:t.id,message:h,timestamp:new Date,seen:!1}),p(""))},P=E=>{E.key==="Enter"&&V()},k=E=>{p(E.message),y(E),w(null)},F=async E=>{await rs(ge(Z,"messages",E)),w(null)},ee=E=>new Date(E.seconds*1e3).toLocaleString("en-US",{month:"long",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),re=E=>{const R=new Date,M=new Date(E.seconds*1e3);return(R-M)/1e3/60>5},L=[...s].sort((E,R)=>A[E.id]&&A[R.id]?A[R.id].seconds-A[E.id].seconds:A[E.id]?-1:A[R.id]?1:(T[R.id]||0)-(T[E.id]||0));return u.jsxs("div",{className:"flex",children:[u.jsx(Ui,{}),u.jsx("div",{className:"flex flex-col items-start justify-start h-screen w-full p-10 bg-gray-100",children:u.jsxs("div",{className:"flex w-full h-svh bg-white rounded-lg shadow-lg overflow-hidden",children:[u.jsxs("div",{className:"w-1/4 border-r",children:[u.jsx("h2",{className:"text-md font-semibold p-4 border-b",children:"Chat Users"}),u.jsx("ul",{className:"overflow-y-auto h-96",children:L.map(E=>u.jsx("li",{className:`p-4 cursor-pointer hover:bg-gray-200 ${(t==null?void 0:t.id)===E.id?"bg-gray-200":""}`,onClick:()=>i(E),children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center overflow-hidden mr-3",children:E.profileImageUrl?u.jsx("img",{src:E.profileImageUrl,alt:`${E.name} ${E.lastname}`,className:"w-full h-full object-cover"}):u.jsx("span",{className:"text-gray-500 text-xs text-center",children:"No Image"})}),u.jsxs("div",{className:"flex flex-col flex-1",children:[u.jsxs("span",{className:"font-bold text-sm",children:[E.name," ",E.lastname]}),u.jsx("span",{className:"text-xs text-gray-500",children:E.role}),E.role==="Project Manager"&&u.jsx("span",{className:"text-xs text-gray-400",children:E.groupName})]}),T[E.id]>0&&u.jsx("span",{className:"text-xs bg-red-500 text-white rounded-full px-2 py-1",children:T[E.id]})]})},E.id))})]}),u.jsxs("div",{className:"w-3/4 flex flex-col",children:[u.jsx("div",{className:"flex-1 overflow-y-auto",children:t?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center mb-4 p-4 top-0 sticky bg-primary-color text-white z-10",children:u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("h2",{className:"text-md font-semibold",children:[t.name," ",t.lastname]}),u.jsx("span",{className:"text-xs text-white",children:t.role}),t.role==="Project Manager"&&u.jsx("span",{className:"text-xs text-gray-400",children:t.groupName})]})}),u.jsx("div",{className:"flex flex-col p-4 space-y-1",children:o.map((E,R)=>{const M=new Date(E.timestamp.seconds*1e3),B=R>0?new Date(o[R-1].timestamp.seconds*1e3):null,O=!B||M.getDate()!==B.getDate()||M.getHours()-B.getHours()>=1;return u.jsxs("div",{className:"flex flex-col",children:[O&&u.jsx("div",{className:"text-center text-xs text-gray-500 my-2",children:M.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}),u.jsx("div",{className:`p-2 rounded-md text-sm ${E.senderId===we.currentUser.uid?"bg-blue-400 text-white self-end":"bg-gray-200 self-start"}`,title:ee(E.timestamp),children:u.jsxs("div",{className:"flex justify-between items-center",children:[E.senderId===we.currentUser.uid?u.jsxs(u.Fragment,{children:[E.edited&&u.jsx("span",{className:"text-xs text-red-500 mr-2",children:"(edited)"}),u.jsx("span",{children:E.message})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:E.message}),E.edited&&u.jsx("span",{className:"text-xs text-red-500 ml-2",children:"(edited)"})]}),E.senderId===we.currentUser.uid&&u.jsxs("div",{className:"relative flex gap-2 ml-2",children:[u.jsx(ny,{className:"cursor-pointer",onClick:()=>w(E.id)}),x===E.id&&u.jsxs("div",{ref:N,className:"absolute right-0 mt-2 w-48 bg-white border rounded shadow-lg z-10",children:[u.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>k(E),disabled:re(E.timestamp),children:"Edit"}),u.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>F(E.id),children:"Delete"})]})]})]})}),E.senderId===we.currentUser.uid&&E.seen&&R===o.length-1&&u.jsx("span",{className:"text-xs text-gray-500 self-end mt-1",children:"Seen"})]},E.id)})})]}):u.jsx("p",{className:"text-center text-gray-500",children:"Select a user to start chatting"})}),t&&u.jsxs("div",{className:"p-4 border-t flex items-center",children:[u.jsx("input",{type:"text",value:h,onChange:E=>p(E.target.value),onKeyPress:P,className:"w-full p-2 border text-sm rounded-sm",placeholder:"Type your message..."}),u.jsx("button",{onClick:V,className:"ml-2 px-4 py-2 bg-primary-color text-white text-sm rounded-sm hover:bg-opacity-80 transition",children:m?"Update":"Send"})]})]})]})})]})}function K3(s){return We({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M144 0a80 80 0 1 1 0 160A80 80 0 1 1 144 0zM512 0a80 80 0 1 1 0 160A80 80 0 1 1 512 0zM0 298.7C0 239.8 47.8 192 106.7 192l42.7 0c15.9 0 31 3.5 44.6 9.7c-1.3 7.2-1.9 14.7-1.9 22.3c0 38.2 16.8 72.5 43.3 96c-.2 0-.4 0-.7 0L21.3 320C9.6 320 0 310.4 0 298.7zM405.3 320c-.2 0-.4 0-.7 0c26.6-23.5 43.3-57.8 43.3-96c0-7.6-.7-15-1.9-22.3c13.6-6.3 28.7-9.7 44.6-9.7l42.7 0C592.2 192 640 239.8 640 298.7c0 11.8-9.6 21.3-21.3 21.3l-213.3 0zM224 224a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zM128 485.3C128 411.7 187.7 352 261.3 352l117.3 0C452.3 352 512 411.7 512 485.3c0 14.7-11.9 26.7-26.7 26.7l-330.7 0c-14.7 0-26.7-11.9-26.7-26.7z"},child:[]}]})(s)}function Q3(s){return We({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M170.5 51.6L151.5 80l145 0-19-28.4c-1.5-2.2-4-3.6-6.7-3.6l-93.7 0c-2.7 0-5.2 1.3-6.7 3.6zm147-26.6L354.2 80 368 80l48 0 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-8 0 0 304c0 44.2-35.8 80-80 80l-224 0c-44.2 0-80-35.8-80-80l0-304-8 0c-13.3 0-24-10.7-24-24S10.7 80 24 80l8 0 48 0 13.8 0 36.7-55.1C140.9 9.4 158.4 0 177.1 0l93.7 0c18.7 0 36.2 9.4 46.6 24.9zM80 128l0 304c0 17.7 14.3 32 32 32l224 0c17.7 0 32-14.3 32-32l0-304L80 128zm80 64l0 208c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-208c0-8.8 7.2-16 16-16s16 7.2 16 16zm80 0l0 208c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-208c0-8.8 7.2-16 16-16s16 7.2 16 16zm80 0l0 208c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-208c0-8.8 7.2-16 16-16s16 7.2 16 16z"},child:[]}]})(s)}const Y3=(s,e="text-xl")=>{switch(s){case"group_request":return u.jsx(A2,{className:`text-red-500 ${e}`});case"group_completion":return u.jsx(_2,{className:`text-green-500 ${e}`});case"new_pending_user":return u.jsx(K3,{className:`text-violet-500 ${e}`});default:return u.jsx(x2,{className:`text-gray-500 ${e}`})}};function W3(){const[s,e]=C.useState([]),[t,i]=C.useState(null),o=C.useRef(null),l=jt();C.useEffect(()=>{const S=(()=>{const A=we.currentUser;if(A){const q=Ve(xe(Z,"notifications"),Ye("userId","==",A.uid));return pt(q,V=>{const P=V.docs.map(k=>({id:k.id,...k.data()}));P.sort((k,F)=>{var ee,re;return((ee=F.timestamp)==null?void 0:ee.seconds)-((re=k.timestamp)==null?void 0:re.seconds)}),e(P)})}})();return()=>S&&S()},[]);const h=async T=>{try{await ft(ge(Z,"notifications",T),{read:!0}),e(S=>S.map(A=>A.id===T?{...A,read:!0}:A))}catch(S){console.error("Error marking notification as read:",S)}},p=async(T,S)=>{try{await h(T),S?l(`/admin/view-group/${S}`):(console.error("Group ID is missing in the notification."),alert("This notification does not have a valid group associated with it."))}catch(A){console.error("Error handling notification view:",A)}},m=async T=>{try{await rs(ge(Z,"notifications",T)),e(S=>S.filter(A=>A.id!==T))}catch(S){console.error("Error deleting notification:",S)}},y=async()=>{try{const T=Oc(Z);s.forEach(S=>{const A=ge(Z,"notifications",S.id);T.update(A,{read:!0})}),await T.commit(),e(S=>S.map(A=>({...A,read:!0})))}catch(T){console.error("Error marking all notifications as read:",T)}},x=async()=>{try{const T=Oc(Z);s.forEach(S=>{const A=ge(Z,"notifications",S.id);T.delete(A)}),await T.commit(),e([])}catch(T){console.error("Error deleting all notifications:",T)}},w=T=>{i(S=>S===T?null:T)};return C.useEffect(()=>{const T=S=>{o.current&&!o.current.contains(S.target)&&i(null)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]),u.jsxs("div",{className:"flex",children:[u.jsx(Ui,{}),u.jsxs("div",{className:"flex flex-col items-start justify-start h-screen w-full p-10 overflow-y-auto",children:[u.jsxs("div",{className:"flex justify-between items-center w-full mb-4",children:[u.jsx("h1",{className:"text-4xl font-bold",children:"Notifications"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:y,className:"px-4 py-2 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 transition",children:"Mark All as Read"}),u.jsx("button",{onClick:x,className:"px-4 py-2 bg-red-500 text-white text-xs rounded hover:bg-red-600 transition",children:"Delete All"})]})]}),u.jsx("ul",{className:"w-full",children:s.length>0?s.map(T=>u.jsxs("li",{className:`p-4 shadow-md hover:shadow-lg transition duration-200 relative flex gap-4 items-center ${T.read?"bg-gray-200":"bg-white"}`,children:[u.jsx("div",{className:"flex-shrink-0",children:Y3(T.type,"text-3xl")}),u.jsxs("div",{onClick:()=>p(T.id,T.groupId),className:"flex-1 cursor-pointer",children:[u.jsx("p",{className:"text-sm mb-1",dangerouslySetInnerHTML:{__html:T.message}}),u.jsx("p",{className:"text-xs text-gray-500",children:T.timestamp?new Date(T.timestamp.seconds*1e3).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"Unknown"})]}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>w(T.id),className:"text-gray-500 hover:text-gray-700",children:u.jsx(S2,{})}),t===T.id&&u.jsxs("div",{ref:o,className:"absolute right-0 mt-2 w-48 bg-white border rounded shadow-lg z-10",children:[u.jsx("button",{onClick:()=>h(T.id),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Mark as Read"}),u.jsx("button",{onClick:()=>m(T.id),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Delete"})]})]})]},T.id)):u.jsx("p",{className:"text-gray-500",children:"No notifications available."})})]})]})}function X3(){const[s,e]=C.useState(!1),[t,i]=C.useState(""),[o,l]=C.useState(""),[h,p]=C.useState(null),[m,y]=C.useState(""),[x,w]=C.useState(""),[T,S]=C.useState([]),[A,q]=C.useState([]),[N,V]=C.useState([]),[P,k]=C.useState(""),[F,ee]=C.useState(""),[re,L]=C.useState(""),[E,R]=C.useState([{id:Date.now(),value:"",role:""}]),M=jt();C.useEffect(()=>{document.title="Admin | Groups"},[]),C.useEffect(()=>{(async()=>{try{const U=await tt(xe(Z,"users")),ie=await tt(xe(Z,"groups")),pe=U.docs.map(he=>({id:he.id,...he.data()})),fe=ie.docs.map(he=>({id:he.id,...he.data()})),me=new Set;fe.forEach(he=>{he.members.forEach(Ae=>{Ae.role==="Project Manager"&&me.add(Ae.id)})});const Ie=pe.filter(he=>he.status==="approved");S(Ie.filter(he=>he.role==="Portfolio Manager")),q(Ie.filter(he=>he.role==="Incubatee"&&(!me.has(he.id)||he.role!=="Project Manager"))),V(fe.filter(he=>!he.archived).map(he=>({...he,portfolioManagerDetails:pe.find(Ae=>Ae.id===he.portfolioManager)})).sort((he,Ae)=>he.name.toLowerCase().localeCompare(Ae.name.toLowerCase())))}catch(U){console.error("Error fetching users and groups:",U)}})()},[]);const B=ce=>{const U=ce.target.files[0];U&&p(U)},O=async()=>{if(!t.trim())return;if(!m){k("Please assign a Portfolio Manager.");return}if(!E.some(ie=>ie.role==="Project Manager")){ee("You need a Project Manager to create a startup.");return}k(""),ee("");let U="";try{if(h){const Ae=HD(YD,`groupImages/${h.name}`);await BD(Ae,h),U=await qD(Ae),w(U)}const ie=await ht(ge(Z,"users",m)),pe={id:m,...ie.data()},fe=await Promise.all(E.filter(Ae=>Ae.value&&Ae.role).map(async Ae=>{const ot=(await ht(ge(Z,"users",Ae.value))).data();return{id:Ae.value,name:ot.name,lastname:ot.lastname,groupRole:Ae.role}})),me=await Fs(xe(Z,"groups"),{name:t,description:o,imageUrl:U,portfolioManager:pe,members:fe,createdAt:is()});await Fs(xe(Z,"notifications"),{userId:m,message:`<b style="color:green">Youve been assigned</b> as the Portfolio Manager for the Group <b>"${t}"</b>. Get ready to lead and make an impact!`,timestamp:is(),read:!1,groupId:me.id,type:"manager"}),i(""),l(""),p(null),y(""),R([{id:Date.now(),value:"",role:""}]),e(!1);const he=(await tt(xe(Z,"groups"))).docs.map(Ae=>({id:Ae.id,...Ae.data()}));V(he.filter(Ae=>!Ae.archived)),M(`/admin/view-group/${me.id}`)}catch(ie){console.error("Error creating group:",ie),k("An error occurred while creating the group. Please try again.")}},D=()=>{M("/admin-groups/archives")},Ee=N.filter(ce=>{const U=re.toLowerCase(),ie=ce.name.toLowerCase().includes(U)||ce.description.toLowerCase().includes(U),pe=ce.portfolioManagerDetails&&`${ce.portfolioManagerDetails.name} ${ce.portfolioManagerDetails.lastname}`.toLowerCase().includes(U),fe=ce.members&&ce.members.some(me=>`${me.name} ${me.lastname}`.toLowerCase().includes(U));return ie||pe||fe}),be=()=>{R([...E,{id:Date.now(),value:"",role:""}])},X=ce=>{R(E.filter(U=>U.id!==ce))},Y=(ce,U)=>{A.find(pe=>pe.id===U);const ie=N.some(pe=>pe.members.some(fe=>fe.id===U&&fe.groupRole==="Project Manager"));R(E.map(pe=>pe.id===ce?{...pe,value:U,isAlreadyProjectManager:ie}:pe)),ee("")},ne=(ce,U)=>{R(E.map(ie=>ie.id===ce?{...ie,role:U}:ie))};return u.jsxs("div",{className:"flex",children:[u.jsx(Ui,{}),u.jsxs("div",{className:"flex flex-col items-start h-screen w-full overflow-x-auto p-10",children:[u.jsxs("div",{className:"flex flex-row justify-between items-center w-full",children:[u.jsx("h1",{className:"text-4xl font-bold mb-5",children:"Incubatees"}),u.jsxs("div",{className:"flex gap-2 items-center",children:[u.jsx("input",{type:"text",placeholder:"Search a startup...",value:re,onChange:ce=>L(ce.target.value),className:"p-2 border rounded-sm text-sm w-64"}),u.jsxs("button",{onClick:()=>e(!0),className:"bg-primary-color text-white p-2 rounded-sm text-sm hover:bg-opacity-80 transition-all flex items-center justify-center gap-1",children:[u.jsx(E3,{className:"text-xl"}),"Create New StartUp"]}),u.jsx("button",{onClick:D,className:"bg-primary-color text-white p-2 rounded-sm text-sm hover:bg-opacity-80 transition-all flex items-center justify-center",title:"View Archives",children:u.jsx(N2,{className:"text-xl"})})]})]}),u.jsx("div",{className:"mt-5 w-full overflow-y-auto",children:u.jsx("ul",{className:"border",children:Ee.map((ce,U)=>u.jsx("div",{className:`relative ${U%2===0?"bg-white":"bg-gray-100"}`,children:u.jsx(Ft,{to:`/admin/view-group/${ce.id}`,children:u.jsx("li",{className:"p-3 shadow flex justify-between items-center cursor-pointer hover:bg-gray-200 transition",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 font-bold",children:ce.name.charAt(0).toUpperCase()}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-sm font-bold",children:ce.name}),u.jsx("p",{className:"text-xs",children:ce.description})]})]})})})},ce.id))})})]}),s&&u.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white p-6 rounded-sm text-sm shadow-lg transform scale-95 transition-all animate-fade-in w-[500px] h-[550px] overflow-y-auto",children:[u.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Create a StartUp"}),u.jsxs("label",{className:"block mb-3 cursor-pointer text-center border border-gray-400 p-3 rounded-sm",children:[u.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:B}),h?"Image Selected":"Click to upload Image"]}),u.jsx("input",{type:"text",placeholder:"StartUp Name",value:t,onChange:ce=>i(ce.target.value),className:"w-full p-2 border text-sm rounded mb-3"}),u.jsx("textarea",{placeholder:"Short Description",value:o,onChange:ce=>l(ce.target.value),className:"w-full p-2 border rounded mb-4"}),u.jsx("h3",{className:"mb-2",children:"Assign Portfolio Manager"}),u.jsxs("select",{value:m,onChange:ce=>y(ce.target.value),className:"w-full p-2 border rounded mb-4",children:[u.jsx("option",{value:"",children:"Add Manager"}),T.map(ce=>u.jsxs("option",{value:ce.id,children:[ce.name," ",ce.lastname]},ce.id))]}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("h3",{children:"Choose Incubatees"}),E.map(ce=>u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("select",{value:ce.value,onChange:U=>Y(ce.id,U.target.value),className:"w-full p-2 border rounded",children:[u.jsx("option",{value:"",children:"Select Incubatee"}),A.map(U=>u.jsxs("option",{value:U.id,children:[U.name," ",U.lastname]},U.id))]}),u.jsxs("select",{value:ce.role||"",onChange:U=>ne(ce.id,U.target.value),className:"w-full p-2 border rounded",children:[u.jsx("option",{value:"",children:"Select Role"}),u.jsx("option",{value:"Project Manager",disabled:ce.isAlreadyProjectManager,children:"Project Manager"}),u.jsx("option",{value:"System Analyst",children:"System Analyst"}),u.jsx("option",{value:"Developer",children:"Developer"})]}),u.jsx("button",{onClick:()=>X(ce.id),className:"text-red-500 hover:text-red-700",title:"Remove",children:u.jsx(b3,{})})]},ce.id)),u.jsxs("button",{onClick:be,className:"text-primary-color hover:text-primary-color-dark flex items-center gap-1",title:"Add Incubatee",children:[u.jsx(w2,{}),"Add Incubatee"]})]}),P&&u.jsx("p",{className:"text-red-500 text-center mb-4 mt-2",children:P}),F&&u.jsx("p",{className:"text-red-500 text-center mb-4 mt-2",children:F}),u.jsxs("div",{className:"flex justify-between mt-4",children:[u.jsx("button",{onClick:()=>e(!1),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition",children:"Cancel"}),u.jsx("button",{onClick:O,className:"px-4 py-2 bg-primary-color text-white rounded-lg hover:bg-opacity-80 transition",children:"Create Startup"})]})]})})]})}function Z3(s){return We({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15.854 12.854c-0-0-0-0-0-0l-4.854-4.854 4.854-4.854c0-0 0-0 0-0 0.052-0.052 0.090-0.113 0.114-0.178 0.066-0.178 0.028-0.386-0.114-0.529l-2.293-2.293c-0.143-0.143-0.351-0.181-0.529-0.114-0.065 0.024-0.126 0.062-0.178 0.114 0 0-0 0-0 0l-4.854 4.854-4.854-4.854c-0-0-0-0-0-0-0.052-0.052-0.113-0.090-0.178-0.114-0.178-0.066-0.386-0.029-0.529 0.114l-2.293 2.293c-0.143 0.143-0.181 0.351-0.114 0.529 0.024 0.065 0.062 0.126 0.114 0.178 0 0 0 0 0 0l4.854 4.854-4.854 4.854c-0 0-0 0-0 0-0.052 0.052-0.090 0.113-0.114 0.178-0.066 0.178-0.029 0.386 0.114 0.529l2.293 2.293c0.143 0.143 0.351 0.181 0.529 0.114 0.065-0.024 0.126-0.062 0.178-0.114 0-0 0-0 0-0l4.854-4.854 4.854 4.854c0 0 0 0 0 0 0.052 0.052 0.113 0.090 0.178 0.114 0.178 0.066 0.386 0.029 0.529-0.114l2.293-2.293c0.143-0.143 0.181-0.351 0.114-0.529-0.024-0.065-0.062-0.126-0.114-0.178z"},child:[]}]})(s)}function J3({pendingUsers:s,filterUsersByRole:e,handleApproval:t,setUserToReject:i,setIsRejectModalOpen:o}){const l=C.useRef([]),h=e(s).sort((m,y)=>{const x=`${m.name} ${m.lastname}`.toLowerCase(),w=`${y.name} ${y.lastname}`.toLowerCase();return x.localeCompare(w)});C.useEffect(()=>{const m=l.current;s.length>m.length&&s.filter(x=>!m.some(w=>w.id===x.id)).length>0&&(async()=>{try{const w=ge(Z,"notifications_meta","last_pending_notification"),T=await ht(w),S=new Date,A=new Date(S.getTime()-20*60*1e3);if(!T.exists()||T.data().timestamp.toDate()<A){await Kg(w,{timestamp:is()});const q=Ve(xe(Z,"users"),Ye("role","in",["TBI Manager","TBI Assistant"])),N=await tt(q);if(!N.empty){const V=N.docs.map(k=>({id:k.id,...k.data()})),P='<b style="color:violet">New Users:</b> There are new pending users awaiting for their approval.';V.forEach(async k=>{try{await Fs(xe(Z,"notifications"),{userId:k.id,message:P,timestamp:is(),read:!1,type:"new_pending_user"})}catch(F){console.error("Error creating notification:",F)}})}}}catch(w){console.error("Error fetching admin users or creating notifications:",w)}})(),l.current=s},[s]);const p=async m=>{try{await t(m,"approved");const y=Ve(xe(Z,"notifications"),Ye("type","==","new_pending_user"),Ye("userId","==",m));(await tt(y)).forEach(async w=>{try{await rs(ge(Z,"notifications",w.id)),console.log(`Notification for user ${m} removed.`)}catch(T){console.error("Error removing notification:",T)}})}catch(y){console.error("Error approving user:",y)}};return u.jsxs("div",{children:[u.jsx("h2",{className:"text-1xl font-semibold mb-3",children:"Pending Users"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full bg-white text-xs",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-primary-color text-white text-xs",children:[u.jsx("th",{className:"p-2",children:"Name"}),u.jsx("th",{className:"p-2",children:"Email"}),u.jsx("th",{className:"p-2",children:"Role"}),u.jsx("th",{className:"p-2",children:"Time Registered"}),u.jsx("th",{className:"p-2",children:"Actions"})]})}),u.jsx("tbody",{children:h.map((m,y)=>u.jsxs("tr",{className:y%2===0?"bg-white":"bg-gray-100",children:[u.jsxs("td",{className:"p-2",children:[m.name," ",m.lastname]}),u.jsx("td",{className:"p-2",children:m.email}),u.jsx("td",{className:"p-2",children:m.role}),u.jsx("td",{className:"p-2",children:m.timestamp}),u.jsxs("td",{className:"p-2",children:[u.jsx("button",{className:"bg-green-500 text-white px-3 py-1 rounded-sm mr-2 hover:bg-green-600",title:"Approve",onClick:()=>p(m.id),children:u.jsx(y3,{})}),u.jsx("button",{className:"bg-red-500 text-white px-3 py-1 rounded-sm hover:bg-red-600",title:"Reject",onClick:()=>{i(m),o(!0)},children:u.jsx(Z3,{})})]})]},m.id))})]})})]})}const jh=43200,cb=1440,ub=Symbol.for("constructDateFrom");function ay(s,e){return typeof s=="function"?s(e):s&&typeof s=="object"&&ub in s?s[ub](e):s instanceof Date?new s.constructor(e):new Date(e)}function Di(s,e){return ay(s,s)}let e6={};function t6(){return e6}function hb(s){const e=Di(s),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+s-+t}function oy(s,...e){const t=ay.bind(null,s||e.find(i=>typeof i=="object"));return e.map(t)}function Hh(s,e){const t=+Di(s)-+Di(e);return t<0?-1:t>0?1:t}function n6(s){return ay(s,Date.now())}function s6(s,e,t){const[i,o]=oy(t==null?void 0:t.in,s,e),l=i.getFullYear()-o.getFullYear(),h=i.getMonth()-o.getMonth();return l*12+h}function r6(s){return e=>{const i=(s?Math[s]:Math.trunc)(e);return i===0?0:i}}function i6(s,e){return+Di(s)-+Di(e)}function a6(s,e){const t=Di(s);return t.setHours(23,59,59,999),t}function o6(s,e){const t=Di(s),i=t.getMonth();return t.setFullYear(t.getFullYear(),i+1,0),t.setHours(23,59,59,999),t}function l6(s,e){const t=Di(s);return+a6(t)==+o6(t)}function c6(s,e,t){const[i,o,l]=oy(t==null?void 0:t.in,s,s,e),h=Hh(o,l),p=Math.abs(s6(o,l));if(p<1)return 0;o.getMonth()===1&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-h*p);let m=Hh(o,l)===-h;l6(i)&&p===1&&Hh(i,l)===1&&(m=!1);const y=h*(p-+m);return y===0?0:y}function u6(s,e,t){const i=i6(s,e)/1e3;return r6(t==null?void 0:t.roundingMethod)(i)}const h6={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},d6=(s,e,t)=>{let i;const o=h6[s];return typeof o=="string"?i=o:e===1?i=o.one:i=o.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function op(s){return(e={})=>{const t=e.width?String(e.width):s.defaultWidth;return s.formats[t]||s.formats[s.defaultWidth]}}const f6={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},m6={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},p6={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},g6={date:op({formats:f6,defaultWidth:"full"}),time:op({formats:m6,defaultWidth:"full"}),dateTime:op({formats:p6,defaultWidth:"full"})},y6={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},v6=(s,e,t,i)=>y6[s];function lc(s){return(e,t)=>{const i=t!=null&&t.context?String(t.context):"standalone";let o;if(i==="formatting"&&s.formattingValues){const h=s.defaultFormattingWidth||s.defaultWidth,p=t!=null&&t.width?String(t.width):h;o=s.formattingValues[p]||s.formattingValues[h]}else{const h=s.defaultWidth,p=t!=null&&t.width?String(t.width):s.defaultWidth;o=s.values[p]||s.values[h]}const l=s.argumentCallback?s.argumentCallback(e):e;return o[l]}}const x6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},_6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},b6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},w6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},E6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},T6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},N6=(s,e)=>{const t=Number(s),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},S6={ordinalNumber:N6,era:lc({values:x6,defaultWidth:"wide"}),quarter:lc({values:_6,defaultWidth:"wide",argumentCallback:s=>s-1}),month:lc({values:b6,defaultWidth:"wide"}),day:lc({values:w6,defaultWidth:"wide"}),dayPeriod:lc({values:E6,defaultWidth:"wide",formattingValues:T6,defaultFormattingWidth:"wide"})};function cc(s){return(e,t={})=>{const i=t.width,o=i&&s.matchPatterns[i]||s.matchPatterns[s.defaultMatchWidth],l=e.match(o);if(!l)return null;const h=l[0],p=i&&s.parsePatterns[i]||s.parsePatterns[s.defaultParseWidth],m=Array.isArray(p)?R6(p,w=>w.test(h)):A6(p,w=>w.test(h));let y;y=s.valueCallback?s.valueCallback(m):m,y=t.valueCallback?t.valueCallback(y):y;const x=e.slice(h.length);return{value:y,rest:x}}}function A6(s,e){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&e(s[t]))return t}function R6(s,e){for(let t=0;t<s.length;t++)if(e(s[t]))return t}function C6(s){return(e,t={})=>{const i=e.match(s.matchPattern);if(!i)return null;const o=i[0],l=e.match(s.parsePattern);if(!l)return null;let h=s.valueCallback?s.valueCallback(l[0]):l[0];h=t.valueCallback?t.valueCallback(h):h;const p=e.slice(o.length);return{value:h,rest:p}}}const j6=/^(\d+)(th|st|nd|rd)?/i,I6=/\d+/i,D6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},M6={any:[/^b/i,/^(a|c)/i]},O6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},k6={any:[/1/i,/2/i,/3/i,/4/i]},P6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},L6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},U6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},V6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},z6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},B6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},q6={ordinalNumber:C6({matchPattern:j6,parsePattern:I6,valueCallback:s=>parseInt(s,10)}),era:cc({matchPatterns:D6,defaultMatchWidth:"wide",parsePatterns:M6,defaultParseWidth:"any"}),quarter:cc({matchPatterns:O6,defaultMatchWidth:"wide",parsePatterns:k6,defaultParseWidth:"any",valueCallback:s=>s+1}),month:cc({matchPatterns:P6,defaultMatchWidth:"wide",parsePatterns:L6,defaultParseWidth:"any"}),day:cc({matchPatterns:U6,defaultMatchWidth:"wide",parsePatterns:V6,defaultParseWidth:"any"}),dayPeriod:cc({matchPatterns:z6,defaultMatchWidth:"any",parsePatterns:B6,defaultParseWidth:"any"})},H6={code:"en-US",formatDistance:d6,formatLong:g6,formatRelative:v6,localize:S6,match:q6,options:{weekStartsOn:0,firstWeekContainsDate:1}};function F6(s,e,t){const i=t6(),o=(t==null?void 0:t.locale)??i.locale??H6,l=2520,h=Hh(s,e);if(isNaN(h))throw new RangeError("Invalid time value");const p=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:h}),[m,y]=oy(t==null?void 0:t.in,...h>0?[e,s]:[s,e]),x=u6(y,m),w=(hb(y)-hb(m))/1e3,T=Math.round((x-w)/60);let S;if(T<2)return t!=null&&t.includeSeconds?x<5?o.formatDistance("lessThanXSeconds",5,p):x<10?o.formatDistance("lessThanXSeconds",10,p):x<20?o.formatDistance("lessThanXSeconds",20,p):x<40?o.formatDistance("halfAMinute",0,p):x<60?o.formatDistance("lessThanXMinutes",1,p):o.formatDistance("xMinutes",1,p):T===0?o.formatDistance("lessThanXMinutes",1,p):o.formatDistance("xMinutes",T,p);if(T<45)return o.formatDistance("xMinutes",T,p);if(T<90)return o.formatDistance("aboutXHours",1,p);if(T<cb){const A=Math.round(T/60);return o.formatDistance("aboutXHours",A,p)}else{if(T<l)return o.formatDistance("xDays",1,p);if(T<jh){const A=Math.round(T/cb);return o.formatDistance("xDays",A,p)}else if(T<jh*2)return S=Math.round(T/jh),o.formatDistance("aboutXMonths",S,p)}if(S=c6(y,m),S<12){const A=Math.round(T/jh);return o.formatDistance("xMonths",A,p)}else{const A=S%12,q=Math.trunc(S/12);return A<3?o.formatDistance("aboutXYears",q,p):A<9?o.formatDistance("overXYears",q,p):o.formatDistance("almostXYears",q+1,p)}}function G6(s,e){return F6(s,n6(s),e)}function $6({approvedUsers:s,setUserToRemove:e,setIsModalOpen:t}){const[i,o]=C.useState(null),[l,h]=C.useState(!1),[p,m]=C.useState(""),y=s.sort((w,T)=>{const S=`${w.name} ${w.lastname}`.toLowerCase(),A=`${T.name} ${T.lastname}`.toLowerCase();return S.localeCompare(A)}),x=async w=>{if(o(w),h(!0),w.groupId)try{const T=await ht(ge(Z,"groups",w.groupId));T.exists()?m(T.data().name):m("N/A")}catch(T){console.error("Error fetching group name:",T),m("N/A")}else m("N/A")};return u.jsxs("div",{children:[u.jsx("h2",{className:"text-1xl font-semibold mb-3",children:"Approved Users"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full bg-white text-xs",children:[u.jsx("thead",{className:"sticky top-0",children:u.jsxs("tr",{className:"bg-primary-color text-white text-xs",children:[u.jsx("th",{className:"p-2",children:"Name"}),u.jsx("th",{className:"p-2",children:"Email"}),u.jsx("th",{className:"p-2",children:"Role"}),u.jsx("th",{className:"p-2",children:"Time Registered"}),u.jsx("th",{className:"p-2",children:"Last Online"}),u.jsx("th",{className:"p-2",children:"Actions"})]})}),u.jsx("tbody",{children:y.map((w,T)=>u.jsxs("tr",{className:T%2===0?"bg-white":"bg-gray-100",children:[u.jsxs("td",{className:"text-left p-2",children:[w.name," ",w.lastname]}),u.jsx("td",{className:"p-2",children:w.email}),u.jsx("td",{className:"p-2",children:w.role}),u.jsx("td",{className:"p-2",children:w.timestamp}),u.jsx("td",{className:"p-2",children:w.lastOnline?`${G6(new Date(w.lastOnline.seconds*1e3),{addSuffix:!0})}`:"N/A"}),u.jsxs("td",{className:"p-2 flex justify-center gap-2",children:[u.jsxs("button",{className:"bg-blue-500 text-white px-3 py-1 rounded-sm hover:bg-blue-600 flex items-center justify-center gap-1 text-center",onClick:()=>x(w),children:[u.jsx(_3,{}),"Info"]}),u.jsxs("button",{className:"bg-red-500 text-white px-3 py-1 rounded-sm hover:bg-red-600 flex items-center justify-center gap-1 text-center",onClick:()=>{e(w),t(!0)},children:[u.jsx(Q3,{}),"Remove"]})]})]},w.id))})]})}),l&&i&&u.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-[400px]",children:[u.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"User Information"}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Name:"})," ",i.name," ",i.lastname]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Email:"})," ",i.email]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Group:"})," ",p]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Mobile Number:"})," ",i.mobile||"N/A"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Facebook:"})," ",i.facebook?u.jsx("a",{href:i.facebook,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"Facebook_Link"}):"N/A"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"GitHub:"})," ",i.github?u.jsx("a",{href:i.github,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"Github_Link"}):"N/A"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"LinkedIn:"})," ",i.linkedin?u.jsx("a",{href:i.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"LinkedIn_Link"}):"N/A"]})]}),u.jsx("div",{className:"flex justify-center gap-2",children:u.jsx("button",{className:"px-4 py-2 bg-gray-500 text-white text-sm rounded-sm hover:bg-gray-600 transition",onClick:()=>h(!1),children:"Close"})})]})})]})}function K6(){const[s,e]=C.useState([]),[t,i]=C.useState([]),[o,l]=C.useState("pending"),[h,p]=C.useState("All"),[m,y]=C.useState(""),[x,w]=C.useState(!1),[T,S]=C.useState(!1),[A,q]=C.useState(null),[N,V]=C.useState(null),[P,k]=C.useState(""),[F,ee]=C.useState(""),[re,L]=C.useState(""),[E,R]=C.useState("");C.useEffect(()=>{document.title="Admin | Account Approval"},[]),C.useEffect(()=>{const X=pt(xe(Z,"users"),Y=>{const ne=Y.docs.map(ce=>{var U;return{id:ce.id,...ce.data(),timestamp:((U=ce.data().timestamp)==null?void 0:U.toDate().toLocaleString("en-US",{month:"long",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}))||"N/A"}});e(ne.filter(ce=>ce.status==="pending")),i(ne.filter(ce=>ce.status==="approved"))});return()=>X()},[]);const M=async(X,Y)=>{if(await ft(ge(Z,"users",X),{status:Y}),e(s.filter(ne=>ne.id!==X)),Y==="approved"){const ne=s.find(ce=>ce.id===X);i([...t,{...ne,status:"approved"}])}},B=async()=>{A&&(await rs(ge(Z,"users",A.id)),i(t.filter(X=>X.id!==A.id)),w(!1),q(null),k(""),L(""))},O=async()=>{N&&(await rs(ge(Z,"users",N.id)),e(s.filter(X=>X.id!==N.id)),S(!1),V(null),ee(""),R(""))},D=X=>{p(X.target.value)},Ee=X=>{y(X.target.value)},be=X=>{let Y=X;return h!=="All"&&(Y=Y.filter(ne=>ne.role===h)),m&&(Y=Y.filter(ne=>ne.name.toLowerCase().includes(m.toLowerCase())||ne.email.toLowerCase().includes(m.toLowerCase()))),Y};return u.jsxs("div",{className:"flex",children:[u.jsx(Ui,{}),u.jsxs("div",{className:"w-full p-10 h-screen overflow-y-auto",children:[u.jsx("h1",{className:"text-3xl font-bold mb-5",children:"User Management"}),u.jsxs("div",{className:"flex mb-3 text-xs",children:[u.jsx("button",{className:`px-6 py-2 ${o==="pending"?"bg-primary-color text-white":"bg-white text-primary-color border border-primary-color"}`,onClick:()=>l("pending"),children:"Pending Users"}),u.jsx("button",{className:`px-6 py-2 ${o==="approved"?"bg-primary-color text-white":"bg-white text-primary-color border border-primary-color"}`,onClick:()=>l("approved"),children:"Approved Users Lists"})]}),u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"roleFilter",className:"mr-2 text-sm",children:"Filter by Role:"}),u.jsxs("select",{id:"roleFilter",value:h,onChange:D,className:"p-2 border rounded-sm text-sm",children:[u.jsx("option",{value:"All",children:"All"}),u.jsx("option",{value:"TBI Manager",children:"TBI Manager"}),u.jsx("option",{value:"TBI Assistant",children:"TBI Assistant"}),u.jsx("option",{value:"Portfolio Manager",children:"Portfolio Manager"}),u.jsx("option",{value:"Project Manager",children:"Project Manager"}),u.jsx("option",{value:"System Analyst",children:"System Analyst"}),u.jsx("option",{value:"Developer",children:"Developer"})]})]}),u.jsx("div",{children:u.jsx("input",{type:"text",value:m,onChange:Ee,placeholder:"Search by name or email",className:"p-2 border rounded-sm text-sm"})})]}),o==="pending"&&u.jsx(J3,{pendingUsers:be(s),filterUsersByRole:be,handleApproval:M,setUserToReject:V,setIsRejectModalOpen:S}),o==="approved"&&u.jsx($6,{approvedUsers:be(t),filterUsersByRole:be,setUserToRemove:q,setIsModalOpen:w})]}),x&&u.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-[400px]",children:[u.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Confirm Removal"}),u.jsxs("p",{className:"mb-4 text-center",children:["Are you sure you want to remove ",A==null?void 0:A.name," ",A==null?void 0:A.lastname,"?"]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Reason for removal:"}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"radio",name:"removalReason",value:"Inappropriate behavior",checked:P==="Inappropriate behavior",onChange:X=>k(X.target.value),className:"mr-2"}),"Inappropriate behavior"]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"radio",name:"removalReason",value:"Violation of terms",checked:P==="Violation of terms",onChange:X=>k(X.target.value),className:"mr-2"}),"Violation of terms"]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"radio",name:"removalReason",value:"Other",checked:P==="Other",onChange:X=>k(X.target.value),className:"mr-2"}),"Other"]}),P==="Other"&&u.jsx("input",{type:"text",placeholder:"Please specify",value:re,onChange:X=>L(X.target.value),className:"mt-2 p-2 border rounded-sm text-sm"})]})]}),u.jsxs("div",{className:"flex justify-center gap-2",children:[u.jsx("button",{className:"px-4 py-2 bg-gray-500 text-white text-sm rounded-sm hover:bg-gray-600 transition",onClick:()=>w(!1),children:"Cancel"}),u.jsx("button",{className:"px-4 py-2 bg-red-500 text-white text-sm rounded-sm hover:bg-red-600 transition",onClick:B,disabled:!P||P==="Other"&&!re,children:"Remove"})]})]})}),T&&u.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-[400px]",children:[u.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Confirm Rejection"}),u.jsxs("p",{className:"mb-4 text-center",children:["Are you sure you want to reject ",N==null?void 0:N.name," ",N==null?void 0:N.lastname,"?"]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Reason for rejection:"}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"radio",name:"rejectReason",value:"Incomplete information",checked:F==="Incomplete information",onChange:X=>ee(X.target.value),className:"mr-2"}),"Incomplete information"]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"radio",name:"rejectReason",value:"Not qualified",checked:F==="Not qualified",onChange:X=>ee(X.target.value),className:"mr-2"}),"Not qualified"]}),u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"radio",name:"rejectReason",value:"Other",checked:F==="Other",onChange:X=>ee(X.target.value),className:"mr-2"}),"Other"]}),F==="Other"&&u.jsx("input",{type:"text",placeholder:"Please specify",value:E,onChange:X=>R(X.target.value),className:"p-2 border rounded-sm text-sm"})]})]}),u.jsxs("div",{className:"flex justify-center gap-2",children:[u.jsx("button",{className:"px-4 py-2 bg-gray-500 text-white text-sm rounded-sm hover:bg-gray-600 transition",onClick:()=>S(!1),children:"Cancel"}),u.jsx("button",{className:"px-4 py-2 bg-red-500 text-white text-sm rounded-sm hover:bg-red-600 transition",onClick:O,disabled:!F||F==="Other"&&!E,children:"Reject"})]})]})})]})}function Q6({isOpen:s,onClose:e,group:t,onSave:i}){const[o,l]=C.useState(t.name),[h,p]=C.useState(t.description),[m,y]=C.useState(t.members||[]),[x,w]=C.useState([]),[T,S]=C.useState(""),[A,q]=C.useState(""),[N,V]=C.useState(!1),[P,k]=C.useState(!1),F=jt();C.useEffect(()=>{(async()=>{try{const B=xe(Z,"users"),Ee=(await tt(B)).docs.map(be=>({id:be.id,...be.data()})).filter(be=>!m.some(X=>X.id===be.id)&&!["Portfolio Manager","TBI Manager","TBI Assistant"].includes(be.role));w(Ee)}catch(B){console.error("Error fetching users:",B)}})()},[m]);const ee=async()=>{const M=ge(Z,"groups",t.id);await ft(M,{name:o,description:h,members:m}),i({name:o,description:h,members:m}),e()},re=async M=>{const B=m.filter(O=>O.id!==M);y(B);try{const O=ge(Z,"users",M);await ft(O,{groupId:null,role:"Incubatee"}),console.log(`User ${M} removed from group and role reset to "Incubatee".`)}catch(O){console.error("Error resetting user role in Firestore:",O)}},L=()=>{if(T&&A){const M=x.find(O=>O.id===T),B=[...m,{id:M.id,name:M.name,lastname:M.lastname,groupRole:A}];y(B),S(""),q("")}else console.error("Please select both a user and a role.")},E=async()=>{try{const M=ge(Z,"groups",t.id);await rs(M),F("/admin-groups")}catch(M){console.error("Error deleting group:",M)}finally{e()}},R=async()=>{try{const M=ge(Z,"groups",t.id);await ft(M,{archived:!0}),F("/admin-groups/archives")}catch(M){console.error("Error archiving group:",M)}finally{e()}};return s?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:u.jsxs("div",{className:"bg-white p-6 rounded-sm shadow-lg w-2/6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h2",{className:"text-lg font-bold",children:"Edit StartUp"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:R,className:"text-yellow-500 bg-gray-100 p-2 rounded-sm hover:bg-yellow-500 hover:text-white transition duration-300",title:"Archive Group",children:u.jsx(l3,{size:20})}),u.jsx("button",{onClick:()=>V(!0),className:"text-red-500 bg-gray-100 p-2 rounded-sm hover:bg-red-500 hover:text-white transition duration-300",title:"Delete StartUp",children:u.jsx(i3,{size:20})})]})]}),u.jsxs("div",{className:"mb-1",children:[u.jsx("label",{className:"text-sm",children:"StartUp Name"}),u.jsx("input",{type:"text",value:o,onChange:M=>l(M.target.value),className:"w-full text-sm border border-gray-300 rounded-sm p-2"})]}),u.jsxs("div",{className:"",children:[u.jsx("label",{className:"text-sm mb-1",children:"Description"}),u.jsx("textarea",{value:h,onChange:M=>p(M.target.value),className:"w-full text-sm border border-gray-300 rounded-sm p-2",rows:"4"})]}),u.jsxs("div",{className:"mb-2 p-2",children:[u.jsx("h3",{className:"text-sm font-medium mb-2 border-b text-center p-2",children:"Members"}),u.jsxs("div",{className:"flex gap-2 mb-1 flex-wrap",children:[u.jsxs("select",{value:T,onChange:M=>S(M.target.value),className:"flex-1 border border-gray-300 rounded-sm p-2 text-sm",children:[u.jsx("option",{value:"",children:"Add additional member"}),x.map(M=>u.jsxs("option",{value:M.id,children:[M.name," ",M.lastname]},M.id))]}),u.jsxs("select",{value:A,onChange:M=>q(M.target.value),className:"flex-1 border border-gray-300 rounded-sm p-2 text-sm",children:[u.jsx("option",{value:"",children:"Select Role"}),u.jsx("option",{value:"Project Manager",children:"Project Manager"}),u.jsx("option",{value:"System Analyst",children:"System Analyst"}),u.jsx("option",{value:"Developer",children:"Developer"})]}),u.jsx("button",{onClick:L,className:"bg-primary-color text-white text-xs px-4 py-2 rounded-sm hover:bg-opacity-80 flex-1",children:"Add"})]}),u.jsx("ul",{className:"mb-2",children:m.map(M=>u.jsxs("li",{className:"flex justify-between items-center p-1 hover:bg-gray-100 text-sm",children:[u.jsxs("span",{children:[M.name," ",M.lastname," - ",M.groupRole]}),u.jsx("button",{onClick:()=>re(M.id),className:"text-red-500 text-xs hover:underline",children:"Remove"})]},M.id))})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:e,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-sm hover:bg-gray-400 text-xs",children:"Cancel"}),u.jsx("button",{onClick:ee,className:"bg-primary-color text-white px-4 py-2 rounded-sm hover:bg-opacity-80 text-xs",children:"Save"})]})]})}),N&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:u.jsxs("div",{className:"bg-white p-6 rounded-sm shadow-lg w-1/4",children:[u.jsx("h2",{className:"text-lg font-bold mb-4 text-center text-red-500",children:"Confirm Deletion"}),u.jsx("p",{className:"text-sm mb-4",children:"Are you sure you want to delete this group? This action cannot be undone."}),u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx("input",{type:"checkbox",id:"confirmDelete",checked:P,onChange:M=>k(M.target.checked),className:"mr-2"}),u.jsx("label",{htmlFor:"confirmDelete",className:"text-sm",children:"I understand the consequences of this action."})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:()=>V(!1),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-sm hover:bg-gray-400 text-xs",children:"Cancel"}),u.jsx("button",{onClick:E,disabled:!P,className:`px-4 py-2 rounded-sm text-xs ${P?"bg-red-500 text-white hover:bg-red-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Confirm"})]})]})})]}):null}function Y6(){const{groupId:s}=Bp(),[e,t]=C.useState(null),[i,o]=C.useState([]),[l,h]=C.useState([]),[p,m]=C.useState(!0),[y,x]=C.useState(!1),[w,T]=C.useState(null),[S,A]=C.useState(!1);C.useEffect(()=>{const V=(()=>{const P=ge(Z,"groups",s);return pt(P,async F=>{if(F.exists()){const ee=F.data(),re=await Promise.all(ee.members.map(async L=>{const E=ge(Z,"users",L.id),R=await ht(E);return R.exists()?{...R.data(),id:L.id,groupRole:L.groupRole}:L}));if(t({id:F.id,...ee,members:re}),ee.portfolioManager){const L=ge(Z,"users",ee.portfolioManager.id),E=await ht(L);E.exists()&&T(E.data())}}})})();return()=>{V()}},[s]),C.useEffect(()=>{const N=()=>{const F=Ve(xe(Z,"requests"),Ye("groupId","==",s));return pt(F,re=>{o(re.docs.map(L=>({id:L.id,...L.data()})))})},V=()=>{const F=Ve(xe(Z,"workplan"),Ye("groupId","==",s));return pt(F,re=>{h(re.docs.map(L=>({id:L.id,...L.data()})))})},P=N(),k=V();return()=>{P(),k()}},[s]);const q=async N=>{const V=ge(Z,"groups",s);await ft(V,N)};return e?u.jsxs("div",{className:"flex",children:[u.jsx(Ui,{}),u.jsxs("div",{className:"flex flex-col items-start h-screen w-full p-10 overflow-y-auto",children:[u.jsxs("div",{className:"flex justify-between w-full",children:[u.jsx("h1",{className:"text-4xl font-bold mb-2",children:e.name}),u.jsx("div",{children:u.jsxs("button",{onClick:()=>A(!0),className:"bg-primary-color text-white p-2 rounded-sm text-sm hover:bg-opacity-80 transition mr-2 flex flex-row items-center gap-2",children:[u.jsx(v2,{className:"text-sm"}),"Edit Group"]})})]}),u.jsx("p",{className:"text-sm italic",children:e.description}),e.imageUrl&&u.jsx("img",{src:e.imageUrl,alt:e.name,className:"mt-2 w-full h-40 object-cover rounded-lg"}),u.jsxs("div",{className:"mt-2 flex flex-col justify-between items-start w-full gap-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-sm",children:"Members:"}),u.jsx("ul",{className:"text-sm",children:e.members.map(N=>u.jsxs("li",{children:[N.name," ",N.lastname," - ",N.groupRole]},N.id))}),w&&u.jsxs("div",{className:"mt-2",children:[u.jsx("h3",{className:"font-bold text-sm",children:"Portfolio Manager:"}),u.jsxs("p",{className:"text-sm",children:[w.name," ",w.lastname]})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"bg-blue-500 text-white text-center p-2 rounded-sm shadow-md",children:[u.jsx("h3",{className:"text-xs",children:"No. of Tasks"}),u.jsx("p",{className:"text-md font-semibold mt-1",children:l.length})]}),u.jsxs("div",{className:"bg-yellow-500 text-white text-center p-2 rounded-sm shadow-md",children:[u.jsx("h3",{className:"text-xs",children:"Pending Tasks"}),u.jsx("p",{className:"text-md font-semibold mt-1",children:l.filter(N=>N.status==="Pending").length})]}),u.jsxs("div",{className:"bg-green-500 text-white text-center p-2 rounded-sm shadow-md",children:[u.jsx("h3",{className:"text-xs",children:"Completed Tasks"}),u.jsx("p",{className:"text-md font-semibold mt-1",children:l.filter(N=>N.status==="Completed").length})]}),u.jsxs("div",{className:`text-white text-center p-2 rounded-sm shadow-md ${l.length>0?Math.round(l.filter(N=>N.status==="Completed").length/l.length*100)>=75?"bg-green-500":Math.round(l.filter(N=>N.status==="Completed").length/l.length*100)>=50?"bg-yellow-500":"bg-red-500":"bg-gray-500"}`,children:[u.jsx("h3",{className:"text-xs",children:"Total Progress Completion"}),u.jsx("p",{className:"text-md font-semibold mt-1",children:l.length>0?`${Math.round(l.filter(N=>N.status==="Completed").length/l.length*100)}%`:"0%"})]})]})]}),u.jsxs("div",{className:"flex mt-4",children:[u.jsx("button",{onClick:()=>{m(!0),x(!1)},className:`${p?"bg-primary-color text-white":"bg-white border border-primary-color"} text-primary-color px-4 py-2 text-xs hover:bg-opacity-80 transition`,children:"Group Requests"}),u.jsx("button",{onClick:()=>{x(!0),m(!1)},className:`${y?"bg-primary-color text-white":"bg-white border border-primary-color"} text-primary-color px-4 py-2 text-xs hover:bg-opacity-80 transition`,children:"Workplan"})]}),p&&u.jsxs("div",{className:"mt-3 w-full",children:[u.jsx("p",{className:"font-bold mb-2",children:"Requested Needs"}),u.jsxs("table",{className:"w-full bg-white border-gray-200 text-xs text-left",children:[u.jsx("thead",{className:"sticky top-0 bg-primary-color text-white",children:u.jsxs("tr",{children:[u.jsx("th",{className:"py-2 px-4",children:"Responsible Team Member"}),u.jsx("th",{className:"py-2 px-4",children:"Request Type"}),u.jsx("th",{className:"py-2 px-4",children:"Description"}),u.jsx("th",{className:"py-2 px-4",children:"Date Entry"}),u.jsx("th",{className:"py-2 px-4",children:"Date Needed"}),u.jsx("th",{className:"py-2 px-4",children:"Specific Needs"}),u.jsx("th",{className:"py-2 px-4",children:"Prospect Resource Person"}),u.jsx("th",{className:"py-2 px-4",children:"Priority Level"}),u.jsx("th",{className:"py-2 px-4",children:"Remarks"}),u.jsx("th",{className:"py-2 px-4",children:"Status"})]})}),u.jsx("tbody",{children:i.length>0?[...i].sort((N,V)=>{const P={HIGH:1,MEDIUM:2,LOW:3};return N.status==="Done"&&V.status!=="Done"?1:N.status!=="Done"&&V.status==="Done"?-1:P[N.priorityLevel]!==P[V.priorityLevel]?P[N.priorityLevel]-P[V.priorityLevel]:new Date(N.dateEntry)-new Date(V.dateEntry)}).map((N,V)=>u.jsxs("tr",{className:`${N.status==="Done"?"bg-gray-200 opacity-70":V%2===0?"bg-white":"bg-gray-100"}`,children:[u.jsx("td",{className:"py-2 px-4",children:N.responsibleTeamMember}),u.jsx("td",{className:"py-2 px-4",children:N.requestType}),u.jsx("td",{className:"py-2 px-4",children:N.description}),u.jsx("td",{className:"py-2 px-4",children:N.dateEntry?new Date(N.dateEntry.seconds*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}),u.jsx("td",{className:"py-2 px-4",children:N.dateNeeded?new Date(N.dateNeeded).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}),u.jsx("td",{className:"py-2 px-4",children:N.resourceToolNeeded}),u.jsx("td",{className:"py-2 px-4",children:N.prospectResourcePerson}),u.jsx("td",{className:`py-2 px-4 font-bold ${N.priorityLevel==="HIGH"?"text-red-500":N.priorityLevel==="MEDIUM"?"text-yellow-500":"text-green-500"}`,children:N.priorityLevel}),u.jsx("td",{className:"py-2 px-4",children:N.remarks||"N/A"}),u.jsx("td",{className:`py-2 px-4 font-semibold ${N.status==="Pending"?"text-red-500":N.status==="In Progress"?"text-yellow-500":N.status==="Done"?"text-green-500":"text-gray-500"}`,children:N.status})]},N.id)):u.jsx("tr",{children:u.jsx("td",{className:"py-2 px-4 text-center",colSpan:"10",children:"No requests found."})})})]})]}),y&&u.jsxs("div",{className:"mt-3 w-full",children:[u.jsx("p",{className:"font-bold mb-2",children:"Project Workplan"}),u.jsxs("table",{className:"w-full bg-white border-gray-200 text-xs text-left",children:[u.jsx("thead",{className:"sticky top-0 bg-primary-color text-white",children:u.jsxs("tr",{children:[u.jsx("th",{className:"py-2 px-4 text-left",children:"Task Name"}),u.jsx("th",{className:"py-2 px-4",children:"Assigned To"}),u.jsx("th",{className:"py-2 px-4",children:"Start Date"}),u.jsx("th",{className:"py-2 px-4",children:"End Date"}),u.jsx("th",{className:"py-2 px-4",children:"Priority Level"})," ",u.jsx("th",{className:"py-2 px-4",children:"Status"})]})}),u.jsx("tbody",{children:l.length>0?l.slice().sort((N,V)=>{const P={High:1,Medium:2,Low:3};return N.status==="Completed"&&V.status!=="Completed"?1:N.status!=="Completed"&&V.status==="Completed"?-1:P[N.priorityLevel]!==P[V.priorityLevel]?P[N.priorityLevel]-P[V.priorityLevel]:new Date(N.startDate)-new Date(V.startDate)}).map((N,V)=>u.jsxs("tr",{className:`${N.status==="Completed"?"bg-gray-200 opacity-70":V%2===0?"bg-white":"bg-gray-100"}`,children:[u.jsx("td",{className:"p-2 text-left",children:N.taskName}),u.jsx("td",{className:"p-2",children:N.assignedTo}),u.jsx("td",{className:"p-2",children:N.startDate?new Date(N.startDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}),u.jsx("td",{className:"p-2",children:N.endDate?new Date(N.endDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}),u.jsx("td",{className:`p-2 font-bold ${N.priorityLevel==="High"?"text-red-500":N.priorityLevel==="Medium"?"text-yellow-500":"text-green-500"}`,children:N.priorityLevel}),u.jsx("td",{className:`p-2 font-semibold ${N.status==="Pending"?"text-red-500":N.status==="In Progress"?"text-yellow-500":N.status==="Completed"?"text-green-500":"text-gray-500"}`,children:N.status})]},N.id)):u.jsx("tr",{children:u.jsx("td",{className:"py-2 px-4 text-center",colSpan:"6",children:"No tasks found."})})})]})]})]}),u.jsx(Q6,{isOpen:S,onClose:()=>A(!1),group:e,onSave:q})]}):u.jsx("div",{children:"Loading..."})}function W6(){return C.useEffect(()=>{document.title="Admin | Chats"},[]),u.jsxs("div",{className:"flex",children:[u.jsx(Ui,{}),u.jsx("div",{className:"flex flex-col items-center justify-center h-screen w-full",children:u.jsx("h1",{className:"text-4xl font-bold",children:"Admin Edit Profile"})})]})}function X6(){const[s,e]=C.useState([]),[t,i]=C.useState([]),[o,l]=C.useState(""),[h,p]=C.useState(""),m=jt();C.useEffect(()=>{document.title="Admin | Archives",(async()=>{try{const q=Ve(xe(Z,"groups"),Ye("archived","==",!0)),V=(await tt(q)).docs.map(P=>({id:P.id,...P.data()}));e(V),i(V)}catch(q){console.error("Error fetching archived groups:",q)}})()},[]),C.useEffect(()=>{x()},[o,h,s]);const y=async A=>{try{await ft(ge(Z,"groups",A),{archived:!1}),e(s.filter(q=>q.id!==A)),alert("Group unarchived successfully!")}catch(q){console.error("Error unarchiving group:",q),alert("Error unarchiving group. Please try again.")}},x=()=>{let A=s;o&&(A=A.filter(q=>{var N;return q.name.toLowerCase().includes(o.toLowerCase())||((N=q.description)==null?void 0:N.toLowerCase().includes(o.toLowerCase()))})),h&&(A=A.filter(q=>{var V;const N=(V=q.createdAt)==null?void 0:V.toDate();return N&&N.getFullYear().toString()===h})),i(A)},w=A=>{l(A.target.value)},T=A=>{p(A.target.value)},S=()=>{const A=new Set;return s.forEach(q=>{var V;const N=(V=q.createdAt)==null?void 0:V.toDate();N&&A.add(N.getFullYear().toString())}),Array.from(A).sort((q,N)=>N-q)};return u.jsxs("div",{className:"flex",children:[u.jsx(Ui,{}),u.jsxs("div",{className:"flex flex-col items-start justify-start h-screen w-full p-10",children:[u.jsxs("div",{className:"flex justify-between items-center w-full mb-5",children:[u.jsxs("h1",{className:"text-4xl",children:[u.jsx("button",{onClick:()=>m(-2),className:"text-black hover:text-primary-color transition",children:"Incubatees"})," ","> ",u.jsx("b",{children:"Archived Groups"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("select",{value:h,onChange:T,className:"p-2 border rounded text-sm",children:[u.jsx("option",{value:"",children:"All Years"}),S().map(A=>u.jsx("option",{value:A,children:A},A))]}),u.jsx("input",{type:"text",value:o,onChange:w,placeholder:"Search Groups",className:"p-2 border rounded text-sm"})]})]}),u.jsx("div",{className:"mt-5 w-full overflow-y-auto",children:u.jsxs("div",{className:"border-r-2 border-l-2",children:[" ",u.jsx("ul",{children:t.map((A,q)=>u.jsxs("li",{className:`p-4 flex items-center gap-4 cursor-pointer hover:bg-gray-100 transition ${q%2===0?"bg-white":"bg-gray-50"}`,children:[u.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-md flex items-center justify-center overflow-hidden",children:A.imageUrl?u.jsx("img",{src:A.imageUrl,alt:A.name,className:"w-full h-full object-cover"}):u.jsx("span",{className:"text-gray-500 text-xs text-center",children:"No Image"})}),u.jsx(Ft,{to:`/admin/view-group/${A.id}`,className:"flex-1",children:u.jsxs("div",{children:[u.jsx("h2",{className:"text-sm font-bold",children:A.name}),u.jsx("p",{className:"text-xs",children:A.description})]})}),u.jsx("button",{onClick:()=>y(A.id),className:"p-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition",title:"Unarchive Group",children:u.jsx(N2,{})})]},A.id))})]})})]})]})}function Z6(){return u.jsxs(JT,{children:[u.jsx(st,{path:"/",element:u.jsx(s3,{})}),u.jsx(st,{path:"/password-reset",element:u.jsx(u3,{})}),u.jsx(st,{path:"/create-account",element:u.jsx(d3,{})}),u.jsx(st,{path:"/waiting-for-approval",element:u.jsx(f3,{})}),u.jsx(st,{path:"/incubatee-login",element:u.jsx(p3,{})}),u.jsx(st,{path:"/incubatee-create-account",element:u.jsx(m3,{})}),u.jsx(st,{path:"/incubatee-dashboard",element:u.jsx(Ot,{allowedRoles:["Incubatee","Project Manager","System Analyst","Developer"],children:u.jsx(T3,{})})}),u.jsx(st,{path:"/incubatee-group",element:u.jsx(Ot,{allowedRoles:["Incubatee","Project Manager","System Analyst","Developer"],children:u.jsx(N3,{})})}),u.jsx(st,{path:"/incubatee-notification",element:u.jsx(Ot,{allowedRoles:["Incubatee","Project Manager","System Analyst","Developer"],children:u.jsx(S3,{})})}),u.jsx(st,{path:"/incubatee-chat",element:u.jsx(Ot,{allowedRoles:["Incubatee","Project Manager","System Analyst","Developer"],children:u.jsx(A3,{})})}),u.jsx(st,{path:"/incubatee/view-group/:groupId",element:u.jsx(Ot,{allowedRoles:["Incubatee","Project Manager","System Analyst","Developer"],children:u.jsx(j3,{})})}),u.jsx(st,{path:"/incubatee-editprofile",element:u.jsx(Ot,{allowedRoles:["Incubatee","Project Manager","System Analyst","Developer"],children:u.jsx(I3,{})})}),u.jsx(st,{path:"/employee-login",element:u.jsx(O3,{})}),u.jsx(st,{path:"/employee-create-account",element:u.jsx(D3,{})}),u.jsx(st,{path:"/employee-dashboard",element:u.jsx(Ot,{allowedRoles:["TBI Manager","Portfolio Manager","TBI Assistant"],children:u.jsx(P3,{})})}),u.jsx(st,{path:"/employee-groups",element:u.jsx(Ot,{allowedRoles:["TBI Manager","Portfolio Manager","TBI Assistant"],children:u.jsx(L3,{})})}),u.jsx(st,{path:"/employee-notification",element:u.jsx(Ot,{allowedRoles:["TBI Manager","Portfolio Manager","TBI Assistant"],children:u.jsx(V3,{})})}),u.jsx(st,{path:"/employee-chat",element:u.jsx(Ot,{allowedRoles:["TBI Manager","Portfolio Manager","TBI Assistant"],children:u.jsx(z3,{})})}),u.jsx(st,{path:"/employee/view-group/:groupId",element:u.jsx(Ot,{allowedRoles:["TBI Manager","Portfolio Manager","TBI Assistant"],children:u.jsx(B3,{})})}),u.jsx(st,{path:"/employee-editprofile",element:u.jsx(Ot,{allowedRoles:["TBI Manager","Portfolio Manager","TBI Assistant"],children:u.jsx(q3,{})})}),u.jsx(st,{path:"/admin-login",element:u.jsx(H3,{})}),u.jsx(st,{path:"/admin-dashboard",element:u.jsx(Ot,{allowedRoles:["TBI Manager","TBI Assistant"],children:u.jsx(G3,{})})}),u.jsx(st,{path:"/admin-groups",element:u.jsx(Ot,{allowedRoles:["TBI Manager","TBI Assistant"],children:u.jsx(X3,{})})}),u.jsx(st,{path:"/admin-user-management",element:u.jsx(Ot,{allowedRoles:["TBI Manager"],children:u.jsx(K6,{})})}),u.jsx(st,{path:"/admin-notification",element:u.jsx(Ot,{allowedRoles:["TBI Manager","TBI Assistant"],children:u.jsx(W3,{})})}),u.jsx(st,{path:"/admin-chat",element:u.jsx(Ot,{allowedRoles:["TBI Manager","TBI Assistant"],children:u.jsx($3,{})})}),u.jsx(st,{path:"/admin/view-group/:groupId",element:u.jsx(Ot,{allowedRoles:["TBI Manager","TBI Assistant"],children:u.jsx(Y6,{})})}),u.jsx(st,{path:"/admin-editprofile",element:u.jsx(Ot,{allowedRoles:["TBI Manager","TBI Assistant"],children:u.jsx(W6,{})})}),u.jsx(st,{path:"/admin-groups/archives",element:u.jsx(Ot,{allowedRoles:["TBI Manager","TBI Assistant"],children:u.jsx(X6,{})})})]})}function J6(){return u.jsx(EN,{basename:"/MarianTrack",children:u.jsx(Z6,{})})}lT.createRoot(document.getElementById("root")).render(u.jsx(C.StrictMode,{children:u.jsx(J6,{})}));
